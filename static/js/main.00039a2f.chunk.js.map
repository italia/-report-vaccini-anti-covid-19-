{"version":3,"sources":["components/HeaderBar.jsx","components/FooterBar.jsx","components/Total.jsx","utils.js","loadData.js","naturalSortAlgorithm.js","components/Table.jsx","components/MapArea.jsx","containers/deliveries.jsx","components/AgeHStackedBarChart.jsx","containers/agedoses.jsx","components/HealedHStackedBarChart.jsx","containers/healed.jsx","components/StackedBarChart.jsx","components/RangeWeek.jsx","containers/weeks.jsx","containers/databox.jsx","components/BarChartsSupplier.jsx","components/Supplier.jsx","components/LocationsTable.jsx","containers/locations.jsx","App.jsx","reportWebVitals.js","index.js"],"names":["HeaderBar","className","src","height","alt","href","aria-label","rel","FooterBar","Total","props","summary","timestamp","moment","format","tot","toLocaleString","sumDoseX","y","acc","x","filterBy","z","replaceArea","filterByArea","area","areaMapping","code","ABR","BAS","CAL","CAM","EMR","FVG","LAZ","LIG","LOM","MAR","MOL","PAB","PAT","PIE","PUG","SAR","SIC","TOS","UMB","VDA","VEN","baseURL","obj","retobj","key","inverse","sommVaxSummaryURL","sommVaxDetailURL","vaxSummaryURL","vaxLocationsURL","anagraficaSummaryURL","lastUpdateURL","supplierDoses","plateaURL","plateaDoseAddizionaleBoosterURL","plateaDoseImmunocompromessiURL","plateaDoseSecondBoosterURL","guaritiURL","elaborate","data","dataSommVaxSummary","filter","d","reduce","dataSupplier","dataSupplierDoses","dataSomeVaxDetail","dataSommVaxDetail","map","deliverySummary","dataVaxSummary","dataVaxSomLatest","totalDoses","prima_dose","_","sum","e","eta","d1","prima_dose_baby","seconda_dose","d2","seconda_dose_baby","pregressa_infezione","dpi","pregressa_infezione_baby","dose_addizionale_booster","db1","dose_addizionale_booster_baby","dose_immunocompromessi","dbi","dose_second_booster","db2","prima_dose_janssen","forn","prima_dose_janssen_baby","vax_somministrati","data_consegna","substr","_e","numero_dosi","groups","groupBy","allDosesSupplier","Object","keys","k","groupByKey","group","totale","fornitore","allDoses","sort","a","b","totalSuplier","allDosesMapByArea","doesesByArea","groupByArea","dose","totalDosesByArea","dosi_somministrate","deliveredByArea","locations","dataVaxLocations","maxNumberOfLocations","locationsByRegion","items","length","value","totalDeliverySummary","details","head","byAge","rows","age","sumBy","r","m","f","percentage","dosi_consegnate","fascia_anagrafica","percentuale_somministrazione","toFixed","sesso_femminile","sesso_maschile","totalDeliverySummaryByAge","i","toString","trim","rowsData","keyValueDoses","keysDosesAges","dosesAges","keyOfKeyValues","push","regionsDoses","dosesAgesData","dosesAgesRegionData","agesTmp","row","hasOwnProperty","doseKey","ageDosesTotal","reverse","entry","label","dataPlatea","platea","parseInt","totale_popolazione","totalGuariti","totalGuaritiDoppia","totalGuaritiBooster","totalGuaritiBoosterNotBaby","totalGuaritiBaby","dataGuariti","guariti_senza_somm","guariti_post_1booster","guariti_post_somm","totalPlatea","totalPlateaBaby","secondDoses","secondDoseTmp","rowAge","keyAge","secondDosesData","region","plateaRegionAges","popolazione","secondDosesPlateaData","tmpElem","subItem","includes","arrayTmp","keyValueHealed","keysHealed","regionsHealed","healed","healedData","healedRegionData","healedTmp","healedKey","healedTotal","console","log","regionsHealedTmp","valueSum","healedMapData","spectrum","suppliersColor","suppliers","indexOfPediatrico","indexOf","splice","rowFornitore","weeksMappingOptimation","index","suppliersWeek","date","Date","Moment","from","labelfrom","to","getTime","labelto","total","week","totalPlateaDoseAddizionaleBooster","dataPlateaDoseAddizionaleBooster","totalPlateaDoseImmunocompromessi","dataPlateaDoseImmunocompromessi","totalPlateaDoseSecondBooster","dataPlateaSecondBooster","dataLastUpdate","ultimo_aggiornamento","dosesAgesColor","healedColor","loadData","Promise","all","fetch","resSommVaxSummary","resSommVaxDetail","resVaxSummary","resProfileSummaryURL","resVaxLocations","resLastUpdate","resSupplierDoses","resPlatea","resPlateaDoseAddizionaleBooster","resPlateaDoseImmunocompromessi","resPlateaDoseSecondBooster","resGuariti","json","dataProfileSummary","naturalSort","html","re","sre","dre","hre","ore","htmre","replace","xN","split","yN","xD","match","parse","yD","cLoc","numS","Math","max","oFxNcL","parseFloat","oFyNcL","isNaN","jQuery","dataTableExt","oSort","toLowerCase","$","DataTable","columns","title","Table","deliveryTableData","useEffect","find","append","dom","paging","searching","destroy","language","decimal","thousands","columnDefs","targets","width","type","render","Number","footerCallback","start","end","display","api","intVal","totalDelivery","column","search","totalVaccines","totalPercentage","footer","id","cellSpacing","style","paddingBottom","MapArea","handleMapDeliveryClick","fillMapDeliveryArea","fillBy","tooltip","useState","geographies","setGeographies","maxValue","setMaxValue","maxBy","projection","d3","center","rotate","parallels","scale","translate","res","topojson","objects","regions","features","fetchData","reg_name","properties","fill","field","stroke","strokeWidth","onClick","Deliveries","deliveryMapData","setDeliveryMapData","setDeliveryTableData","deliverySelectedRegion","setDeliverySelectedRegion","setTotalDelivery","selectedAge","setSelectedAge","isEmpty","resetFilter","scaleOp","valueToFill","deliveryTableFilteredData","AgeHStackedBarChart","handleRectClick","labels","colors","selectedCodeAge","regionSelected","myRef","useRef","divRef","current","selectAll","remove","draw","responsivefy","svg","container","node","parentNode","aspect","resize","targetWidth","attr","round","call","window","on","dataset","margin","xScale","domain","yScale","padding","range","chart","path","enter","ageCode","replaceAll","bandwidth","this","transition","event","regione","pageY","pageX","perc","exit","ref","AgeDoses","setdosesAgesColor","setdosesAges","dosesAgesKeys","setDosesAgesKeys","setKeyValueDoses","setDosesAgesData","categoryMapData","setCategoryMapData","dosesMapData","setDosesMapData","categoryMapField","setCategoryMapField","categorySelectedRegion","setCategorySelectedRegion","categorySelectedRegionDescr","setCategorySelectedRegionDescr","setSelectedCodeAge","totalByCategory","setTotalByCategory","property","xprop","yprop","cat","backgroundColor","HealedHStackedBarChart","Healed","setHealedColor","setHealed","healedKeys","setHealedKeys","setHealedData","setKeyValueHealed","class","itemVal","val","Totale","StackedBarChart","selectedFrom","selectedTo","ytitle","slice","text","RangeWeek","min","changeFrom","changeTo","values","setValues","justifyContent","flexWrap","draggableTrack","step","rtl","onChange","renderTrack","children","onMouseDown","onTouchStart","marginRight","marginLeft","borderRadius","background","getTrackBackground","alignSelf","renderThumb","isDragged","alignItems","boxShadow","Weeks","setSuppliersColor","setSuppliers","setSuppliersWeek","setFrom","setTo","supply","xtitle","marginBottom","Databox","totalePrimaDose","setTotalePrimaDose","percentualePrimaDosePopolazione","setPercentualePrimaDosePopolazione","totalePersoneVaccinate","setTotalePersoneVaccinate","totalePersoneVaccinatePopolazione","setTotalePersoneVaccinatePopolazione","totaleDoseAddizionaleBooster","setTotaleDoseAddizionaleBooster","percentualeDoseAddizionaleBooster","setPercentualeDoseAddizionaleBooster","totaleDoseImmunocompromessi","setTotaleDoseImmunocompromessi","percentualeDoseImmunocompromessi","setPercentualeDoseImmunocompromessi","totalePersoneSecondBooster","setTotalePersoneSecondBooster","percentualePersoneSecondBooster","setPercentualePersoneSecondBooster","totalePersoneGuarite","setTotalePersoneGuarite","totalePersoneGuaritePopolazione","setTotalePersoneGuaritePopolazione","totalePersoneGuariteDoppiaDose","setTotalePersoneGuariteDoppiaDose","totalePersoneGuaritePopolazioneDoppiaDose","setTotalePersoneGuaritePopolazioneDoppiaDose","totaleAlmenoUnaGuariti","setTotaleAlmenoUnaGuariti","percentualeAlmenoUnaGuariti","setPercentualeAlmenoUnaGuariti","totaleDoseAddizionaleGuaritiDoppiaDose","setTotaleDoseAddizionaleGuaritiDoppiaDose","percentualeDoseAddizionaleGuaritiDoppiaDose","setPercentualeDoseAddizionaleGuaritiDoppiaDose","totaleGuaritiDopoDoseBooster","setTotaleGuaritiDopoDoseBooster","percentualeGuaritiDopoDoseBooster","setPercentualeGuaritiDopoDoseBooster","totaleBooster","setTotaleBooster","percentualeTotaleBooster","setPercentualeTotaleBooster","totalePrimaDoseBaby","setTotalePrimaDoseBaby","percentualePrimaDosePopolazioneBaby","setPercentualePrimaDosePopolazioneBaby","totalePersoneVaccinateBaby","setTotalePersoneVaccinateBaby","totalePersoneVaccinatePopolazioneBaby","setTotalePersoneVaccinatePopolazioneBaby","totalePersoneGuariteBaby","setTotalePersoneGuariteBaby","totalePersoneGuaritePopolazioneBaby","setTotalePersoneGuaritePopolazioneBaby","totalePrimaDoseConGuaritiBaby","setTotalePrimaDoseConGuaritiBaby","percentualeTotalePrimaDoseConGuaritiBaby","setPercentualeTotalePrimaDoseConGuaritiBaby","digit","minimumFractionDigits","maximumFractionDigits","prima","primaBaby","totBaby","BarChartSupplier","maxScale","handleBarChartClick","selected","Supplier","selectedLocationCategoryMap","setSelectedLocationCategoryMap","selectedSupplier","setelectedSupplier","deliveryBarChartData","setdeliveryBarChartData","setTotalSuplier","tmp","currentRect","bar","document","getElementById","clickEvt","MouseEvent","dispatchEvent","simulateClick","LocationsTable","setLocationCount","table","bLengthChange","info","scrollY","scrollCollapse","count","TextBoxTotal","locationCount","TextBoxMap","Locations","setSummary","selectedLocation","setSelectedLocation","App","then","loading","hideLoader","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.00039a2f.chunk.js","sourcesContent":["import React from \"react\";\nimport \"bootstrap-italia/dist/css/bootstrap-italia.min.css\";\nimport \"../App.css\";\nimport \"typeface-titillium-web\";\nimport \"typeface-roboto-mono\";\nimport \"typeface-lora\";\n\nexport const HeaderBar = () => {\n  return (\n    <>\n      {/* <Header small={false} theme=\"\" type=\"slim\">\n\n      </Header> */}\n    <div className=\"row m-0 bg-tertiary\" >\n        <div className=\"col-12 col-md-4 d-flex justify-content-md-center justify-content-sm-start logo-section pt-2 pb-2\">\n            <img src=\"logo.svg\" height=\"4px\" alt=\"Logo\" className=\"logo pl-5 pr-2\" />\n            <p className=\"pt-2\">\n                <a href=\"http://www.governo.it\" aria-label=\"Presidenza del Consiglio dei Ministri\" className=\"text-decoration-none\" rel=\"noreferrer\" alt=\"Presidenza del Consiglio dei Ministri\">\n                Presidenza del Consiglio dei Ministri\n                </a>\n            </p>\n        </div>\n        <div className=\"col-12 col-md-4 d-flex justify-content-md-center justify-content-sm-start logo-section pr-sm-0 pt-2 pb-2\">\n            <img src=\"logo.svg\" height=\"4px\" alt=\"Logo\" className=\"logo pl-5 pr-2\" />\n            <p className=\"pt-2\">\n                <a className=\"text-decoration-none\" href=\"https://www.governo.it/it/dipartimenti/unit-il-completamento-della-campagna-vaccinale-e-ladozione-di-altre-misure-di-contrasto\" aria-label =\"Unità Completamento Campagna Vaccinale\" rel=\"noreferrer\" alt=\"Unità Completamento Campagna Vaccinale\">\n                Unità Completamento Campagna Vaccinale\n                </a>\n            </p>\n        </div>\n        <div className=\"col-12 col-md-4 d-flex justify-content-md-center justify-content-sm-start logo-section pt-2 pb-2 pr-sm-3\">\n            <img src=\"logo.svg\" height=\"4px\" alt=\"Logo\" className=\"logo pl-5 pr-2\" />\n            <p className=\"pt-2\">\n                <a href=\"http://www.salute.gov.it/portale/home.html\" className=\"text-decoration-none\" aria-label=\"Ministero della Salute\" rel=\"noreferrer\" alt=\"Ministero della Salute\">\n                Ministero della Salute\n                </a>\n            </p>\n        </div>\n        {/** TITLE + LOGO*/}\n        <div className=\"col-12 d-flex flex-column justify-content-center mainBanner\">\n          <div className=\"d-flex justify-content-center\">\n            <img src=\"Coccarda.svg\" alt=\"Logo\" height=\"150px\" className=\"main-logo\" />\n            <h1 className=\"large-title pl-2 pt-4 d-lg-none d-md-none d-xs-block\">Report Vaccini Anti COVID-19</h1> {/* Title Desktop*/}\n            <h1 className=\"large-title pl-2 pt-5 d-none d-md-block\">Report Vaccini Anti COVID-19</h1>  {/* Title Desktop*/}\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n","import React from \"react\";\n\nexport const FooterBar = () => {\n    return (\n        <>\n            {/* <Footer small={false} theme=\"\" type=\"slim\">\n\n            </Footer> */}\n            <div className=\"row\">\n                <div className=\"col-12 text-center pt-5 pb-3\">I dati visualizzati sono disponibili all'indirizzo{\" \"}\n                    <a href=\"https://github.com/italia/covid19-opendata-vaccini\" alt=\"Repository Dati Covid Governo Italiano\">https://github.com/italia/covid19-opendata-vaccini</a>\n                </div>\n            </div>\n            <div className=\"row m-0 p-2 bg-footer\">\n                <div className=\"col-12 col-md-4 d-flex justify-content-md-center justify-content-sm-start logo-section pt-2 pb-2\">\n                    <img src=\"logo.svg\" height=\"4px\" alt=\"Logo\" className=\"logo pl-5 pr-2\" />\n                    <p className=\"pt-2\">\n                        <a href=\"http://www.governo.it\" aria-label=\"Presidenza del Consiglio dei Ministri\" className=\"text-decoration-none\" rel=\"noreferrer\" alt=\"Presidenza del Consiglio dei Ministri\">\n                            Presidenza del Consiglio dei Ministri\n                        </a>\n                    </p>\n                </div>\n                <div className=\"col-12 col-md-4 d-flex justify-content-md-center justify-content-sm-start logo-section pr-sm-0 pt-2 pb-2\">\n                    <img src=\"logo.svg\" height=\"4px\" alt=\"Logo\" className=\"logo pl-5 pr-2\" />\n                    <p className=\"pt-2\">\n                        <a className=\"text-decoration-none\" href=\"https://www.governo.it/it/dipartimenti/unit-il-completamento-della-campagna-vaccinale-e-ladozione-di-altre-misure-di-contrasto\" aria-label =\"Unità Completamento Campagna Vaccinale\" rel=\"noreferrer\" alt=\"Unità Completamento Campagna Vaccinale\">\n                            Unità Completamento Campagna Vaccinale\n                        </a>\n                    </p>\n                </div>\n                <div className=\"col-12 col-md-4 d-flex justify-content-md-center justify-content-sm-start logo-section pt-2 pb-2 pr-sm-3\">\n                    <img src=\"logo.svg\" height=\"4px\" alt=\"Logo\" className=\"logo pl-5 pr-2\" />\n                    <p className=\"pt-2\">\n                        <a href=\"http://www.salute.gov.it/portale/home.html\" className=\"text-decoration-none\" aria-label=\"Ministero della Salute\" rel=\"noreferrer\" alt=\"Ministero della Salute\">\n                            Ministero della Salute\n                        </a>\n                    </p>\n                </div>\n            </div>\n    </>\n    );\n};\n","import { React } from \"react\";\nimport moment from \"moment\";\n\nexport const Total = (props) => {\n    return (\n        <div className=\"h-100 w-100 my-3\">\n            <div className=\"mx-auto\">\n                <h6 className=\"text-center pb-4\">\n                    Report aggiornato al: {\" \"}\n                    {props.summary.timestamp && moment(props.summary.timestamp).format(\"DD-MM-YYYY HH:mm\")}\n                </h6>\n            </div>\n            <div className=\"d-flex flex-column justify-content-center\">\n                <div className=\"d-flex justify-content-center align-items-baseline\">\n                    <img src=\"meds.png\" alt=\"meds\" className=\"pl-2 pr-5\" />\n                    {\" \"}\n                    <div className=\"pl-2 mt-4 numbers\">{props.summary.tot?.toLocaleString('it')}</div>\n                </div>\n                <span className=\"border-divider mb-2\"></span>\n                <div className=\"d-flex justify-content-center\">\n                    {\" \"}\n                    <h3>Totale somministrazioni</h3>\n                </div>\n            </div>\n        </div>\n    );\n};\n","import * as _ from 'lodash';\nexport const hideLoader = () => {\n  let loading = document.getElementById('loader-custom');\n  if (loading) loading.className = !loading.className.includes('d-none') ? loading.className + ' d-none' : loading.className;\n}\nexport const showLoader = () => {\n  let loading = document.getElementById('loader-custom');\n  if (loading) loading.className = loading.className.includes('d-none') ? loading.className.replace('d-none', '') : loading.className;\n}\nexport const sumDose = (acc, x) => acc + +x?.TML_DOSE_1 + +x?.TML_DOSE_2;\nexport const sumDoseXY = (y, z) => (acc, x) => acc + +x?.[y] + +x?.[z];\nexport const sumYear = (accumulator, currentValue) => accumulator + currentValue;\nexport const sumDoseX = (y) => (acc, x) => acc + +x?.[y];\nexport const maxX = (y) => (acc, x) => (x?.[y] > acc ? x?.[y] : acc);\nexport const age = [\"16-19\", \"20-29\", \"30-39\", \"40-49\", \"50-59\", \"60-69\", \"70-79\", \"80-89\", \"90+\"];\nexport const groupByAge = (array) => {\n  let _age;\n  if (Array.isArray(array) && array.length > 0) {\n    _age = age.map(el => {\n      let resMale = _.sum(array.filter(_el => _el.fascia_anagrafica.trim() === el).map(__el => __el.sesso_maschile));\n      let resFemale = _.sum(array.filter(_el => _el.fascia_anagrafica.trim() === el).map(__el => __el.sesso_femminile));\n      return { fascia_anagrafica: el, sesso_femminile: resFemale, sesso_maschile: resMale, totale: resMale + resFemale };\n    });\n  }\n  return _age;\n}\nexport const mapArrayByProp = (array, prop) => array.map((e) => e[prop]);\nexport const reduceSum = (array) => array.reduce(sumYear);\n\nexport const aggrBy = (p) => (acc, x) => {\n  let key = x[p];\n  if (!acc[key]) {\n    acc[key] = [];\n  }\n  acc[key].push(x);\n  return acc;\n};\nexport const filterBy = (y) => (z) => (x) => {\n  return x[y] === z;\n};\nexport const filterByArea = filterBy(\"area\");\nexport const filterByAreaITA = filterByArea(\"ITA\");\nexport const filterByAge = filterBy(\"TML_FASCIA_ETA\");\nexport const mapBy = (y) =>\n  Object.keys(y).map((x) => {\n    return { [x]: { sum: y[x].reduce(sumDose, 0) } };\n  });\nexport const mapByX = (y, z) =>\n  Object.keys(y).map((x) => {\n    return { [x]: y[x].reduce(sumDoseX(z), 0) };\n  });\nconst inverse = (obj) => {\n  let retobj = {};\n  for (const key in obj) {\n    retobj[obj[key]] = key;\n  }\n  return retobj;\n};\nexport const simulateClick = (id) => {\n  if (document.getElementById(id) && id) {\n    let clickEvt = new MouseEvent('click', {\n      'bubbles': true,\n      'cancelable': true\n    });\n    document.getElementById(id).dispatchEvent(clickEvt);\n  }\n}\nexport const replaceArea = (x) => ({ ...x, area: areaMapping[x.area], code: x.area });\nexport const areaMapping = {\n  ABR: \"Abruzzo\",\n  BAS: \"Basilicata\",\n  CAL: \"Calabria\",\n  CAM: \"Campania\",\n  EMR: \"Emilia-Romagna\",\n  FVG: \"Friuli-Venezia Giulia\",\n  LAZ: \"Lazio\",\n  LIG: \"Liguria\",\n  LOM: \"Lombardia\",\n  MAR: \"Marche\",\n  MOL: \"Molise\",\n  PAB: \"P.A. Bolzano\",\n  PAT: \"P.A. Trento\",\n  PIE: \"Piemonte\",\n  PUG: \"Puglia\",\n  SAR: \"Sardegna\",\n  SIC: \"Sicilia\",\n  TOS: \"Toscana\",\n  UMB: \"Umbria\",\n  VDA: \"Valle d'Aosta\",\n  VEN: \"Veneto\",\n};\nexport const areaMappingReverse = inverse(areaMapping);\n","import { sumDoseX, replaceArea, areaMapping } from \"./utils\";\nimport _ from \"lodash\";\nimport Moment from 'moment';\n\nconst baseURL = \"https://raw.githubusercontent.com/italia/covid19-opendata-vaccini/master/dati\";\n\nconst sommVaxSummaryURL                     = `${baseURL}/somministrazioni-vaccini-summary-latest.json`;\nconst sommVaxDetailURL                      = `${baseURL}/somministrazioni-vaccini-latest.json`;\nconst vaxSummaryURL                         = `${baseURL}/vaccini-summary-latest.json`;\nconst vaxLocationsURL                       = `${baseURL}/punti-somministrazione-tipologia.json`;\nconst anagraficaSummaryURL                  = `${baseURL}/anagrafica-vaccini-summary-latest.json`;\nconst lastUpdateURL                         = `${baseURL}/last-update-dataset.json`;\nconst supplierDoses                         = `${baseURL}/consegne-vaccini-latest.json`;\nconst plateaURL                             = `${baseURL}/platea.json`;\nconst plateaDoseAddizionaleBoosterURL       = `${baseURL}/platea-dose-addizionale-booster.json`;\nconst plateaDoseImmunocompromessiURL        = `${baseURL}/platea-booster-immunocompromessi.json`;\nconst plateaDoseSecondBoosterURL            = `${baseURL}/platea-second-booster.json`;\nconst guaritiURL                            = `${baseURL}/soggetti-guariti.json`;\n\nconst elaborate = (data) => {\n    const tot = data.dataSommVaxSummary.data\n        .filter((d) => d.area !== \"ITA\")\n        .reduce(sumDoseX(\"totale\"), 0);\n\n    // datatable and map\n    const dataSupplier      = data.dataSupplierDoses.data;\n    const dataSomeVaxDetail = data.dataSommVaxDetail.data.map(replaceArea);\n    const deliverySummary   = data.dataVaxSummary.data.map(replaceArea);\n\n    // categories and ages summary\n    const dataVaxSomLatest  = data?.dataSommVaxDetail?.data;\n\n    let totalDoses = {\n        prima_dose:                     _.sum(dataVaxSomLatest?.map((e) => e?.eta === '05-11' ? 0 : e?.d1)),\n        prima_dose_baby:                _.sum(dataVaxSomLatest?.map((e) => e?.eta === '05-11' ? e?.d1 : 0)),\n        seconda_dose:                   _.sum(dataVaxSomLatest?.map((e) => e?.eta === '05-11' ? 0 : e?.d2)),\n        seconda_dose_baby:              _.sum(dataVaxSomLatest?.map((e) => e?.eta === '05-11' ? e?.d2 : 0)),\n        pregressa_infezione:            _.sum(dataVaxSomLatest?.map((e) => e?.eta === '05-11' ? 0 : e?.dpi)),\n        pregressa_infezione_baby:       _.sum(dataVaxSomLatest?.map((e) => e?.eta === '05-11' ? e?.dpi : 0)),\n        dose_addizionale_booster:       _.sum(dataVaxSomLatest?.map((e) => e?.eta === '05-11' ? 0 : e?.db1)),\n        dose_addizionale_booster_baby:  _.sum(dataVaxSomLatest?.map((e) => e?.eta === '05-11' ? e?.db1 : 0)),\n        dose_immunocompromessi:         _.sum(dataVaxSomLatest?.map((e) => e?.eta === '05-11' ? 0 : e?.dbi)),\n        dose_second_booster:            _.sum(dataVaxSomLatest?.map((e) => e?.eta === '05-11' ? 0 : e?.db2)),\n        prima_dose_janssen:         _.sum(\n                                        dataVaxSomLatest\n                                        ?.filter((e) => e.forn === \"Janssen\" && e?.eta !== '05-11')\n                                        .map((e) => e?.d1)\n                                    ),\n        prima_dose_janssen_baby:         _.sum(\n                                        dataVaxSomLatest\n                                        ?.filter((e) => e.forn === \"Janssen\" && e?.eta === '05-11')\n                                        .map((e) => e?.d1)\n                                    ),\n        vax_somministrati:          _.sum(\n                                        dataSupplier\n                                        ?.filter((e) => e?.data_consegna?.substr(0, 10) !== \"2020-12-27\")\n                                        ?.map((_e) => _e?.numero_dosi)\n                                        )?.toLocaleString(\"it\"),\n    };\n\n    if (!totalDoses.pregressa_infezione) {\n        totalDoses.pregressa_infezione = 0;\n    }\n\n    if (!totalDoses.dose_addizionale_booster) {\n        totalDoses.dose_addizionale_booster = 0;\n    }\n\n    if (!totalDoses.pregressa_infezione_baby) {\n        totalDoses.pregressa_infezione_baby = 0;\n    }\n\n    if (!totalDoses.dose_addizionale_booster_baby) {\n        totalDoses.dose_addizionale_booster_baby = 0;\n    }\n\n    const groups = _.groupBy(dataSupplier, \"forn\");\n    let allDosesSupplier = Object.keys(groups).map((k) => {\n        let groupByKey = groups[k].map((group) => group.numero_dosi);\n        let sumTotalDoses = _.sum(groupByKey);\n        return { totale: sumTotalDoses, fornitore: k, allDoses: groups[k] };\n    }).sort((a, b) => a.totale < b.totale ? 1 : -1);\n\n    let totalSuplier = _.sum(allDosesSupplier.map((e) => e?.totale));\n\n    let allDosesMapByArea = _.groupBy(dataSupplier, \"area\");\n    let doesesByArea = Object.keys(allDosesMapByArea).map((area) => {\n        let groupByArea = allDosesMapByArea[area].map((dose) => dose.numero_dosi);\n        let totalDosesByArea = _.sum(groupByArea);\n        return { area: areaMapping[area], dosi_somministrate: totalDosesByArea };\n    });\n\n    const deliveredByArea = _.groupBy(deliverySummary, \"code\");\n\n    const locations = data.dataVaxLocations.data.map(replaceArea);\n\n    let maxNumberOfLocations = 0;\n\n    const locationsByRegion = _(data.dataVaxLocations.data.map(replaceArea))\n        .groupBy(\"area\")\n        .map((items, area) => {\n            maxNumberOfLocations =\n                maxNumberOfLocations > items.length\n                    ? maxNumberOfLocations\n                    : items.length;\n            return { area: area, locations: items.length };\n        })\n        .value();\n\n    const totalDeliverySummary = _(data.dataSommVaxDetail.data.map(replaceArea))\n        .groupBy(\"code\")\n        .map((items, code) => {\n            const details = _.head(deliveredByArea[code]);\n            return {\n                code: code,\n                area: _.head(items)?.area,\n                byAge: _(items)\n                    .groupBy(\"eta\")\n                    .map((rows, age) => {\n                        const dosi_somministrate = _.sumBy(\n                            rows,\n                            (r) => r.m + r.f\n                        );\n                        const percentage = dosi_somministrate / (details.dosi_consegnate || 1);\n                        return {\n                            age: age,\n                            fascia_anagrafica: age,\n                            dosi_somministrate,\n                            dosi_consegnate: details.dosi_consegnate || 0,\n                            percentuale_somministrazione: +(percentage * 100).toFixed(1),\n                            area: _.head(items)?.area,\n                            totale: dosi_somministrate,\n                        };\n                    })\n                    .value(),\n                sesso_femminile: _.sumBy(items, \"f\"),\n                sesso_maschile: _.sumBy(items, \"m\"),\n                dosi_consegnate: details.dosi_consegnate || 0,\n                dosi_somministrate: details.dosi_somministrate || 0,\n                percentuale_somministrazione: details.percentuale_somministrazione || 0,\n            };\n        })\n        .value();\n\n    const totalDeliverySummaryByAge = _(data.dataSommVaxDetail.data.map(replaceArea))\n        .groupBy((i) => i[\"eta\"].toString().trim())\n        .map((rows, age) => {\n            const details = _(rows)\n            .groupBy(\"code\")\n            .map((rowsData, code) => {\n                const dosi_somministrate = _.sumBy(\n                    rowsData,\n                    (r) => r.m + r.f\n                );\n                const percentage =\n                    dosi_somministrate /\n                    (_.head(deliveredByArea[code]).dosi_consegnate || 1);\n                return {\n                    age: age,\n                    dosi_somministrate,\n                    sesso_maschile: _.sumBy(rowsData, \"m\"),\n                    sesso_femminile: _.sumBy(rowsData, \"f\"),\n                    code: code,\n                    dosi_consegnate: _.head(deliveredByArea[code]).dosi_consegnate || 0,\n                    percentuale_somministrazione: +(percentage * 100).toFixed(1),\n                    area: _.head(rowsData).area,\n                    //details: rows\n                };\n            })\n            .value();\n\n            return {\n                age: age,\n                details: details,\n            };\n        })\n        .groupBy(\"age\")\n        .value();\n\n    /* ages stack bar chart */\n    let keyValueDoses = {\n        \"second_booster\": \"2ª dose Booster\",\n        \"immunocompromessi\": \"Booster Immunocompromessi\",\n        \"addizionale\": \"Dose addizionale/booster\",\n        \"seconda\": \"2ª dose/unica dose\",\n        \"prima\": \"1ª dose\",\n        \"totale\": \"Totale fascia\"\n    }\n    let keysDosesAges = Object.keys(keyValueDoses);\n\n    let dosesAges = []; //legend\n    for(let keyOfKeyValues of Object.keys(keyValueDoses)) {\n        dosesAges.push(keyValueDoses[keyOfKeyValues]);\n    }\n    let dosesAgesColor = [\"#061b56\", \"#0d2d85\", \"#0a5dbb\", \"#3073cf\", \"#548bd6\", \"#b6d5f4\"]; // color\n\n    let regionsDoses = {};\n    let dosesAgesData = [];\n    let dosesAgesRegionData = {};\n\n    let agesTmp = {};\n    for (let row of data.dataSommVaxDetail.data) {\n        var key = row.eta;\n\n        if (key === '80-89' || key === '90+') {\n            key = 'over 80'\n        }\n        if (key === '5-11') {\n            key = '05-11'\n        }\n\n        if (!agesTmp.hasOwnProperty(key)) {\n            agesTmp[key] = {};\n            for(let doseKey of Object.keys(keyValueDoses)) {\n                agesTmp[key][doseKey] = 0;\n            }\n        }\n\n        if (row.forn === 'Janssen') {\n            agesTmp[key]['seconda'] += row.d1;\n        }\n        else {\n            agesTmp[key]['prima'] += row.d1;\n            agesTmp[key]['seconda'] += row.d2;\n        }\n        agesTmp[key]['seconda'] += row.dpi;\n\n        agesTmp[key]['addizionale'] += row.db1;\n        if (row.hasOwnProperty('dbi')) {\n            agesTmp[key]['immunocompromessi'] += row.dbi;\n        }\n        if (row.hasOwnProperty('db2')) {\n            agesTmp[key]['second_booster'] += row.db2;\n        }\n\n        /* regions data */\n        if (!regionsDoses.hasOwnProperty(row.area)) {\n            regionsDoses[row.area] = {};\n            regionsDoses[row.area][key] = {}\n\n            for(let doseKey of Object.keys(keyValueDoses)) {\n                regionsDoses[row.area][key][doseKey] = 0;\n            }\n        }\n        else {\n            if (!regionsDoses[row.area].hasOwnProperty(key)) {\n                regionsDoses[row.area][key] = {}\n\n                for(let doseKey of Object.keys(keyValueDoses)) {\n                    regionsDoses[row.area][key][doseKey] = 0;\n                }\n            }\n        }\n        if (row.forn === 'Janssen') {\n            regionsDoses[row.area][key]['seconda'] += row.d1;\n        }\n        else {\n            regionsDoses[row.area][key]['prima'] += row.d1;\n            regionsDoses[row.area][key]['seconda'] += row.d2;\n        }\n        regionsDoses[row.area][key]['seconda'] += row.dpi;\n        regionsDoses[row.area][key]['addizionale'] += row.db1;\n\n        if (row.hasOwnProperty('dbi')) {\n            regionsDoses[row.area][key]['immunocompromessi'] += row.dbi;\n        }\n        if (row.hasOwnProperty('db2')) {\n            regionsDoses[row.area][key]['second_booster'] += row.db2;\n        }\n    }\n\n    let ageDosesTotal = {};\n\n    for (let row of Object.keys(agesTmp).sort().reverse()) {\n        var entry = {\n            label: \"Fascia \" + row\n        };\n\n        entry['second_booster'] = agesTmp[row]['second_booster'];\n        entry['immunocompromessi'] = agesTmp[row]['immunocompromessi']  - agesTmp[row]['second_booster'];\n        entry['addizionale'] = agesTmp[row]['addizionale'] - agesTmp[row]['immunocompromessi'];\n        entry['seconda'] = agesTmp[row]['seconda'] - agesTmp[row]['addizionale'];\n        entry['prima'] = agesTmp[row]['prima'] - agesTmp[row]['seconda'];\n\n        entry[\"Totale platea\"] = 0;\n        for (let platea of data.dataPlatea.data) {\n            if (platea.eta === row || (row === 'over 80' && platea.eta === '80+')) {\n                entry[\"Totale platea\"] += parseInt(platea.totale_popolazione);\n            }\n        }\n\n        entry['totale'] = entry[\"Totale platea\"] - agesTmp[row]['prima'];\n\n        ageDosesTotal[entry['label']] = agesTmp[row]['prima'] + agesTmp[row]['seconda'] + agesTmp[row]['addizionale'] + agesTmp[row]['immunocompromessi'] + agesTmp[row]['second_booster'];\n\n        dosesAgesData.push(entry);\n    }\n\n    let totalGuariti = 0;\n    let totalGuaritiDoppia = 0;\n    let totalGuaritiBooster = 0;\n    let totalGuaritiBoosterNotBaby = 0;\n    let totalGuaritiBaby = 0;\n    for (let row of data.dataGuariti.data) {\n        if (row.eta === '05-11') {\n            totalGuaritiBaby += parseInt(row.guariti_senza_somm);\n        }\n        else {\n            totalGuaritiBoosterNotBaby += parseInt(row.guariti_post_1booster);\n        }\n        totalGuariti += parseInt(row.guariti_senza_somm);\n        totalGuaritiDoppia += parseInt(row.guariti_post_somm);\n        totalGuaritiBooster += parseInt(row.guariti_post_1booster);\n    }\n\n    let totalPlatea = 0;\n    let totalPlateaBaby = 0;\n    for (let platea of data.dataPlatea.data) {\n        if (platea.eta === '05-11') {\n            totalPlateaBaby += parseInt(platea.totale_popolazione);\n        }\n        else {\n            totalPlatea += parseInt(platea.totale_popolazione);\n        }\n    }\n\n    let secondDoses = {}\n    for (let row of data.dataSommVaxDetail.data) {\n        entry = {};\n        if (secondDoses.hasOwnProperty(row.area)) {\n            entry = secondDoses[row.area];\n        }\n\n        var secondDoseTmp = row.d2;\n        if (row.forn === 'Janssen') {\n            secondDoseTmp = row.d1;\n        }\n        if (row.hasOwnProperty('dpi')) {\n            secondDoseTmp += row.dpi;\n        }\n\n        if (!secondDoses.hasOwnProperty(row.area)) {\n            entry = {\n                'code': row.area,\n                'area': areaMapping[row.area],\n                'somministrazioni': secondDoseTmp\n            };\n        }\n        else {\n            entry['somministrazioni'] += secondDoseTmp;\n        }\n\n        for (let rowAge of Object.keys(agesTmp)) {\n            let keyAge = rowAge === 'over 80' ? 'fascia_over_80' : 'fascia_' + rowAge;\n            if (entry.hasOwnProperty(keyAge)) {\n                entry[keyAge] += (rowAge === row.eta || (rowAge === 'over 80' && (row.eta === '90+' || row.eta === '80-89'))) ? secondDoseTmp : 0;\n            }\n            else {\n                entry[keyAge] = (rowAge === row.eta || (rowAge === 'over 80' && (row.eta === '90+' || row.eta === '80-89'))) ? secondDoseTmp : 0;\n            }\n        }\n        secondDoses[row.area] = entry;\n    }\n\n    // Array delle regioni avente numero somministrazioni seconde dosi globale e per fasce d'età\n    let secondDosesData = [];\n    for (let region of Object.keys(secondDoses)) {\n        secondDosesData.push(secondDoses[region]);\n    }\n\n    // Oggetto che contiene i dati della Platea aggregati\n    let plateaRegionAges = {};\n    for (let platea of data.dataPlatea.data) {\n        if (!plateaRegionAges.hasOwnProperty(platea.area)) {\n            plateaRegionAges[platea.area] = {\n                'popolazione': 0\n            };\n        }\n\n        let keyAge = platea.eta === '80+' ? 'fascia_over_80' : (platea.eta === '05-11' ? 'fascia_05-11' : 'fascia_' + platea.eta);\n        let popolazione = parseInt(platea.totale_popolazione);\n\n        plateaRegionAges[platea.area][keyAge] = {\n            'popolazione': 0\n        };\n\n        plateaRegionAges[platea.area][keyAge]['popolazione'] = popolazione; // per singola fascia\n        plateaRegionAges[platea.area]['popolazione'] += popolazione; // totale per regione\n    }\n\n    let secondDosesPlateaData = [];\n    for (let region of Object.keys(secondDoses)) {\n        let tmpElem = secondDoses[region];\n\n        let entry = {};\n        for (let subItem of Object.keys(tmpElem)) {\n            if (subItem.includes(\"fascia\")) {\n                entry[subItem] = tmpElem[subItem] / plateaRegionAges[region][subItem]['popolazione'] * 100;\n            }\n            else {\n                entry[subItem] = tmpElem[subItem];\n            }\n        }\n        entry['somministrazioni'] = entry['somministrazioni'] / plateaRegionAges[region]['popolazione'] * 100;\n\n        secondDosesPlateaData.push(entry);\n    }\n\n    for (let region of Object.keys(regionsDoses)) {\n        let arrayTmp = [];\n\n        for (let row of Object.keys(regionsDoses[region]).sort().reverse()) {\n            entry = {\n                label: \"Fascia \" + row\n            };\n\n            entry['second_booster'] = regionsDoses[region][row]['second_booster'];\n            entry['immunocompromessi'] = regionsDoses[region][row]['immunocompromessi'] - regionsDoses[region][row]['second_booster'];\n            entry['addizionale'] = regionsDoses[region][row]['addizionale'] - regionsDoses[region][row]['immunocompromessi'];\n            entry['seconda'] = regionsDoses[region][row]['seconda'] - regionsDoses[region][row]['addizionale'];\n            entry['prima'] = regionsDoses[region][row]['prima'] - regionsDoses[region][row]['seconda'];\n\n            entry[\"Totale platea\"] = 0;\n            for (let platea of data.dataPlatea.data) {\n                if (platea.area === region && (platea.eta === row || (row === 'over 80' && platea.eta === '80+'))) {\n                    entry[\"Totale platea\"] += parseInt(platea.totale_popolazione);\n                }\n            }\n\n            entry['totale'] = entry[\"Totale platea\"] - entry['prima'] - entry['seconda'] - entry['addizionale'] - entry['immunocompromessi'] - entry['second_booster'];\n\n            arrayTmp.push(entry);\n        }\n\n        dosesAgesRegionData[region] = arrayTmp;\n    }\n\n    /* healed stack bar chart */\n    let keyValueHealed = {\n        \"senza\": \"Guariti senza somministrazione da al massimo 6 mesi\",\n        \"post\": \"Guariti post 2ª dose/unica dose da al massimo 4 mesi\",\n        \"booster\": \"Guariti post 1ª dose booster da al massimo 6 mesi\"\n    }\n    let keysHealed = Object.keys(keyValueHealed);\n\n    let healedColor = [\"#b6d5f4\", \"#0a5dbb\", \"#012675\" ];\n\n    let regionsHealed = {};\n    let healed = [];\n    for(let keyOfKeyValues of Object.keys(keyValueHealed)) {\n        healed.push(keyValueHealed[keyOfKeyValues]);\n    }\n\n    let healedData = [];\n    let healedRegionData = {};\n\n    let healedTmp = {};\n    for (let row of data.dataGuariti.data) {\n        key = row.eta;\n\n        if (key === '80+') {\n            key = 'over 80'\n        }\n\n        if (!healedTmp.hasOwnProperty(key)) {\n            healedTmp[key] = {}\n            for(let healedKey of Object.keys(keyValueHealed)) {\n                healedTmp[key][healedKey] = 0;\n            }\n        }\n\n        healedTmp[key][\"senza\"] += row.guariti_senza_somm;\n        healedTmp[key][\"post\"] += row.guariti_post_somm;\n        healedTmp[key][\"booster\"] += row.guariti_post_1booster;\n\n\n        /* regions data */\n        if (!regionsHealed.hasOwnProperty(row.area)) {\n            regionsHealed[row.area] = {};\n            regionsHealed[row.area][key] = {}\n            for(let healedKey of Object.keys(keyValueHealed)) {\n                regionsHealed[row.area][key][healedKey] = 0;\n            }\n        }\n        else {\n            if (!regionsHealed[row.area].hasOwnProperty(key)) {\n                regionsHealed[row.area][key] = {}\n                for(let healedKey of Object.keys(keyValueHealed)) {\n                    regionsHealed[row.area][key][healedKey] = 0;\n                }\n            }\n        }\n\n        regionsHealed[row.area][key][\"senza\"] += row.guariti_senza_somm;\n        regionsHealed[row.area][key][\"post\"] += row.guariti_post_somm;\n        regionsHealed[row.area][key][\"booster\"] += row.guariti_post_1booster;\n    }\n\n    let healedTotal = {};\n\n    for (let row of Object.keys(healedTmp).sort().reverse()) {\n        entry = {\n            label: \"Fascia \" + row\n        };\n        entry[\"senza\"] = healedTmp[row][\"senza\"];                           // 318K boo\n        entry[\"post\"] = healedTmp[row][\"post\"] - healedTmp[row][\"senza\"];   // 40K  senza\n        entry[\"booster\"] = healedTmp[row][\"booster\"] - healedTmp[row][\"post\"];       // 100K post\n\n        healedTotal[entry['label']] = healedTmp[row][\"booster\"] + healedTmp[row][\"post\"] + healedTmp[row][\"senza\"];\n\n        healedData.push(entry);\n    }\n\n    console.log(\"Totali\", healedTotal);\n\n    for (let region of Object.keys(regionsHealed)) {\n        let arrayTmp = [];\n\n        for (let row of Object.keys(regionsHealed[region]).sort().reverse()) {\n            entry = {\n                label: \"Fascia \" + row\n            };\n            entry[\"senza\"] = regionsHealed[region][row][\"senza\"];\n            entry[\"post\"] = regionsHealed[region][row][\"post\"] - regionsHealed[region][row][\"senza\"];\n            entry[\"booster\"] = regionsHealed[region][row][\"booster\"] - regionsHealed[region][row][\"post\"];\n\n            entry[\"Totale\"] = regionsHealed[region][row][\"booster\"] + regionsHealed[region][row][\"post\"] + regionsHealed[region][row][\"senza\"];\n\n            arrayTmp.push(entry);\n        }\n\n        healedRegionData[region] = arrayTmp;\n    }\n\n    let regionsHealedTmp = {}\n    for (let row of data.dataGuariti.data) {\n        entry = {};\n        if (regionsHealedTmp.hasOwnProperty(row.area)) {\n            entry = regionsHealedTmp[row.area];\n        }\n\n        let valueSum = row.guariti_senza_somm + row.guariti_post_somm;\n        if (!regionsHealedTmp.hasOwnProperty(row.area)) {\n            entry = {\n                'code': row.area,\n                'area': areaMapping[row.area],\n                'guariti': valueSum\n            };\n        }\n        else {\n            entry['guariti'] += valueSum;\n        }\n\n        for (let rowAge of Object.keys(healedTmp)) {\n            let keyAge = rowAge === 'over 80' ? 'fascia_over_80' : 'fascia_' + rowAge;\n            if (entry.hasOwnProperty(keyAge)) {\n                entry[keyAge] += (rowAge === row.eta || (rowAge === 'over 80' && (row.eta === '80+'))) ? valueSum : 0;\n            }\n            else {\n                entry[keyAge] = (rowAge === row.eta || (rowAge === 'over 80' && (row.eta === '80+'))) ? valueSum : 0;\n            }\n        }\n\n        regionsHealedTmp[row.area] = entry;\n    }\n\n    let healedMapData = [];\n    for (let region of Object.keys(regionsHealedTmp)) {\n        let tmpElem = regionsHealedTmp[region];\n\n        let entry = {};\n        for (let subItem of Object.keys(tmpElem)) {\n            if (subItem.includes(\"fascia\")) {\n                entry[subItem] = tmpElem[subItem];\n            }\n            else {\n                entry[subItem] = tmpElem[subItem];\n            }\n        }\n\n        healedMapData.push(entry);\n    }\n\n    // suppliers\n    let spectrum = [\"#0f69c9\", \"#4d99eb\", \"#77b2f2\", \"#b5d4f5\", \"#d1e0f0\", \"#edf2f7\", \"#ffffff\"];\n    let suppliersColor = {};\n    let suppliers = [];\n\n    for (let row of data.dataSommVaxDetail.data) {\n        if (!suppliers.includes(row.forn)) {\n            suppliers.push(row.forn);\n        }\n    }\n\n    var indexOfPediatrico = suppliers.indexOf('Pfizer Pediatrico');\n    if (indexOfPediatrico !== -1) {\n        suppliers.splice(indexOfPediatrico, 1);\n        suppliers.push('Pfizer Pediatrico');\n    }\n\n    for (let rowFornitore of suppliers) {\n        if ((Object.keys(suppliersColor).length - 1) < spectrum.length) {\n            suppliersColor[rowFornitore] = spectrum[Object.keys(suppliersColor).length];\n        }\n        else {\n            suppliersColor[rowFornitore] = \"#ffffff\";\n        }\n    }\n\n    // all weeks\n    let weeksMappingOptimation = {};\n    var index = 0;\n\n    let suppliersWeek = [];\n    var date = new Date('2020-12-21'); // start date\n    while(true) {\n        let entry = {\n            label: Moment(date).format('DD/MM'),\n            from: Moment(date).format('YYYY-MM-DD'),\n            labelfrom: Moment(date).format('DD/MM'),\n            to: Moment(new Date(date.getTime() + 6 * 86400000)).format('YYYY-MM-DD'),\n            labelto: Moment(new Date(date.getTime() + 6 * 86400000)).format('DD/MM'),\n            total: 0\n        };\n\n        for (let supplier of suppliers) {\n            entry[supplier] = 0;\n        }\n\n        weeksMappingOptimation[Moment(date).format('YYYY-MM-DD')] = index;\n        weeksMappingOptimation[Moment(new Date(date.getTime() + 1 * 86400000)).format('YYYY-MM-DD')] = index;\n        weeksMappingOptimation[Moment(new Date(date.getTime() + 2 * 86400000)).format('YYYY-MM-DD')] = index;\n        weeksMappingOptimation[Moment(new Date(date.getTime() + 3 * 86400000)).format('YYYY-MM-DD')] = index;\n        weeksMappingOptimation[Moment(new Date(date.getTime() + 4 * 86400000)).format('YYYY-MM-DD')] = index;\n        weeksMappingOptimation[Moment(new Date(date.getTime() + 5 * 86400000)).format('YYYY-MM-DD')] = index;\n        weeksMappingOptimation[Moment(new Date(date.getTime() + 6 * 86400000)).format('YYYY-MM-DD')] = index;\n        index++;\n\n        suppliersWeek.push(entry);\n\n        date = new Date(date.getTime() + 7 * 86400000);\n\n        if (date > new Date()) {\n            break;\n        }\n    }\n\n    // weeks data\n    for (let row of data.dataSommVaxDetail.data) {\n        let index = weeksMappingOptimation[Moment(new Date(row.data)).format('YYYY-MM-DD')];\n        let week = suppliersWeek[index];\n\n        // Totale Somministrazioni Settimanale\n        week.total += (\n            row.d1 +\n            row.d2 +\n            row.dpi +\n            row.db1\n        );\n\n        // Totale Somministrazioni Settimanale per fornitore\n        week[row.forn] += (\n            row.d1 +\n            row.d2 +\n            row.dpi +\n            row.db1\n        );\n    }\n\n    let totalPlateaDoseAddizionaleBooster = 0;\n    for (let platea of data.dataPlateaDoseAddizionaleBooster.data) {\n        totalPlateaDoseAddizionaleBooster += parseInt(platea.totale_popolazione);\n    }\n\n    let totalPlateaDoseImmunocompromessi = 0;\n    for (let platea of data.dataPlateaDoseImmunocompromessi.data) {\n        totalPlateaDoseImmunocompromessi += parseInt(platea.totale_popolazione);\n    }\n\n    let totalPlateaDoseSecondBooster = 0;\n    for (let platea of data.dataPlateaSecondBooster.data) {\n        totalPlateaDoseSecondBooster += parseInt(platea.totale_popolazione);\n    }\n\n    const timestamp = data.dataLastUpdate.ultimo_aggiornamento;\n    const aggr = {\n        timestamp,\n        tot,\n        deliverySummary,\n        locations,\n        dataSomeVaxDetail,\n        locationsByRegion,\n        maxNumberOfLocations,\n        allDosesSupplier,\n        doesesByArea,\n        totalSuplier,\n        totalDoses,\n        totalDeliverySummaryByAge,\n        totalDeliverySummary,\n        suppliersColor,\n        suppliers,\n        suppliersWeek,\n        keyValueDoses,\n        keysDosesAges,\n        dosesAges,\n        dosesAgesColor,\n        dosesAgesData,\n        dosesAgesRegionData,\n        ageDosesTotal,\n        healed,\n        keyValueHealed,\n        keysHealed,\n        healedColor,\n        healedData,\n        healedRegionData,\n        healedTotal,\n        healedMapData,\n        secondDosesData,\n        secondDosesPlateaData,\n        totalPlatea,\n        totalPlateaBaby,\n        totalPlateaDoseAddizionaleBooster,\n        totalPlateaDoseImmunocompromessi,\n        totalPlateaDoseSecondBooster,\n        totalGuariti,\n        totalGuaritiDoppia,\n        totalGuaritiBooster,\n        totalGuaritiBoosterNotBaby,\n        totalGuaritiBaby\n    };\n    return aggr;\n  };\n\n  export const loadData = async () => {\n    const [\n        resSommVaxSummary,\n        resSommVaxDetail,\n        resVaxSummary,\n        resProfileSummaryURL,\n        resVaxLocations,\n        resLastUpdate,\n        resSupplierDoses,\n        resPlatea,\n        resPlateaDoseAddizionaleBooster,\n        resPlateaDoseImmunocompromessi,\n        resPlateaDoseSecondBooster,\n        resGuariti\n    ] = await Promise.all([\n        fetch(sommVaxSummaryURL),\n        fetch(sommVaxDetailURL),\n        fetch(vaxSummaryURL),\n        fetch(anagraficaSummaryURL),\n        fetch(vaxLocationsURL),\n        fetch(lastUpdateURL),\n        fetch(supplierDoses),\n        fetch(plateaURL),\n        fetch(plateaDoseAddizionaleBoosterURL),\n        fetch(plateaDoseImmunocompromessiURL),\n        fetch(plateaDoseSecondBoosterURL),\n        fetch(guaritiURL)\n    ]);\n\n    const [\n        dataSommVaxSummary,\n        dataSommVaxDetail,\n        dataVaxSummary,\n        dataProfileSummary,\n        dataVaxLocations,\n        dataLastUpdate,\n        dataSupplierDoses,\n        dataPlatea,\n        dataPlateaDoseAddizionaleBooster,\n        dataPlateaDoseImmunocompromessi,\n        dataPlateaSecondBooster,\n        dataGuariti\n    ] = await Promise.all([\n        resSommVaxSummary.json(),\n        resSommVaxDetail.json(),\n        resVaxSummary.json(),\n        resProfileSummaryURL.json(),\n        resVaxLocations.json(),\n        resLastUpdate.json(),\n        resSupplierDoses.json(),\n        resPlatea.json(),\n        resPlateaDoseAddizionaleBooster.json(),\n        resPlateaDoseImmunocompromessi.json(),\n        resPlateaDoseSecondBooster.json(),\n        resGuariti.json()\n    ]);\n\n    return {\n        ...elaborate({\n            dataSommVaxSummary,\n            dataSommVaxDetail,\n            dataVaxSummary,\n            dataProfileSummary,\n            dataLastUpdate,\n            dataVaxLocations,\n            dataSupplierDoses,\n            dataPlatea,\n            dataPlateaDoseAddizionaleBooster,\n            dataPlateaDoseImmunocompromessi,\n            dataPlateaSecondBooster,\n            dataGuariti\n        })\n    };\n};\n","/* eslint-disable */\nimport * as jQuery from \"jquery\";\n\n(function() {\n \n    /*\n     * Natural Sort algorithm for Javascript - Version 0.7 - Released under MIT license\n     * Author: Jim Palmer (based on chunking idea from Dave Koelle)\n     * Contributors: Mike Grier (mgrier.com), Clint Priest, Kyle Adams, guillermo\n     * See: http://js-naturalsort.googlecode.com/svn/trunk/naturalSort.js\n     */\n    function naturalSort (a, b, html) {\n        var re = /(^-?[0-9]+(\\.?[0-9]*)[df]?e?[0-9]?%?$|^0x[0-9a-f]+$|[0-9]+)/gi,\n            sre = /(^[ ]*|[ ]*$)/g,\n            dre = /(^([\\w ]+,?[\\w ]+)?[\\w ]+,?[\\w ]+\\d+:\\d+(:\\d+)?[\\w ]?|^\\d{1,4}[\\/\\-]\\d{1,4}[\\/\\-]\\d{1,4}|^\\w+, \\w+ \\d+, \\d{4})/,\n            hre = /^0x[0-9a-f]+$/i,\n            ore = /^0/,\n            htmre = /(<([^>]+)>)/ig,\n            // convert all to strings and trim()\n            x = a.toString().replace(sre, '') || '',\n            y = b.toString().replace(sre, '') || '';\n            // remove html from strings if desired\n            if (!html) {\n                x = x.replace(htmre, '');\n                y = y.replace(htmre, '');\n            }\n            // chunk/tokenize\n        var xN = x.replace(re, '\\0$1\\0').replace(/\\0$/,'').replace(/^\\0/,'').split('\\0'),\n            yN = y.replace(re, '\\0$1\\0').replace(/\\0$/,'').replace(/^\\0/,'').split('\\0'),\n            // numeric, hex or date detection\n            xD = parseInt(x.match(hre), 10) || (xN.length !== 1 && x.match(dre) && Date.parse(x)),\n            yD = parseInt(y.match(hre), 10) || xD && y.match(dre) && Date.parse(y) || null;\n     \n        // first try and sort Hex codes or Dates\n        if (yD) {\n            if ( xD < yD ) {\n                return -1;\n            }\n            else if ( xD > yD ) {\n                return 1;\n            }\n        }\n     \n        // natural sorting through split numeric strings and default strings\n        for(var cLoc=0, numS=Math.max(xN.length, yN.length); cLoc < numS; cLoc++) {\n            // find floats not starting with '0', string or 0 if not defined (Clint Priest)\n            var oFxNcL = !(xN[cLoc] || '').match(ore) && parseFloat(xN[cLoc], 10) || xN[cLoc] || 0;\n            var oFyNcL = !(yN[cLoc] || '').match(ore) && parseFloat(yN[cLoc], 10) || yN[cLoc] || 0;\n            // handle numeric vs string comparison - number < string - (Kyle Adams)\n            if (isNaN(oFxNcL) !== isNaN(oFyNcL)) {\n                return (isNaN(oFxNcL)) ? 1 : -1;\n            }\n            // rely on string comparison if different types - i.e. '02' < 2 != '02' < '2'\n            else if (typeof oFxNcL !== typeof oFyNcL) {\n                oFxNcL += '';\n                oFyNcL += '';\n            }\n            if (oFxNcL < oFyNcL) {\n                return -1;\n            }\n            if (oFxNcL > oFyNcL) {\n                return 1;\n            }\n        }\n        return 0;\n    }\n     \n    jQuery.extend( jQuery.fn.dataTableExt.oSort, {\n        \"natural-asc\": function ( a, b ) {\n            return naturalSort(a,b,true);\n        },\n     \n        \"natural-desc\": function ( a, b ) {\n            return naturalSort(a,b,true) * -1;\n        },\n     \n        \"natural-nohtml-asc\": function( a, b ) {\n            return naturalSort(a,b,false);\n        },\n     \n        \"natural-nohtml-desc\": function( a, b ) {\n            return naturalSort(a,b,false) * -1;\n        },\n     \n        \"natural-ci-asc\": function( a, b ) {\n            a = a.toString().toLowerCase();\n            b = b.toString().toLowerCase();\n     \n            return naturalSort(a,b,true);\n        },\n     \n        \"natural-ci-desc\": function( a, b ) {\n            a = a.toString().toLowerCase();\n            b = b.toString().toLowerCase();\n     \n            return naturalSort(a,b,true) * -1;\n        }\n    } );\n     \n    }());","import { React, useEffect } from \"react\";\nimport * as $ from \"jquery\";\nimport DataTable from \"datatables.net\";\nimport \"../naturalSortAlgorithm\";\n\n\n$.DataTable = DataTable;\nconst columns = [\n  { title: \"Regioni\", data: \"area\" },\n  { title: \"Dosi somministrate\", data: \"dosi_somministrate\" },\n  { title: \"Dosi consegnate\", data: \"dosi_consegnate\" },\n  { title: \"%\", data: \"percentuale_somministrazione\" },\n];\n\nexport const Table = ({ deliveryTableData }) => {\n\n  // Add footer elements\n  useEffect(() => {\n    $(\"#datatable\").find(\"tfoot\")\n    $(\"#datatable\")\n      .find(\"table\")\n      .append('<tfoot><th></th><th></th><th></th><th></th></tfoot>')\n  }, [])\n\n  useEffect(() => {\n\n    $(\"#datatable\")\n      .find(\"table\")\n      .DataTable({\n        dom:\n          \"<'row'<'col-12'l>>\" +\n          \"<'row'<'col-12'tr>>\",\n        paging: false,\n        searching: true,\n        destroy: true,\n        data: deliveryTableData,\n        columns,\n        language: {\n          decimal: \",\",\n          thousands: \".\"\n        },\n        columnDefs: [\n          {\n            targets: 0,\n            width: '160px'\n          },\n          { type: 'natural', targets: 3 },\n          {\n            \"targets\": [1, 2, 3],\n            render: (data, type, row) => {\n              return Number(data).toLocaleString('it')\n            }\n          }\n        ],\n        footerCallback: (row, data, start, end, display) => {\n          var api = $(\"#datatable\")\n            .find(\"table\")\n            .DataTable();\n\n          // Remove the formatting to get integer data for summation\n          var intVal = function (i) {\n            return typeof i === 'string' ?\n              i.replace(/[$,]/g, '') * 1 :\n              typeof i === 'number' ?\n                i : 0;\n          };\n\n          let totalDelivery = api\n            .column(2, { search: 'applied' })\n            .data()\n            .reduce(function (a, b) {\n              return intVal(a) + intVal(b);\n            }, 0);\n\n          let totalVaccines = api\n            .column(1, { search: 'applied' })\n            .data()\n            .reduce(function (a, b) {\n              return intVal(a) + intVal(b);\n            }, 0);\n\n          // Total over all pages\n          var totalPercentage = totalDelivery ? (totalVaccines/totalDelivery)*100 : 0\n\n          // Update footer\n          $(api.column(3).footer()).html(\n            (totalPercentage).toFixed(1)\n          );\n\n          $(api.column(2).footer()).html(\n            totalDelivery.toLocaleString('it')\n          );\n\n          $(api.column(1).footer()).html(\n            totalVaccines.toLocaleString('it')\n          );\n\n          $(api.column(0).footer()).html(\n            'Totale'\n          );\n        }\n      });\n\n  },[deliveryTableData]);\n\n  return (\n    <div id=\"datatable\">\n      <table\n        className=\"table h-100 table-borderless compact table-hover deliveries-table\"\n        cellSpacing=\"0\"\n        width=\"100%\"\n        style={{ paddingBottom: 6 }}\n      />\n    </div>\n  );\n};\n","import { React, useEffect, useState } from \"react\";\nimport * as d3 from \"d3\";\nimport * as topojson from \"topojson-client\";\nimport _ from \"lodash\";\n\nexport const MapArea = ({\n    handleMapDeliveryClick,\n    fillMapDeliveryArea,\n    fillBy,\n    summary,\n    tooltip,\n    percentage,\n}) => {\n        const [geographies, setGeographies] = useState([]);\n        const [maxValue, setMaxValue] = useState(0);\n\n        useEffect(() => {\n            if (percentage) {\n                setMaxValue(100);\n            } else {\n                const maxValue = _.maxBy(summary || {}, fillBy);\n                setMaxValue(maxValue ? maxValue[fillBy] : 0);\n            }\n        }, [summary, fillBy, percentage]);\n\n    const width = 498,\n          height = 478;\n\n    const projection = d3\n        .geoAlbers()\n        .center([0, 41])\n        .rotate([347, 0])\n        .parallels([35, 45])\n        .scale(2200)\n        .translate([width / 2, height / 2]);\n        useEffect(() => {\n            const fetchData = async () => {\n                const res = await fetch(\"data/geo/it.json\");\n                const data = await res.json();\n                setGeographies(topojson.feature(data, data.objects.regions).features);\n            };\n        fetchData();\n        }, []);\n\n    return (\n        <div className=\"map-area\">\n            <svg className=\"h-100 w-100\" height={height}>\n                <g className=\"countries\">\n                    {geographies.map((d, i) => {\n                        let reg_name = d.properties.reg_name;\n                        let regions = _.filter(summary, (i) => i.area === reg_name);\n                        let region = {};\n                        if (regions && regions.length > 0) {\n                            region = regions[0];\n                        }\n\n                        return (\n                            <path\n                                key={`path-${i}`}\n                                d={d3.geoPath().projection(projection)(d)}\n                                className=\"country\"\n                                id={`${region?.area?.trim()}`}\n                                fill={fillMapDeliveryArea({ region, maxValue, field: fillBy })}\n                                stroke=\"#FFFFFF\"\n                                strokeWidth={0.7}\n                                onClick={() => handleMapDeliveryClick(region)}\n                            >\n                                <title>\n                                    <span className=\"bg-info\">{tooltip(region)}</span>\n                                </title>\n                            </path>\n                        );\n                    })});\n                </g>\n            </svg>\n        </div>\n    );\n};\n","import React, { useEffect, useState } from \"react\";\nimport { find, max, isEmpty } from \"lodash\";\nimport { Table } from \"./../components/Table\";\nimport { MapArea } from \"./../components/MapArea\";\n\nexport const Deliveries = ({ data }) => {\n    const [deliveryMapData, setDeliveryMapData] = useState([]);\n    const [deliveryTableData, setDeliveryTableData] = useState([]);\n    const [deliverySelectedRegion, setDeliverySelectedRegion] = useState(null);\n    const [totalDelivery, setTotalDelivery] = useState(0);\n    const [selectedAge, setSelectedAge] = useState(null);\n\n        useEffect(() => {\n            if (!isEmpty(data)) {\n                setDeliveryMapData(data.totalDeliverySummary);\n                setDeliveryTableData(data.totalDeliverySummary);\n                setTotalDelivery(data.tot);\n            }\n        }, [data]);\n\n        const resetFilter = () => {\n            setDeliverySelectedRegion(null);\n            setDeliveryTableData(data.totalDeliverySummary);\n            setTotalDelivery(data.tot);\n            setSelectedAge(null);\n            setDeliveryMapData(data.totalDeliverySummary);\n        };\n\n        const fillMapDeliveryArea = ({ region, maxValue, field }) => {\n            let scaleOp = 0;\n            if (region.code === deliverySelectedRegion) {\n                scaleOp = 1;\n            } else if (!deliverySelectedRegion) {\n                scaleOp = max([region[field] / maxValue, 0.1]);\n            } else {\n                const valueToFill = region[field] / (2 * maxValue);\n                scaleOp = max([valueToFill, 0.1]);\n            }\n            return `rgba(0,102,204,${scaleOp}) `;\n        };\n\n        const handleMapDeliveryClick = (region) => {\n            if (selectedAge) {\n                resetFilter();\n            }\n\n            if (deliverySelectedRegion === region.code) {\n                resetFilter();\n            } else {\n                const deliveryTableFilteredData = find(\n                data.totalDeliverySummary,\n                (d) => d.code === region.code\n            );\n\n            setDeliveryTableData([deliveryTableFilteredData]);\n            setDeliverySelectedRegion(region.code);\n            setTotalDelivery(deliveryTableFilteredData.dosi_somministrate);\n        }\n    };\n\n\n    return (\n        <div>\n            <div className=\"row\">\n                <div className=\"col-12 d-flex justify-content-end\"></div>\n            </div>\n            <div className=\"row p-2 p-3 bg-grey\">\n                <div className=\"col-12 col-lg-6 h-100 order-md-2 order-lg-1 p-1 pb-5\">\n                    <Table deliveryTableData={deliveryTableData} className=\"mr-5 h-100\" />\n                </div>\n                <div className=\"col-12 col-lg-6 order-md-1 order-lg-2 text-center\">\n                    <div className=\"p-4 position-relative d-lg-none\">\n                        <div className=\"d-flex justify-content-start pr-5\">\n                            <h5 className=\"pl-4 pl-sm-1 justify-content-center\">Distribuzione somministrazioni rispetto alle consegne</h5>\n                        </div>\n                    </div>\n                    <div className=\"p-4 d-none d-lg-block map-legend mt-5\">\n                        <div className=\"d-flex justify-content-end\">\n                            <h5 className=\"pl-1 pl-sm-1 text-left\">\n                                Distribuzione<br />somministrazioni <br />rispetto alle consegne\n                            </h5>\n                        </div>\n                    </div>\n                    <div className=\"justify-content-center mt-5\">\n                    <MapArea\n                        fillMapDeliveryArea={fillMapDeliveryArea}\n                        summary={deliveryMapData}\n                        handleMapDeliveryClick={handleMapDeliveryClick}\n                        tooltip={(r) => r.area + \" \" + (r.percentuale_somministrazione && r.percentuale_somministrazione.toLocaleString(\"it\")) + \"%\"}\n                        fillBy=\"percentuale_somministrazione\"\n                    />\n                    </div>\n                    <div className=\"p-4 position-relative\">\n                        <div className=\"text-black\">\n                            <div className=\"d-flex justify-content-center \">\n                                <span className=\"numbers\">{totalDelivery?.toLocaleString(\"it\")}</span>\n                            </div>\n                            <div className=\"d-flex justify-content-center\">\n                                <h5>Totale somministrazioni</h5>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n","import { React, useEffect, useRef } from \"react\";\nimport * as d3 from \"d3\";\n\nexport const AgeHStackedBarChart = ({\n  handleRectClick,\n  height,\n  width,\n  data,\n  keys,\n  labels,\n  colors,\n  selectedCodeAge,\n  regionSelected\n  }) => {\n\n  const myRef = useRef();\n  const divRef = useRef();\n\n  useEffect(() => {\n      doExit();\n      draw();\n      // eslint-disable-next-line\n  }, [data, keys, labels, selectedCodeAge]);\n\n\n  const responsivefy = (svg) => {\n    // Container is the DOM element, svg is appended.\n    // Then we measure the container and find its\n    // aspect ratio.\n    const container = d3.select(svg.node().parentNode),\n      width = parseInt(svg.style(\"width\"), 10),\n      height = parseInt(svg.style(\"height\"), 10),\n      aspect = width / height;\n\n    // Add viewBox attribute to set the value to initial size\n    // add preserveAspectRatio attribute to specify how to scale\n    // and call resize so that svg resizes on page load\n    svg\n      .attr(\"viewBox\", `0 0 ${width} ${height}`)\n      .attr(\"preserveAspectRatio\", \"xMinYMid\")\n      .call(resize);\n\n    d3.select(window).on(\"resize.\" + container.attr(\"id\"), resize);\n\n    function resize() {\n      const targetWidth = parseInt(container.style(\"width\"));\n      svg.attr(\"width\", targetWidth);\n      svg.attr(\"height\", Math.round(targetWidth / aspect));\n    }\n  };\n\n  function doExit() {\n    d3.select(divRef.current).selectAll(\"svg\").remove();\n  }\n\n  const draw = () => {\n\n    const dataset = d3.stack().keys(keys)(data);\n\n    // append element\n    const svg = d3\n      .select(divRef.current)\n      .append(\"svg\")\n      .style('margin-bottom', 10)\n      .attr(\"width\", width)\n      .attr(\"height\", height);\n    const margin = { y: 30, x: 60 };\n\n    // axis\n    const xScale = d3.scaleLinear().domain([0, d3.max(data, function(d) { return d['Totale platea']; })]);\n    const yScale = d3.scaleBand().padding(0.2);\n    xScale.range([0, width]);\n    yScale.range([0, height]).domain(data.map((d) => d.label));\n\n    svg\n      .attr(\"width\", width + 2 * margin.x)\n      .attr(\"height\", height + 2 * margin.y)\n      .call(responsivefy) // Call responsivefy to make the chart responsive\n      .attr(\"id\", \"svg-stack-bar\");\n\n    const chart = svg\n      .append(\"g\")\n      .attr(\"transform\", `translate(${margin.x},${margin.y})`);\n\n    chart\n      .append(\"g\")\n      .attr(\"class\", \"axis\")\n      .attr(\"transform\", `translate(0, 0)`)\n      .style(\"font-size\", \"12px\")\n      .call(d3.axisLeft(yScale))\n      .attr('stroke-width', 0)\n        .selectAll(\"text\")\n            .attr(\"y\", 0)\n            .attr(\"x\", -30)\n            .style(\"text-anchor\", \"start\")\n            .style(\"fill\", \"#19191a\");\n\n\n    const tooltip = d3\n      .select('body')\n      .append('div')\n      .attr('class', 'd3-tooltip')\n      .style('position', 'absolute')\n      .style('z-index', '10')\n      .style('display', 'none')\n      .style('padding', '10px')\n      .style('background', 'rgba(0,0,0,0.8)')\n      .style('border-radius', '4px')\n      .style('color', '#fff');\n\n    const path = chart.selectAll().data(dataset);\n\n    path\n      .enter()\n      .append(\"g\")\n      .attr(\"fill\", function(d) {\n        return colors[d.index];\n      })\n      .attr(\"dose\", function(d) {\n        return d.key;\n      })\n      .selectAll(\"rect\")\n      .data(function(d) {\n        return d;\n      })\n      .enter().append(\"rect\")\n      .on(\"click\", (e, d) => {\n        handleRectClick(d);\n        tooltip.html(``).style('display', 'none');\n      })\n      .attr(\"opacity\", (d) => {\n        const ageCode = d.data.label.toLowerCase().replaceAll(' ', '_');\n\n        let opac = selectedCodeAge === ageCode ? 1 : !selectedCodeAge ? 1 : 0.3;\n        return opac;\n      })\n      .attr(\"x\", function(d) {\n        return xScale(d[0]) + 60;\n      })\n      .attr(\"y\", function(d) {\n        return yScale(d.data.label);\n      })\n      .attr(\"width\", function(d) {\n        return xScale(d[1]) - xScale(d[0]);\n      })\n      .attr(\"height\", yScale.bandwidth())\n      .on('mouseover', function (d, i) {\n        d3.select(this).transition().attr('fill', '#0BD9D3');\n      })\n      .on('mousemove', function (event, d) {\n        let regione = regionSelected ? \" \" + regionSelected : \"\";\n\n        if (d3.select(this.parentNode).attr(\"dose\") === 'totale') {\n          tooltip\n            .style('top', event.pageY - 10 + 'px')\n            .style('left', event.pageX + 10 + 'px');\n          tooltip\n            .html(\n                `<div style=\"text-align: center; line-height: 1.15rem;\">\n                <div style=\"font-size: 12px;\">${regione}</div>\n                <div><b>${d.data.label}</b></div>\n                <div style=\"font-size: 14px;\">Platea</div>\n                <div>${d.data[\"Totale platea\"].toLocaleString('it')}</div>\n                </div>`\n                )\n            .style('display', null);\n        }\n        else {\n          var perc = 0;\n          if (d3.select(this.parentNode).attr(\"dose\") === 'prima') {\n            let sum = d.data[\"prima\"] + d.data[\"seconda\"] + d.data[\"addizionale\"] + d.data[\"immunocompromessi\"];\n            perc = (sum / d.data[\"Totale platea\"]) * 100;\n          }\n          else {\n            if (d3.select(this.parentNode).attr(\"dose\") === 'seconda') {\n              let sum = d.data[\"seconda\"] + d.data[\"addizionale\"] + d.data[\"immunocompromessi\"];\n              perc = (sum / d.data[\"Totale platea\"]) * 100;\n            }\n            else {\n              if (d3.select(this.parentNode).attr(\"dose\") === 'addizionale') {\n                let sum = d.data[\"addizionale\"] + d.data[\"immunocompromessi\"];\n                perc = (sum / d.data[\"Totale platea\"]) * 100;\n              }\n              else {\n                perc = (d.data[\"immunocompromessi\"] / d.data[\"Totale platea\"]) * 100;\n              }\n            }\n          }\n\n          tooltip\n            .style('top', event.pageY - 10 + 'px')\n            .style('left', event.pageX + 10 + 'px');\n\n            if ( perc < 0) {\n\n                tooltip\n                    .html(\n                        `<div style=\"text-align: center; line-height: 1.15rem;\">\n                        <div style=\"font-size: 12px;\">${regione} ${d.data.label}</div>\n                        <div style=\"text-align: center\"><b>${labels[d3.select(this.parentNode).attr(\"dose\")]} </b></div>\n                        <div style=\"font-size: 14px;\">Somministrate ${(d[1]).toLocaleString('it')} su ${d.data[\"Totale platea\"].toLocaleString('it')}</div>`\n                    )\n                    .style('display', null);\n\n            } else {\n\n                tooltip\n                    .html(\n                        `<div style=\"text-align: center; line-height: 1.15rem;\">\n                        <div style=\"font-size: 12px;\">${regione} ${d.data.label}</div>\n                        <div style=\"text-align: center\"><b>${labels[d3.select(this.parentNode).attr(\"dose\")]} </b></div>\n                        <div style=\"font-size: 14px;\"><b>(${perc.toFixed(2).toLocaleString(\"it\")} %)</b></div>\n                        <div style=\"font-size: 14px;\">Somministrate ${(d[1]).toLocaleString('it')} su ${d.data[\"Totale platea\"].toLocaleString('it')}</div>`\n                    )\n                    .style('display', null);\n            }\n        }\n      })\n      .on('mouseout', function (d) {\n          tooltip.html(``).style('display', 'none');\n          d3.select(this).transition().attr('fill', colors[d.key]);\n      });\n\n    path.exit().remove();\n  };\n\n  return (\n    <div ref={divRef} className=\"chart svg-container\">\n      <svg ref={myRef} className=\"svg-content-responsive\"></svg>\n    </div>\n  );\n};\n","import React, { useEffect, useState } from \"react\";\nimport { isEmpty, max } from \"lodash\";\nimport { AgeHStackedBarChart } from \"./../components/AgeHStackedBarChart\";\nimport { MapArea } from \"./../components/MapArea\";\n\nexport const AgeDoses = ({ data }) => {\n    const [dosesAgesColor, setdosesAgesColor] = useState([]);\n    const [dosesAges, setdosesAges] = useState([]);\n    const [dosesAgesKeys, setDosesAgesKeys] = useState([]);\n    const [keyValueDoses, setKeyValueDoses] = useState({});\n    const [dosesAgesData, setDosesAgesData] = useState([]);\n\n    const [categoryMapData, setCategoryMapData] = useState([]);\n    const [dosesMapData, setDosesMapData] = useState([]);\n    const [categoryMapField, setCategoryMapField] = useState(\"somministrazioni\");\n\n    const [categorySelectedRegion, setCategorySelectedRegion] = useState(null);\n    const [categorySelectedRegionDescr, setCategorySelectedRegionDescr] = useState(null);\n    const [selectedCodeAge, setSelectedCodeAge] = useState(null);\n\n    const [totalByCategory, setTotalByCategory] = useState(0);\n\n    useEffect(() => {\n        if (!isEmpty(data)) {\n            setdosesAgesColor(data.dosesAgesColor);\n            setdosesAges(data.dosesAges);\n            setDosesAgesKeys(data.keysDosesAges);\n            setKeyValueDoses(data.keyValueDoses);\n            setDosesAgesData(data.dosesAgesData);\n\n            setTotalByCategory(data.tot);\n            setCategoryMapData(data.secondDosesPlateaData);\n            setDosesMapData(data.secondDosesData);\n        }\n    }, [data]);\n\n    const resetFilter = () => {\n        setSelectedCodeAge(null);\n        setCategorySelectedRegion(null);\n        setCategorySelectedRegionDescr(null);\n        setTotalByCategory(data.tot);\n        setDosesAgesData(data.dosesAgesData);\n        setCategoryMapField(\"somministrazioni\");\n        setCategoryMapData(data.secondDosesPlateaData);\n    };\n\n    const fillMapCategoryArea = ({ region, maxValue, field }) => {\n        let scaleOp = 0;\n        if (region.code === categorySelectedRegion) {\n          scaleOp = 1;\n        } else if (!categorySelectedRegion) {\n          scaleOp = max([region[field] / maxValue, 0.1]);\n        } else {\n          const valueToFill = region[field] / (2 * maxValue);\n          scaleOp = max([valueToFill, 0.1]);\n        }\n        return `rgba(0,102,204,${scaleOp}) `;\n    };\n\n    const handleMapCategoryClick = (region) => {\n        if (selectedCodeAge) {\n          resetFilter();\n        }\n\n        if (categorySelectedRegion === region.code) {\n          resetFilter();\n        } else {\n          setCategorySelectedRegion(region.code);\n          setCategorySelectedRegionDescr(region.area);\n          setDosesAgesData(data.dosesAgesRegionData[region.code])\n\n          for(let row of data?.totalDeliverySummary) {\n            if (row.code === region.code) {\n                setTotalByCategory(row.dosi_somministrate);\n            }\n          }\n        }\n    };\n\n    const handleCategoryBarChartClick = (cat) => {\n        if (categorySelectedRegion) {\n          resetFilter();\n        }\n\n        const ageCode = cat.data.label.toLowerCase().replaceAll(' ', '_');\n\n        if (selectedCodeAge === ageCode) {\n          resetFilter();\n        } else {\n          setSelectedCodeAge(ageCode);\n          setCategoryMapField(ageCode);\n          setTotalByCategory(data.ageDosesTotal[cat.data.label]);\n        }\n    };\n\n    return (\n        <div className=\"row\">\n            {/* Box Title */}\n            <div className=\"col-12 d-flex justify-content-center align-items-center section-title mx-2\">\n                <div>\n                    <h3>Somministrazioni per fascia d'età - dose</h3>\n                </div>\n            </div>\n            {/* // Box Title */}\n\n            <div className=\"col-12 col-md-12 m-3\">\n                {/* Total Box - Mobile Layout */}\n                <div className=\"d-lg-none bg-box box-mobile m-3\">\n                    <div className=\"text-white\">\n                        <div className=\"d-flex justify-content-center pt-5\">\n                            <h5>Totale somministrazioni</h5>\n                        </div>\n                        <div className=\"d-flex justify-content-center\">\n                            <p className=\"box-numbers\">\n                                {totalByCategory && totalByCategory.toLocaleString(\"it\")}\n                            </p>\n                        </div>\n                        <div className=\"col-12 d-flex justify-content-end pb-2\">\n                            <img alt=\"reset-plot2\" src=\"reset_white.png\" onClick={resetFilter} height=\"36px\"/>\n                        </div>\n                    </div>\n                </div>\n                {/* // Total Box - Mobile Layout */}\n\n                {/* Total Box - Desktop Layout */}\n                <div className=\"col-4 col-md-4 d-none d-lg-block\">\n                    <div className=\"bg-box box-card box-left\">\n                        <div className=\"text-white\">\n                            <div className=\"d-flex justify-content-start pt-3 pl-5\">\n                                <h5>Totale somministrazioni</h5>\n                            </div>\n                            <div className=\"d-flex justify-content-start pl-5\">\n                                <p className=\"box-numbers\">\n                                    {totalByCategory && totalByCategory.toLocaleString(\"it\")}\n                                </p>\n                            </div>\n                            <div className=\"col-12 d-flex justify-content-end pb-2\">\n                                <img alt=\"Reset\" src=\"reset_white.png\" onClick={resetFilter} height=\"36px\"/>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                {/* // Total Box - Desktop Layout */}\n            </div>\n            <div className=\"col-12 col-md-6\">\n\n                {/* Graph */}\n                <AgeHStackedBarChart\n                    width={+350}\n                    height={+300}\n                    property={{ xprop: \"label\", yprop: \"total\" }}\n                    handleRectClick={handleCategoryBarChartClick}\n                    regionSelected={categorySelectedRegionDescr}\n                    selectedCodeAge={selectedCodeAge}\n                    colors={dosesAgesColor}\n                    keys={dosesAgesKeys}\n                    labels={keyValueDoses}\n                    data={dosesAgesData}\n                />\n                {/* // Graph */}\n\n                {/* Legend */}\n                <div className=\"row mb-4 ml-4\">\n                    {dosesAges.map((dose, index) => {\n                        return (\n                            <div className=\"row\" key={dose}>\n                                <div className=\"circle\" style={{ backgroundColor: dosesAgesColor[index] }}></div>\n                                <div className=\"legend-dark mr-4\">{dose}</div>\n                            </div>\n                        )\n                    })}\n                </div>\n                {/* // Legend */}\n\n                <p className=\"d-block d-sm-none text-center\">*Tieni premuto sulle barre del grafico per visualizzare i dati sulle dosi somministrate</p>\n                <p className=\"d-none d-sm-block text-center\">*Passa con il mouse sulle barre del grafico per visualizzare i dati sulle dosi somministrate</p>\n            </div>\n            <div className=\"col-12 col-md-6\">\n\n                {/* Map Title - Mobile View*/}\n                <div className=\"p-4 d-lg-none\">\n                    <div className=\"text-center\">\n                        <h5>Percentuale vaccinati per regione</h5>\n                    </div>\n                </div>\n                {/* // Map Title - Mobile View*/}\n\n                {/* Map Graph */}\n                <MapArea\n                    fillMapDeliveryArea={fillMapCategoryArea}\n                    summary={categoryMapData}\n                    handleMapDeliveryClick={handleMapCategoryClick}\n                    fillBy={categoryMapField}\n                    percentage={true}\n                    tooltip={(r) => {\n                            var region = null;\n                            for(let row of dosesMapData) {\n                                if (row.code === r.code) {\n                                    region = row;\n                                }\n                            }\n\n                            return (\n                                r.area +\n                                \" \" +\n                                (r[categoryMapField] && r[categoryMapField].toFixed(2).toLocaleString(\"it\") + \"%\") +\n                                \" \" +\n                                (region && region[categoryMapField] && \"(\" + region[categoryMapField].toLocaleString(\"it\") + \")\")\n                            )\n                        }\n                    }\n                    className=\"ml-5\"\n                />\n                {/* // Map Graph */}\n\n                {/* Map Title - Desktop View*/}\n                {/* <div className=\"p-4 position-relative d-none d-lg-block\" style={{ left: \"300px\", top: \"-390px\" }}> */}\n                <div className=\"p-4 d-none d-lg-block map-legend\">\n                    <div className=\"d-flex justify-content-start pr-5\">\n                        <h5 className=\"pl-3 pl-sm-1\">\n                            Percentuale vaccinati\n                            <br /> per regione\n                        </h5>\n                    </div>\n                </div>\n                {/* // Map Title - Desktop View*/}\n            </div>\n        </div>\n    )\n};","import { React, useEffect, useRef } from \"react\";\nimport * as d3 from \"d3\";\n\nexport const HealedHStackedBarChart = ({\n  handleRectClick,\n  height,\n  width,\n  data,\n  keys,\n  labels,\n  colors,\n  selectedCodeAge,\n  regionSelected\n  }) => {\n\n  const myRef = useRef();\n  const divRef = useRef();\n\n  useEffect(() => {\n      doExit();\n      draw();\n      // eslint-disable-next-line\n  }, [data, keys, labels, selectedCodeAge]);\n\n\n  const responsivefy = (svg) => {\n    // Container is the DOM element, svg is appended.\n    // Then we measure the container and find its\n    // aspect ratio.\n    const container = d3.select(svg.node().parentNode),\n      width = parseInt(svg.style(\"width\"), 10),\n      height = parseInt(svg.style(\"height\"), 10),\n      aspect = width / height;\n\n    // Add viewBox attribute to set the value to initial size\n    // add preserveAspectRatio attribute to specify how to scale\n    // and call resize so that svg resizes on page load\n    svg\n      .attr(\"viewBox\", `0 0 ${width} ${height}`)\n      .attr(\"preserveAspectRatio\", \"xMinYMid\")\n      .call(resize);\n\n    d3.select(window).on(\"resize.\" + container.attr(\"id\"), resize);\n\n    function resize() {\n      const targetWidth = parseInt(container.style(\"width\"));\n      svg.attr(\"width\", targetWidth);\n      svg.attr(\"height\", Math.round(targetWidth / aspect));\n    }\n  };\n\n  function doExit() {\n    d3.select(divRef.current).selectAll(\"svg\").remove();\n  }\n\n  const draw = () => {\n\n    const dataset = d3.stack().keys(keys)(data);\n\n    // append element\n    const svg = d3\n      .select(divRef.current)\n      .append(\"svg\")\n      .style('margin-bottom', 10)\n      .attr(\"width\", width)\n      .attr(\"height\", height);\n    const margin = { y: 30, x: 60 };\n\n    // axis\n    const xScale = d3.scaleLinear().domain([0, d3.max(data, function(d) { return d['post'] + d['senza']; })]);\n    const yScale = d3.scaleBand().padding(0.2);\n    xScale.range([0, width]);\n    yScale.range([0, height]).domain(data.map((d) => d.label));\n\n    svg\n      .attr(\"width\", width + 2 * margin.x)\n      .attr(\"height\", height + 2 * margin.y)\n      .call(responsivefy) // Call responsivefy to make the chart responsive\n      .attr(\"id\", \"svg-stack-bar\");\n\n    const chart = svg\n      .append(\"g\")\n      .attr(\"transform\", `translate(${margin.x},${margin.y})`);\n\n    chart\n      .append(\"g\")\n      .attr(\"class\", \"axis\")\n      .attr(\"transform\", `translate(0, 0)`)\n      .style(\"font-size\", \"12px\")\n      .call(d3.axisLeft(yScale))\n      .attr('stroke-width', 0)\n        .selectAll(\"text\")\n            .attr(\"y\", 0)\n            .attr(\"x\", -30)\n            .style(\"text-anchor\", \"start\")\n            .style(\"fill\", \"#19191a\");\n\n\n    const tooltip = d3\n      .select('body')\n      .append('div')\n      .attr('class', 'd3-tooltip')\n      .style('position', 'absolute')\n      .style('z-index', '10')\n      .style('display', 'none')\n      .style('padding', '10px')\n      .style('background', 'rgba(0,0,0,0.8)')\n      .style('border-radius', '4px')\n      .style('color', '#fff');\n\n    const path = chart.selectAll().data(dataset);\n\n    path\n      .enter()\n      .append(\"g\")\n      .attr(\"fill\", function(d) {\n        return colors[d.index];\n      })\n      .attr(\"dose\", function(d) {\n        return d.key;\n      })\n      .selectAll(\"rect\")\n      .data(function(d) {\n        return d;\n      })\n      .enter().append(\"rect\")\n      .on(\"click\", (e, d) => {\n        handleRectClick(d);\n        tooltip.html(``).style('display', 'none');\n      })\n      .attr(\"opacity\", (d) => {\n        const ageCode = d.data.label.toLowerCase().replaceAll(' ', '_');\n\n        let opac = selectedCodeAge === ageCode ? 1 : !selectedCodeAge ? 1 : 0.3;\n        return opac;\n      })\n      .attr(\"x\", function(d) {\n        return xScale(d[0]) + 60;\n      })\n      .attr(\"y\", function(d) {\n        return yScale(d.data.label);\n      })\n      .attr(\"width\", function(d) {\n        return xScale(d[1]) - xScale(d[0]);\n      })\n      .attr(\"height\", yScale.bandwidth())\n      .on('mouseover', function (d, i) {\n        d3.select(this).transition().attr('fill', '#0BD9D3');\n      })\n      .on('mousemove', function (event, d) {\n        let regione = regionSelected ? \" \" + regionSelected : \"\";\n\n        tooltip\n          .style('top', event.pageY - 10 + 'px')\n          .style('left', event.pageX + 10 + 'px');\n        tooltip\n          .html(\n              `<div style=\"text-align: center; line-height: 1.15rem;\">\n              <div style=\"font-size: 12px;\">${regione} ${d.data.label}</div>\n              <div style=\"text-align: center\"><b>${labels[d3.select(this.parentNode).attr(\"dose\")]} </b></div>\n              <div style=\"font-size: 14px;\">${(d[1]).toLocaleString('it')}</div>`\n          )\n          .style('display', null);\n      })\n      .on('mouseout', function (d) {\n          tooltip.html(``).style('display', 'none');\n          d3.select(this).transition().attr('fill', colors[d.key]);\n      });\n\n    path.exit().remove();\n  };\n\n  return (\n    <div ref={divRef} className=\"chart svg-container\">\n      <svg ref={myRef} className=\"svg-content-responsive\"></svg>\n    </div>\n  );\n};\n","import React, { useEffect, useState } from \"react\";\nimport { isEmpty, max } from \"lodash\";\nimport { HealedHStackedBarChart } from \"../components/HealedHStackedBarChart\";\nimport { MapArea } from \"../components/MapArea\";\n\nexport const Healed = ({ data }) => {\n    const [healedColor, setHealedColor] = useState([]);\n    const [healed, setHealed] = useState([]);\n    const [healedKeys, setHealedKeys] = useState([]);\n    const [healedData, setHealedData] = useState([]);\n    const [keyValueHealed, setKeyValueHealed] = useState({});\n\n    const [categoryMapData, setCategoryMapData] = useState([]);\n    const [categoryMapField, setCategoryMapField] = useState(\"guariti\");\n\n    const [categorySelectedRegion, setCategorySelectedRegion] = useState(null);\n    const [categorySelectedRegionDescr, setCategorySelectedRegionDescr] = useState(null);\n    const [selectedCodeAge, setSelectedCodeAge] = useState(null);\n\n    const [totalByCategory, setTotalByCategory] = useState(0);\n\n    useEffect(() => {\n        if (!isEmpty(data)) {\n            setHealedColor(data.healedColor);\n            setHealed(data.healed);\n            setHealedData(data.healedData);\n            setHealedKeys(data.keysHealed);\n\n            setTotalByCategory(data.totalGuariti + data.totalGuaritiDoppia + data.totalGuaritiBooster);\n            setCategoryMapData(data.healedMapData);\n\n            setKeyValueHealed(data.keyValueHealed);\n        }\n    }, [data]);\n\n    const resetFilter = () => {\n        setSelectedCodeAge(null);\n        setCategorySelectedRegion(null);\n        setCategorySelectedRegionDescr(null);\n        setTotalByCategory(data.totalGuariti + data.totalGuaritiDoppia + data.totalGuaritiBooster);\n        setHealedData(data.healedData);\n        setCategoryMapField(\"guariti\");\n        setCategoryMapData(data.healedMapData);\n    };\n\n    const fillMapCategoryArea = ({ region, maxValue, field }) => {\n        let scaleOp = 0;\n        if (region.code === categorySelectedRegion) {\n          scaleOp = 1;\n        } else if (!categorySelectedRegion) {\n          scaleOp = max([region[field] / maxValue, 0.1]);\n        } else {\n          const valueToFill = region[field] / (2 * maxValue);\n          scaleOp = max([valueToFill, 0.1]);\n        }\n        return `rgba(0,102,204,${scaleOp}) `;\n    };\n\n    const handleMapCategoryClick = (region) => {\n        if (selectedCodeAge) {\n          resetFilter();\n        }\n\n        if (categorySelectedRegion === region.code) {\n          resetFilter();\n        } else {\n          setCategorySelectedRegion(region.code);\n          setCategorySelectedRegionDescr(region.area);\n          setHealedData(data.healedRegionData[region.code]);\n\n          var val = 0;\n          for(let row of data.healedRegionData[region.code]) {\n            val += row.Totale;\n          }\n          setTotalByCategory(val);\n        }\n    };\n\n    const handleCategoryBarChartClick = (cat) => {\n        if (categorySelectedRegion) {\n          resetFilter();\n        }\n\n        const ageCode = cat.data.label.toLowerCase().replaceAll(' ', '_');\n\n        if (selectedCodeAge === ageCode) {\n          resetFilter();\n        } else {\n          setSelectedCodeAge(ageCode);\n          setCategoryMapField(ageCode);\n          setTotalByCategory(data.healedTotal[cat.data.label]);\n        }\n    };\n\n    return (\n        <div className=\"row\">\n            {/* Box Title */}\n            <div className=\"col-12 d-flex justify-content-center align-items-center section-title mx-2\">\n                <div className=\"text-center\">\n                    <h3 class=\"mb-0\">Platea guariti</h3>\n                </div>\n            </div>\n            {/* // Box Title */}\n\n            <div className=\"col-12 col-md-12 m-3\">\n                {/* Total Box - Mobile Layout */}\n                <div className=\"d-lg-none bg-box box-mobile m-3\">\n                    <div className=\"text-white\">\n                        <div className=\"d-flex justify-content-center pt-5\">\n                            <h5>Totale guariti</h5>\n                        </div>\n                        <div className=\"d-flex justify-content-center\">\n                            <p className=\"box-numbers\">\n                                {totalByCategory && totalByCategory.toLocaleString(\"it\")}\n                            </p>\n                        </div>\n                        <div className=\"col-12 d-flex justify-content-end pb-2\">\n                            <img alt=\"reset-plot2\" src=\"reset_white.png\" onClick={resetFilter} height=\"36px\"/>\n                        </div>\n                    </div>\n                </div>\n                {/* // Total Box - Mobile Layout */}\n\n                {/* Total Box - Desktop Layout */}\n                <div className=\"col-4 col-md-4 d-none d-lg-block\">\n                    <div className=\"bg-box box-card box-left\">\n                        <div className=\"text-white\">\n                            <div className=\"d-flex justify-content-start pt-3 pl-5\">\n                                <h5>Totale guariti</h5>\n                            </div>\n                            <div className=\"d-flex justify-content-start pl-5\">\n                                <p className=\"box-numbers\">\n                                    {totalByCategory && totalByCategory.toLocaleString(\"it\")}\n                                </p>\n                            </div>\n                            <div className=\"col-12 d-flex justify-content-end pb-2\">\n                                <img alt=\"Reset\" src=\"reset_white.png\" onClick={resetFilter} height=\"36px\"/>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                {/* // Total Box - Desktop Layout */}\n            </div>\n            <div className=\"col-12 col-md-6\">\n\n                {/* Graph */}\n                <HealedHStackedBarChart\n                    width={+350}\n                    height={+300}\n                    property={{ xprop: \"label\", yprop: \"total\" }}\n                    handleRectClick={handleCategoryBarChartClick}\n                    regionSelected={categorySelectedRegionDescr}\n                    selectedCodeAge={selectedCodeAge}\n                    colors={healedColor}\n                    keys={healedKeys}\n                    labels={keyValueHealed}\n                    data={healedData}\n                />\n                {/* // Graph */}\n\n                 {/* Legend */}\n                 <div className=\"row mb-4 ml-4\">\n                    {healed.map((itemVal, index) => {\n                        return (\n                            <div className=\"row\" key={itemVal}>\n                                <div className=\"circle\" style={{ backgroundColor: healedColor[index] }}></div>\n                                <div className=\"legend-dark mr-4\">{itemVal}</div>\n                            </div>\n                        )\n                    })}\n                </div>\n                {/* // Legend */}\n\n            </div>\n            <div className=\"col-12 col-md-6 my-0 py-0\">\n                {/* Map Graph */}\n                <MapArea\n                    fillMapDeliveryArea={fillMapCategoryArea}\n                    summary={categoryMapData}\n                    handleMapDeliveryClick={handleMapCategoryClick}\n                    fillBy={categoryMapField}\n                    percentage={false}\n                    tooltip={(r) => {\n                            var region = null;\n                            for(let row of categoryMapData) {\n                                if (row.code === r.code) {\n                                    region = row;\n                                }\n                            }\n\n                            return (\n                                r.area +\n                                \" \" +\n                                (region && region[categoryMapField] && \"(\" + region[categoryMapField].toLocaleString(\"it\") + \")\")\n                            )\n                        }\n                    }\n                    className=\"ml-5\"\n                />\n                {/* // Map Graph */}\n\n                <p className=\"text-center\">*Seleziona la Regione/Provincia Autonoma per visualizzare il dettaglio.</p>\n            </div>\n        </div>\n    )\n};","import { React, useEffect, useRef } from \"react\";\nimport * as d3 from \"d3\";\n\nexport const StackedBarChart = ({\n  height,\n  width,\n  data,\n  keys,\n  colors,\n  selectedFrom,\n  selectedTo,\n  property,\n  title,\n  ytitle\n  }) => {\n\n  const myRef = useRef();\n  const divRef = useRef();\n\n  useEffect(() => {\n      doExit();\n      draw();\n      // eslint-disable-next-line\n  }, [data, keys, selectedFrom, selectedTo]);\n\n\n  const responsivefy = (svg) => {\n    // Container is the DOM element, svg is appended.\n    // Then we measure the container and find its\n    // aspect ratio.\n    const container = d3.select(svg.node().parentNode),\n      width = parseInt(svg.style(\"width\"), 10),\n      height = parseInt(svg.style(\"height\"), 10),\n      aspect = width / height;\n\n    // Add viewBox attribute to set the value to initial size\n    // add preserveAspectRatio attribute to specify how to scale\n    // and call resize so that svg resizes on page load\n    svg\n      .attr(\"viewBox\", `0 0 ${width} ${height+10}`)\n      .attr(\"preserveAspectRatio\", \"xMinYMid\")\n      .call(resize);\n\n    d3.select(window).on(\"resize.\" + container.attr(\"id\"), resize);\n\n    function resize() {\n      const targetWidth = parseInt(container.style(\"width\"));\n      svg.attr(\"width\", targetWidth);\n      svg.attr(\"height\", Math.round(targetWidth / aspect));\n    }\n  };\n\n  function doExit() {\n    d3.select(divRef.current).selectAll(\"svg\").remove();\n  }\n\n  const draw = () => {\n\n    const dataset = d3.stack().keys(keys)(data.slice(selectedFrom, selectedTo));\n\n    // append element\n    const svg = d3\n      .select(divRef.current)\n      .append(\"svg\")\n      .style('margin-bottom', 15)\n      .attr(\"width\", width)\n      .attr(\"height\", height);\n    const margin = { y: 50, x: 50 };\n\n    // axis\n    const xScale = d3.scaleBand().padding(0.2);\n    const yScale = d3.scaleLinear().domain([0, d3.max(data.slice(selectedFrom, selectedTo), function(d) { return d.total; })]);\n    yScale.range([height, 0]);\n    xScale.range([0, width]).domain(data.slice(selectedFrom, selectedTo).map((d) => d.label));\n\n    svg\n      .attr(\"width\", width + 2 * margin.x)\n      .attr(\"height\", height + 2 * margin.y)\n      .call(responsivefy) // Call responsivefy to make the chart responsive\n      .attr(\"id\", \"svg-stack-bar\");\n\n    svg\n      .append(\"text\")\n      .attr(\"x\", width / 2 + margin.x)\n      .attr(\"y\", margin.y / 2)\n      .attr(\"class\", \"title\")\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"transform\", \"rotate(90)\")\n      .attr(title);\n\n    svg\n      .append(\"text\")\n      .attr(\"x\", -(height / 2) - margin.y)\n      .attr(\"y\", margin.x / 2.4)\n      .attr(\"transform\", \"rotate(-90)\")\n      .attr(\"class\", \"title\")\n      .text(ytitle);\n\n\n    const chart = svg\n      .append(\"g\")\n      .attr(\"transform\", `translate(${margin.x},${margin.y})`);\n\n    chart\n      .append(\"g\")\n      .attr(\"class\", \"axis\")\n      .attr(\"transform\", `translate(0,${height})`)\n      .style('font-size', 16)\n      .call(d3.axisBottom(xScale))\n        .selectAll(\"text\") // x axis label rotation\n            .attr(\"y\", -5)\n            .attr(\"x\", 11)\n            .attr(\"transform\", \"rotate(90)\")\n            .style(\"text-anchor\", \"start\");\n\n\n    const tooltip = d3\n      .select('body')\n      .append('div')\n      .attr('class', 'd3-tooltip')\n      .style('position', 'absolute')\n      .style('z-index', '10')\n      .style('display', 'none')\n      .style('padding', '10px')\n      .style('background', 'rgba(0,0,0,0.8)')\n      .style('border-radius', '4px')\n      .style('color', '#fff');\n\n    const path = chart.selectAll().data(dataset);\n\n    path\n      .enter()\n      .append(\"g\")\n      .attr(\"fill\", function(d) {\n        return colors[d.key];\n      })\n      .attr(\"supply\", function(d) {\n        return d.key;\n      })\n      .selectAll(\"rect\")\n      .data(function(d) {\n        return d;\n      })\n      .enter().append(\"rect\")\n      .attr(\"x\", function(d) {\n        return xScale(d.data.label);\n      })\n      .attr(\"y\", function(d) {\n        return yScale(d[1]);\n      })\n      .attr(\"height\", function(d) {\n        return yScale(d[0]) - yScale(d[1]);\n      })\n      .attr(\"width\", xScale.bandwidth())\n      .on('mouseover', function (d, i) {\n        d3.select(this).transition().attr('fill', '#0BD9D3');\n      })\n      .on('mousemove', function (event, d) {\n        tooltip\n            .style('top', event.pageY - 10 + 'px')\n            .style('left', event.pageX + 10 + 'px');\n        tooltip\n          .html(\n            `<div style=\"text-align: center\"><b>${d3.select(this.parentNode).attr(\"supply\")}</b></div>\n            <div>${(d[1] - d[0]).toLocaleString('it')} su ${d.data.total.toLocaleString(\"it\")}</div>\n            <div style=\"text-align: center; font-size: 12px\">dal ${(d.data.labelfrom)} al ${d.data.labelto}</div>`\n          )\n          .style('display', null);\n      })\n      .on('mouseout', function (d) {\n          tooltip.html(``).style('display', 'none');\n          d3.select(this).transition().attr('fill', colors[d.key]);\n      });\n    path.exit().remove();\n  };\n\n  return (\n    <div ref={divRef} className=\"chart svg-container\">\n      <svg ref={myRef} className=\"svg-content-responsive\"></svg>\n    </div>\n  );\n};\n","import React, { useEffect, useState } from \"react\";\nimport { Range, getTrackBackground } from \"react-range\";\n\nexport const RangeWeek = ({\n    from,\n    to,\n    min,\n    max,\n    changeFrom,\n    changeTo\n  }) => {\n\n  const [values, setValues] = useState([0, 1]);\n\n  const STEP = 1;\n\n  useEffect(() => {\n    setValues([from, to])\n  },[from, to, min, max]);\n\n\n  return (\n    <div className=\"col-12\"\n      style={{\n        display: 'flex',\n        justifyContent: 'center',\n        flexWrap: 'wrap',\n        backgroundColor: 'rgb(15, 53, 89)'\n      }}\n    >\n      <Range\n        draggableTrack\n        values={values}\n        step={STEP}\n        min={min}\n        max={max}\n        rtl={false}\n        onChange={(values) => {\n          if (values[0] !== values[1]) {\n            setValues(values);\n            changeFrom(values[0]);\n            changeTo(values[1]);\n          }\n\n        }}\n        renderTrack={({ props, children }) => (\n          <div\n            onMouseDown={props.onMouseDown}\n            onTouchStart={props.onTouchStart}\n            style={{\n              ...props.style,\n              height: '36px',\n              display: 'flex',\n              width: '100%',\n              marginRight: 10,\n              marginLeft: 10\n            }}\n          >\n            <div\n              ref={props.ref}\n              style={{\n                height: '5px',\n                width: '100%',\n                borderRadius: '4px',\n                background: getTrackBackground({\n                  values,\n                  colors: ['#ccc', 'black', '#ccc'],\n                  min: min,\n                  max: max,\n                  rtl: false\n                }),\n                alignSelf: 'center'\n              }}\n            >\n              {children}\n            </div>\n          </div>\n        )}\n        renderThumb={({ props, isDragged }) => (\n          <div\n            {...props}\n            style={{\n              ...props.style,\n              height: '20px',\n              width: '20px',\n              borderRadius: '50%',\n              backgroundColor: '#ccc',\n              display: 'flex',\n              justifyContent: 'center',\n              alignItems: 'center',\n              boxShadow: '0px 2px 6px #AAA'\n            }}\n          >\n          </div>\n        )}\n      />\n    </div>\n  );\n};\n","import React, { useEffect, useState } from \"react\";\nimport { isEmpty } from \"lodash\";\nimport { StackedBarChart } from \"./../components/StackedBarChart\";\nimport { RangeWeek } from \"./../components/RangeWeek\";\n\nexport const Weeks = ({ data }) => {\n    const [suppliersColor, setSuppliersColor] = useState([]);\n    const [suppliers, setSuppliers] = useState([]);\n    const [suppliersWeek, setSuppliersWeek] = useState([]);\n    const [from, setFrom] = useState(0);\n    const [to, setTo] = useState(0);\n\n    useEffect(() => {\n        if (!isEmpty(data)) {\n            setSuppliersColor(data.suppliersColor);\n            setSuppliers(data.suppliers);\n            setSuppliersWeek(data.suppliersWeek);\n\n            setTo(data.suppliersWeek.length);\n            if (data.suppliersWeek.length >= 9) {\n                setFrom(data.suppliersWeek.length - 9);\n            }\n        }\n      }, [data]);\n\n    return (\n        <div className=\"row\">\n            {/* Title Box - Desktop View */}\n            <div className=\"col-12 d-flex justify-content-center align-items-center section-title px-5 mx-2\">\n                <h3>Andamento settimanale delle somministrazioni</h3>\n            </div>\n            {/* // Title Box - Desktop View */}\n            <div className=\"row col-12 m-2 p-2 \">\n                <div className=\"col-12 col-md-6 align-items-end testo-info-campania d-none d-sm-none d-md-flex d-lg-flex\"></div>\n                <div className=\"col-12 col-md-6  position-relative\">\n\n                    <div className=\"bg-gradient-bar\"></div>\n                </div>\n                <div className=\"col-12 col-md-4\" style={{ backgroundColor: \"#17324D\" }}>\n                    <div className=\"p-2 position-relative\">\n                        <div className=\"p-4\">\n                            <img src=\"group_person.svg\" alt=\"Logo\" className=\"img-fluid\" />\n                        </div>\n                        <div className=\"mt-4 ml-3\">\n                            {suppliers.map((supply, index) => {\n                                return (\n                                    <div className=\"row\" key={supply}>\n                                        <div className=\"circle\" style={{ backgroundColor: suppliersColor[supply] }}></div>\n                                        <span className=\"legend\">{supply}</span>\n                                    </div>\n                                )\n                            })}\n                        </div>\n                    </div>\n                </div>\n                <div className=\"col-12 col-md-8 text-white\"  style={{ backgroundColor: \"#17324D\" }}>\n                <div className=\"text-white text-center mt-3 \">*Passa con il mouse sulle barre del grafico per visualizzare i dati della settimana</div>\n                    <StackedBarChart\n                        title=\"\"\n                        xtitle=\"Somministrazione settimanale\"\n                        ytitle=\"\"\n                        width={780}\n                        height={350}\n                        marginBottom={10}\n                        property={{ xprop: \"label\", yprop: \"total\" }}\n\n                        colors={suppliersColor}\n                        keys={suppliers}\n                        data={suppliersWeek}\n                        selectedFrom={from}\n                        selectedTo={to}\n                    />\n                </div>\n                {suppliersWeek.length > 0 && (\n                    <RangeWeek min={0} max={suppliersWeek.length} from={from} to={to} changeFrom={(value) => setFrom(value)} changeTo={(value) => setTo(value)}  />\n                )}\n            </div>\n                <div>*Fai scorrere i selettori per aumentare o diminuire le settimane da visualizzare</div>\n        </div>\n    )\n};","import React, { useEffect, useState } from \"react\";\n\nexport const Databox = ({ data }) => {\n    const [totalePrimaDose, setTotalePrimaDose] = useState(''); // Prima Dose\n    const [percentualePrimaDosePopolazione, setPercentualePrimaDosePopolazione] = useState(''); // Percentuale Prima Dose\n\n    const [totalePersoneVaccinate, setTotalePersoneVaccinate] = useState(''); // Completamento ciclo vaccinale\n    const [totalePersoneVaccinatePopolazione, setTotalePersoneVaccinatePopolazione] = useState(''); // Percentuale Completamento ciclo vaccinale\n\n    const [totaleDoseAddizionaleBooster, setTotaleDoseAddizionaleBooster] = useState(''); // Dose aggiuntiva/booster\n    const [percentualeDoseAddizionaleBooster, setPercentualeDoseAddizionaleBooster] = useState(''); // Percentuale Dose aggiuntiva/booster\n\n    const [totaleDoseImmunocompromessi, setTotaleDoseImmunocompromessi] = useState(''); // Dose immunocompromessi\n    const [percentualeDoseImmunocompromessi, setPercentualeDoseImmunocompromessi] = useState(''); // Percentuale Dose immunocompromessi\n\n    const [totalePersoneSecondBooster, setTotalePersoneSecondBooster] = useState(''); // Dose seconda booster\n    const [percentualePersoneSecondBooster, setPercentualePersoneSecondBooster] = useState(''); // Percentuale Dose seconda booster\n\n    const [totalePersoneGuarite, setTotalePersoneGuarite] = useState(''); // Guariti\n    const [totalePersoneGuaritePopolazione, setTotalePersoneGuaritePopolazione] = useState(''); // Percentuale Guariti\n\n    const [totalePersoneGuariteDoppiaDose, setTotalePersoneGuariteDoppiaDose] = useState(''); // Guariti con doppia dose\n    const [totalePersoneGuaritePopolazioneDoppiaDose, setTotalePersoneGuaritePopolazioneDoppiaDose] = useState(''); // Percentuale Guariti con doppia dose\n\n    const [totaleAlmenoUnaGuariti, setTotaleAlmenoUnaGuariti] = useState(''); // Prima Dose + Guariti\n    const [percentualeAlmenoUnaGuariti, setPercentualeAlmenoUnaGuariti] = useState(''); // Percentuale Prima Dose + Guariti\n\n    const [totaleDoseAddizionaleGuaritiDoppiaDose, setTotaleDoseAddizionaleGuaritiDoppiaDose] = useState(''); // Booster + Guariti doppia dose\n    const [percentualeDoseAddizionaleGuaritiDoppiaDose, setPercentualeDoseAddizionaleGuaritiDoppiaDose] = useState(''); // Percentuale Booster + Guariti doppia dose\n\n    const [totaleGuaritiDopoDoseBooster, setTotaleGuaritiDopoDoseBooster] = useState(''); // Guariti dopo dose booster\n    const [percentualeGuaritiDopoDoseBooster, setPercentualeGuaritiDopoDoseBooster] = useState(''); // Percentuale Guariti dopo dose booster\n\n    const [totaleBooster, setTotaleBooster] = useState(''); // Totale booster\n    const [percentualeTotaleBooster, setPercentualeTotaleBooster] = useState(''); // Percentuale Totale booster\n\n    const [totalePrimaDoseBaby, setTotalePrimaDoseBaby] = useState(''); // Prima Dose Baby\n    const [percentualePrimaDosePopolazioneBaby, setPercentualePrimaDosePopolazioneBaby] = useState(''); // Percentuale Prima Dose Baby\n\n    const [totalePersoneVaccinateBaby, setTotalePersoneVaccinateBaby] = useState(''); // Completamento ciclo vaccinale Baby\n    const [totalePersoneVaccinatePopolazioneBaby, setTotalePersoneVaccinatePopolazioneBaby] = useState(''); // Percentuale Completamento ciclo vaccinale Baby\n\n    const [totalePersoneGuariteBaby, setTotalePersoneGuariteBaby] = useState(''); // Guariti Baby\n    const [totalePersoneGuaritePopolazioneBaby, setTotalePersoneGuaritePopolazioneBaby] = useState(''); // Percentuale Guariti Baby\n\n    const [totalePrimaDoseConGuaritiBaby, setTotalePrimaDoseConGuaritiBaby] = useState(''); // Prima Dose Baby + Guariti Baby\n    const [percentualeTotalePrimaDoseConGuaritiBaby, setPercentualeTotalePrimaDoseConGuaritiBaby] = useState(''); // Percentuale Prima Dose Baby + Guariti Baby\n\n    useEffect(() => {\n\n        // Prima Dose\n        let prima = (data?.totalDoses?.prima_dose + data?.totalDoses?.pregressa_infezione);\n        if (!isNaN(prima)) {\n            setTotalePrimaDose(format(prima));\n            setPercentualePrimaDosePopolazione(format(prima / data?.totalPlatea * 100, true));\n\n            //Prima Dose + Guariti\n            setTotaleAlmenoUnaGuariti(format((prima + data?.totalGuariti)));\n            setPercentualeAlmenoUnaGuariti(format((prima + data?.totalGuariti) / data?.totalPlatea * 100, true));\n        }\n\n        // Completamento ciclo vaccinale\n        let tot = (data?.totalDoses?.seconda_dose + data?.totalDoses?.prima_dose_janssen + data?.totalDoses?.pregressa_infezione);\n        if (!isNaN(tot)) {\n            setTotalePersoneVaccinate(format(tot));\n            setTotalePersoneVaccinatePopolazione(format(tot / data?.totalPlatea * 100, true));\n        }\n\n        // Dose aggiuntiva/booster\n        setTotaleDoseAddizionaleBooster(data?.totalDoses?.dose_addizionale_booster);\n        setPercentualeDoseAddizionaleBooster(format(data?.totalDoses?.dose_addizionale_booster / data?.totalPlateaDoseAddizionaleBooster * 100, true));\n\n        // Dose immunocompromessi\n        setTotaleDoseImmunocompromessi(format(data?.totalDoses?.dose_immunocompromessi));\n        setPercentualeDoseImmunocompromessi(format(data?.totalDoses?.dose_immunocompromessi / data?.totalPlateaDoseImmunocompromessi * 100, true));\n\n        // Dose second booster\n        setTotalePersoneSecondBooster(format(data?.totalDoses?.dose_second_booster));\n        setPercentualePersoneSecondBooster(format(data?.totalDoses?.dose_second_booster / data?.totalPlateaDoseSecondBooster * 100, true));\n\n        // Guariti\n        setTotalePersoneGuarite(format(data?.totalGuariti));\n        setTotalePersoneGuaritePopolazione(format(data?.totalGuariti / data?.totalPlatea * 100, true));\n\n        // Guariti con doppia dose\n        setTotalePersoneGuariteDoppiaDose(data?.totalGuaritiDoppia);\n        setTotalePersoneGuaritePopolazioneDoppiaDose(format(data?.totalGuaritiDoppia/ data?.totalPlateaDoseAddizionaleBooster * 100, true));\n\n        // Dose aggiuntiva/booster + Guariti con doppia dose\n        setTotaleDoseAddizionaleGuaritiDoppiaDose(format(data?.totalGuaritiDoppia + data?.totalDoses?.dose_addizionale_booster));\n        setPercentualeDoseAddizionaleGuaritiDoppiaDose(format((data?.totalGuaritiDoppia + data?.totalDoses?.dose_addizionale_booster) / data?.totalPlateaDoseAddizionaleBooster * 100, true));\n\n        // Guariti dopo prima dose booster\n        setTotaleGuaritiDopoDoseBooster(format(data?.totalGuaritiBoosterNotBaby));\n        setPercentualeGuaritiDopoDoseBooster(format(data?.totalGuaritiBoosterNotBaby / data?.totalPlateaDoseSecondBooster * 100, true));\n\n        // Totale booster\n        setTotaleBooster(format(data?.totalDoses?.dose_second_booster + data?.totalGuaritiBoosterNotBaby));\n        setPercentualeTotaleBooster(format((data?.totalDoses?.dose_second_booster + data?.totalGuaritiBoosterNotBaby) / data?.totalPlateaDoseSecondBooster * 100, true));\n\n        // Prima Dose Baby\n        let primaBaby = (data?.totalDoses?.prima_dose_baby + data?.totalDoses?.pregressa_infezione_baby);\n        if (!isNaN(primaBaby)) {\n            setTotalePrimaDoseBaby(format(primaBaby));\n            setPercentualePrimaDosePopolazioneBaby(format(primaBaby / data?.totalPlateaBaby * 100, true));\n        }\n\n        // Completamento ciclo vaccinale Baby\n        let totBaby = (data?.totalDoses?.seconda_dose_baby + data?.totalDoses?.prima_dose_janssen_baby + data?.totalDoses?.pregressa_infezione_baby);\n        if (!isNaN(totBaby)) {\n            setTotalePersoneVaccinateBaby(format(totBaby));\n            setTotalePersoneVaccinatePopolazioneBaby(format(totBaby / data?.totalPlateaBaby * 100, true));\n        }\n\n        // Guariti Baby\n        setTotalePersoneGuariteBaby(format(data?.totalGuaritiBaby));\n        setTotalePersoneGuaritePopolazioneBaby(format(data?.totalGuaritiBaby / data?.totalPlateaBaby * 100, true));\n\n        // Prima Dose + Guariti Baby\n        setTotalePrimaDoseConGuaritiBaby(format(primaBaby + data?.totalGuaritiBaby));\n        setPercentualeTotalePrimaDoseConGuaritiBaby(format((primaBaby + data?.totalGuaritiBaby) / data?.totalPlateaBaby * 100, true));\n    }, [data]);\n\n    function format(data, digit = false) {\n        if (digit) {\n            return data?.toLocaleString('it', {minimumFractionDigits: 2, maximumFractionDigits: 2});\n        }\n        return data?.toLocaleString('it');\n    }\n\n    return (\n        <div className=\"p-3 mb-5\">\n\n            <div className=\"col-12 d-flex justify-content-center align-items-center p-3 section-title small\">\n                <div className=\"mb-2\" >\n                    <h3 className=\"text-center\">Ciclo Vaccinale Primario</h3>\n                </div>\n            </div>\n\n            <div className=\"row bg-box p-2 mb-4\">\n                <div className=\"col-md-4 col-sm-12\">\n                    <div className=\"box-card p-2\">\n                        <div className=\"p-1\">\n                            <div className=\"align-items-center justify-content-center text-center mb-4\">\n                                <h5 className=\"mt-2\">Con almeno una dose</h5>\n                                <div className=\"box-numbers\">{totalePrimaDose}</div>\n                                <div className=\"box-text\">{percentualePrimaDosePopolazione} % della popolazione over 12</div>\n                                <div className=\"box-label\" >(persone con almeno una somministrazione)</div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"col-md-4 col-sm-12\">\n                    <div className=\"box-card p-2\">\n                        <div className=\"p-1\">\n                            <div className=\"align-items-center justify-content-center text-center mb-4\">\n                                <h5 className=\"mt-2\">Ciclo vaccinale</h5>\n                                <div className=\"box-numbers\">{totalePersoneVaccinate}</div>\n                                <div className=\"box-text\">{totalePersoneVaccinatePopolazione} % della popolazione over 12</div>\n                                <div className=\"box-label\" >(persone che hanno completato il ciclo vaccinale)</div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"col-md-4 col-sm-12\">\n                    <div className=\"box-card p-2\">\n                        <div className=\"p-1\">\n                            <div className=\"align-items-center justify-content-center text-center mb-4\">\n                                <h5 className=\"mt-2\">Guariti</h5>\n                                <div className=\"box-numbers\">{totalePersoneGuarite}</div>\n                                <div className=\"box-text\">{totalePersoneGuaritePopolazione} % della popolazione over 12</div>\n                                <div className=\"box-label\" >guarita da al massimo 6 mesi senza alcuna somministrazione</div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"col-md-12 col-sm-12\">\n                    <div className=\"box-card p-2\">\n                        <div className=\"p-1\">\n                            <div className=\"align-items-center justify-content-center text-center mb-4\">\n                                <h5 className=\"mt-2\">Totale</h5>\n                                <div className=\"box-numbers\">{totaleAlmenoUnaGuariti}</div>\n                                <div className=\"box-text\">{percentualeAlmenoUnaGuariti} % della popolazione over 12</div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n\n            <div className=\"col-12 d-flex justify-content-center align-items-center p-3 section-title small\">\n                <div className=\"mb-2\" >\n                    <h3 className=\"text-center\">Dose Addizionale/Booster</h3>\n                </div>\n            </div>\n\n            <div className=\"row bg-box p-2 mb-4\">\n                <div className=\"col-md-6 col-sm-12\">\n                    <div className=\"box-card p-2\">\n                        <div className=\"p-1\">\n                            <div className=\"align-items-center justify-content-center text-center\">\n                                <h5 className=\"mt-2\">Dose addizionale/richiamo (booster)</h5>\n                                <div className=\"box-numbers\">{totaleDoseAddizionaleBooster?.toLocaleString('it')}</div>\n                                <div className=\"box-text\">{percentualeDoseAddizionaleBooster} % della popolazione potenzialmente oggetto di<br />dose addizionale o booster che ha ultimato il ciclo vaccinale<br />da almeno 4 mesi</div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"col-md-6 col-sm-12\">\n                    <div className=\"box-card p-2\">\n                        <div className=\"p-1\">\n                            <div className=\"align-items-center justify-content-center text-center\">\n                                <h5 className=\"mt-2\">Guariti post 2ª dose/unica dose</h5>\n                                <div className=\"box-numbers\">{totalePersoneGuariteDoppiaDose?.toLocaleString('it')}</div>\n                                <div className=\"box-text\">{totalePersoneGuaritePopolazioneDoppiaDose} % della popolazione potenzialmente oggetto di<br />dose addizionale o booster guarita post 2ª dose/unica dose<br />da al massimo 4 mesi</div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"col-md-12 col-sm-12\">\n                    <div className=\"box-card p-2\">\n                        <div className=\"p-1\">\n                            <div className=\"align-items-center justify-content-center text-center mb-4\">\n                                <h5 className=\"mt-2\">Totale</h5>\n                                <div className=\"box-numbers\">{totaleDoseAddizionaleGuaritiDoppiaDose}</div>\n                                <div className=\"box-text\">{percentualeDoseAddizionaleGuaritiDoppiaDose} % della platea dose booster</div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div className=\"col-12 d-flex justify-content-center align-items-center p-3 section-title small\">\n                <div className=\"mb-2\" >\n                    <h3 className=\"text-center\">Seconda dose booster</h3>\n                </div>\n            </div>\n\n            <div className=\"row bg-box p-2 mb-4\">\n                <div className=\"col-md-4 col-sm-12\">\n                    <div className=\"box-card p-2\">\n                        <div className=\"p-1\">\n                            <div className=\"text-white\">\n                                <div className=\"align-items-center justify-content-center text-center\">\n                                    <h5 className=\"mt-2\">Booster immunocompromessi</h5>\n                                    <div className=\"box-numbers\">{totaleDoseImmunocompromessi}</div>\n                                    <div className=\"box-text\">{percentualeDoseImmunocompromessi} % della popolazione immunocompromessa potenzialmente oggetto di dose booster che ha ultimato il ciclo vaccinale con richiamo<br />da almeno 4 mesi</div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"col-md-4 col-sm-12\">\n                    <div className=\"box-card p-2\">\n                        <div className=\"p-1\">\n                            <div className=\"align-items-center justify-content-center text-center\">\n                                <h5 className=\"mt-2\">2ª dose booster<br /><br></br></h5>\n                                <div className=\"box-numbers\">{totalePersoneSecondBooster?.toLocaleString('it')}</div>\n                                <div className=\"box-text\">{percentualePersoneSecondBooster} % della popolazione oggetto di seconda dose booster cha ha ricevuto la dose booster<br />da almeno 4 mesi</div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"col-md-4 col-sm-12\">\n                    <div className=\"box-card p-2\">\n                        <div className=\"p-1\">\n                            <div className=\"align-items-center justify-content-center text-center\">\n                                <h5 className=\"mt-2\">Guariti post<br />1ª dose booster</h5>\n                                <div className=\"box-numbers\">{totaleGuaritiDopoDoseBooster?.toLocaleString('it')}</div>\n                                <div className=\"box-text\">{percentualeGuaritiDopoDoseBooster} % della popolazione potenzialmente oggetto di 2ª dose booster guarita post 1ª dose booster da<br />al massimo 6 mesi</div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"col-md-12 col-sm-12\">\n                    <div className=\"box-card\">\n                        <div className=\"p-1\">\n                            <div className=\"align-items-center justify-content-center text-center mb-4\">\n                                <h5 className=\"mt-2\">Totale</h5>\n                                <div className=\"box-numbers\">{totaleBooster}</div>\n                                <div className=\"box-text\">{percentualeTotaleBooster} % della platea 2ª dose booster</div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div className=\"col-12 d-flex justify-content-center align-items-center p-3 section-title small\">\n                <div className=\"mb-2\" >\n                    <h3 className=\"text-center\">Somministrazione platea 5-11 anni</h3>\n                </div>\n            </div>\n\n\n            <div className=\"row bg-box mb-4\">\n                <div className=\"col-md-4 col-sm-12\">\n                    <div className=\"box-card p-2\">\n                        <div className=\"p-1\">\n                            <div className=\"align-items-center justify-content-center text-center mb-4\">\n                                <h5 className=\"mt-2\">Con almeno una dose</h5>\n                                <div className=\"box-numbers\">{totalePrimaDoseBaby}</div>\n                                <div className=\"box-text\">{percentualePrimaDosePopolazioneBaby} % della popolazione 5-11</div>\n                                <div className=\"box-label\" >(persone con almeno una somministrazione)</div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"col-md-4 col-sm-12\">\n                    <div className=\"box-card p-2\">\n                        <div className=\"p-1\">\n                            <div className=\"align-items-center justify-content-center text-center mb-4\">\n                                <h5 className=\"mt-2\">Ciclo vaccinale</h5>\n                                <div className=\"box-numbers\">{totalePersoneVaccinateBaby}</div>\n                                <div className=\"box-text\">{totalePersoneVaccinatePopolazioneBaby} % della popolazione 5-11</div>\n                                <div className=\"box-label\" >(persone che hanno completato il ciclo vaccinale)</div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"col-md-4 col-sm-12\">\n                    <div className=\"box-card p-2\">\n                        <div className=\"p-1\">\n                            <div className=\"align-items-center justify-content-center text-center mb-4\">\n                                <h5 className=\"mt-2\">Guariti</h5>\n                                <div className=\"box-numbers\">{totalePersoneGuariteBaby}</div>\n                                <div className=\"box-text\">{totalePersoneGuaritePopolazioneBaby} % della popolazione 5-11</div>\n                                <div className=\"box-label\" >guarita da al massimo 6 mesi senza alcuna somministrazione</div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"col-md-12 col-sm-12\">\n                    <div className=\"box-card\">\n                        <div className=\"p-1\">\n                            <div className=\"align-items-center justify-content-center text-center mb-4\">\n                                <h5 className=\"mt-2\">Totale</h5>\n                                <div className=\"box-numbers\">{totalePrimaDoseConGuaritiBaby}</div>\n                                <div className=\"box-text\">{percentualeTotalePrimaDoseConGuaritiBaby} % della popolazione 5-11</div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};","import { React, useEffect, useRef } from \"react\";\nimport * as d3 from \"d3\";\nimport { maxX } from \"../utils\";\n\nexport const BarChartSupplier = (props) => {\n\n  const width = +props.width, //hack to get int\n    height = +props.height;\n  const myRef = useRef();\n  const divRef = useRef();\n\n  useEffect(() => {\n    doExit();\n    draw();\n    // eslint-disable-next-line\n  }, [props]);\n\n\n  const responsivefy = (svg) => {\n    // Container is the DOM element, svg is appended.\n    // Then we measure the container and find its\n    // aspect ratio.\n    const container = d3.select(svg.node().parentNode),\n      width = parseInt(svg.style(\"width\"), 10),\n      height = parseInt(svg.style(\"height\"), 10),\n      aspect = width / height;\n\n    // Add viewBox attribute to set the value to initial size\n    // add preserveAspectRatio attribute to specify how to scale\n    // and call resize so that svg resizes on page load\n    svg\n      .attr(\"viewBox\", `0 0 ${width} ${height}`)\n      .attr(\"preserveAspectRatio\", \"xMinYMid\")\n      .call(resize);\n\n    d3.select(window).on(\"resize.\" + container.attr(\"id\"), resize);\n\n    function resize() {\n      const targetWidth = parseInt(container.style(\"width\"));\n      svg.attr(\"width\", targetWidth);\n      svg.attr(\"height\", Math.round(targetWidth / aspect));\n    }\n  };\n\n  function doExit() {\n    d3.select(divRef.current).selectAll(\"svg\").remove();\n  }\n\n  const draw = () => {\n    const data = props?.data || [];\n    const maxScale = data?.reduce(maxX(props.property.yprop), 0) || 0;\n    // append element\n    const svg = d3\n      .select(divRef.current)\n      .append(\"svg\")\n      .attr(\"width\", width)\n      .attr(\"height\", height);\n    const margin = { y: 50, x: 20 };\n\n    // axis\n    const xScale = d3.scaleBand().padding(0.5);\n    const yScale = d3.scaleLinear().domain([0, maxScale]); //max scale should be dynamic\n    yScale.range([height, 0]);\n    xScale.range([0, width]).domain(data.map((d) => d[props.property.xprop]));\n\n    svg\n      .attr(\"width\", width + 2 * margin.x)\n      .attr(\"height\", height + 2 * margin.y)\n      .call(responsivefy) // Call responsivefy to make the chart responsive\n      .attr(\"id\", \"svg-bar\");\n\n    const chart = svg\n      .append(\"g\")\n      .attr(\"transform\", `translate(${margin.x},${margin.y})`);\n\n    chart\n      .append(\"g\")\n      .attr(\"class\", \"axis-dark\")\n      .attr(\"transform\", `translate(0,${height})`)\n      .style('font-size', 16)\n      .call(d3.axisBottom(xScale));\n\n    const path = chart.selectAll().data(data);\n\n    path\n      .enter()\n      .append(\"rect\").on('click', (e, d) => {\n        props.handleBarChartClick(d);\n      })\n      .attr('id', (d) => d?.fornitore)\n      .attr('opacity', (d) => {\n        let opac = props.selected?.fornitore === d?.fornitore ? 1 : !props.selected ? 1 : 0.1;\n        return opac;\n      })\n      .attr(\"class\", \"bg-bar\")\n      .attr(\"x\", (d) => +xScale(d[props.property.xprop]))\n      .attr(\"y\", (d) => yScale(d[props.property.yprop]))\n      .attr(\"height\", (d) => height - yScale(d[props.property.yprop]))\n      .attr(\"width\", xScale.bandwidth())\n      .append(\"title\")\n      .attr(\"x\", (d) => xScale(d[props.property.xprop]))\n      .attr(\"y\", (d) => yScale(d[props.property.yprop]))\n      .text((d) => `Fornitore ${d[props.property.xprop]} totale: ${d[props.property.yprop]}`)\n\n    path\n      .enter()\n      .append(\"text\")\n      .attr(\"class\", \"bartext-dark\")\n      .attr(\"text-anchor\", \"center\")\n      .attr(\"fill\", \"black\")\n      .attr(\"x\", (d) => xScale(d[props.property.xprop]) -5 )\n      .attr(\"y\", (d) =>\n        height - yScale(d[props.property.yprop]) >= 0\n          ? yScale(d[props.property.yprop]) - 10\n          : yScale(d[props.property.yprop])\n      )\n      .text((d) => d[props.property.yprop]?.toLocaleString('it'));\n\n    path.exit().remove();\n  };\n\n  return (\n    <div ref={divRef}>\n      {/* <div className=\"w-100 h-100 d-flex justify-content-start pr-5\">\n        <img src=\"logo.png\" width=\"35\" height=\"35\" alt=\"Logo\" />\n        <h5 className=\"pl-3 pl-sm-1\">Distribuzione vaccini per fornitore</h5>\n      </div> */}\n      <svg ref={myRef}></svg>\n    </div>\n  );\n};\n","import { React, useEffect, useState } from \"react\";\nimport { isEmpty } from \"lodash\";\nimport { simulateClick } from './../utils';\nimport { BarChartSupplier } from \"./BarChartsSupplier\";\n\nexport const Supplier = (data) => {\n    const [selectedLocationCategoryMap, setSelectedLocationCategoryMap] = useState(null);\n    const [selectedSupplier, setelectedSupplier] = useState(null);\n    const [deliveryBarChartData, setdeliveryBarChartData] = useState([]);\n    const [totalSuplier, setTotalSuplier] = useState(0);\n\n    const resetFilter = () => {\n        setdeliveryBarChartData(data?.data?.allDosesSupplier);\n        setTotalSuplier(data?.data?.totalSuplier);\n        setelectedSupplier(null);\n        setSelectedLocationCategoryMap(null);\n        setTotalSuplier(data?.data?.totalSuplier);\n    }\n\n    useEffect(() => {\n        if (!isEmpty(data)) {\n            let tmp = data?.data?.allDosesSupplier;\n            if (tmp) {\n                tmp.map(val => {\n                    if (val.fornitore.includes(\"Vaxzevria\")) {\n                        val.fornitore = \"Vaxzevria\";\n                    }\n\n                    return val;\n                })\n            }\n            setdeliveryBarChartData(tmp);\n            setTotalSuplier(data?.data?.totalSuplier);\n        }\n    }, [data]);\n\n    const handleDeliveryBarChartClick = (bar) => {\n        if (selectedSupplier === bar) {\n            resetFilter();\n        } else if (selectedLocationCategoryMap) {\n            resetFilter();\n            simulateClick(bar.fornitore);\n        } else {\n            handleRectClick(bar);\n            setelectedSupplier(bar);\n            setTotalSuplier(bar?.totale);\n        }\n    }\n\n    const handleRectClick = (currentRect) => {\n        setelectedSupplier(currentRect)\n    }\n\n    return (\n        <div className=\"row\">\n            <div className=\"col-12 col-md-12 mt-4\">\n                {/* Box Title */}\n            <div className=\"col-12 d-flex justify-content-center align-items-center section-title mx-2\">\n                <div className=\"text-center\">\n                    <h3>Distribuzione vaccini per fornitore</h3>\n                </div>\n            </div>\n            {/* // Box Title */}\n\n            <div className=\"col-12 col-md-12 m-3\">\n                {/* Total Box - Mobile Layout */}\n                <div className=\"d-lg-none bg-box box-mobile m-3\">\n                        <div className=\"text-white\">\n                            <div className=\"d-flex justify-content-center pt-5\">\n                                <h5>Totale vaccini distribuiti</h5>\n                            </div>\n                            <div className=\"d-flex justify-content-center\">\n                                <p className=\"box-numbers\">{totalSuplier?.toLocaleString('it')}</p>\n                            </div>\n                            <div className=\"col-12 d-flex justify-content-end pb-2\">\n                                <img alt=\"reset-plot2\" src=\"reset_white.png\" onClick={resetFilter} height=\"36px\"/>\n                            </div>\n                        </div>\n                    </div>\n                    {/* // Total Box - Mobile Layout */}\n\n                    {/* Total Box - Desktop Layout */}\n                    <div className=\"offset-md-8 col-md-4 d-none d-lg-block\">\n                        <div className=\"bg-box box-card box-right\">\n                            <div className=\"text-white\">\n                                <div className=\"d-flex justify-content-start pt-3 pl-5\">\n                                    <h5>Totale vaccini distribuiti</h5>\n                                </div>\n                                <div className=\"d-flex justify-content-start pl-5\">\n                                    <p className=\"box-numbers\" >{totalSuplier?.toLocaleString('it')}</p>\n                                </div>\n                                <div className=\"col-12 d-flex justify-content-end pb-2\">\n                                    <img alt=\"Reset\" src=\"reset_white.png\" onClick={resetFilter} height=\"36px\"/>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    {/* // Total Box - Desktop Layout */}\n                </div>\n            </div>\n\n            {/* Supplier BarChart */}\n            <div className=\"col-12 col-md-7 w-100 h-100 pb-5\">\n                <BarChartSupplier\n                    width=\"850\"\n                    handleBarChartClick={handleDeliveryBarChartClick}\n                    height=\"350\"\n                    selected={selectedSupplier}\n                    property={{ xprop: \"fornitore\", yprop: \"totale\" }}\n                    data={deliveryBarChartData}\n                />\n            </div>\n            {/* Supplier BarChart */}\n        </div>\n    );\n};","import { React, useEffect } from \"react\";\nimport $ from \"jquery\";\nimport DataTable from \"datatables.net\";\nimport \"datatables.net-bs4/css/dataTables.bootstrap4.min.css\";\n\n$.DataTable = DataTable;\nconst columns = [\n    { title: \"Regione\", data: \"area\" },\n    { title: \"Punto di somministrazione\", data: \"denominazione_struttura\" },\n    { title: \"Tipologia\", data: \"tipologia\" }\n];\n\nexport const LocationsTable = (props) => {\n\n    useEffect(() => {\n        const {setLocationCount} = props;\n\n        const table = $(\"#datatable-locations\")\n        .find(\"table\")\n        .DataTable({\n            dom:\n            \"<'row'<'col-sm-12 col-md-6'l><'col-sm-12 col-md-6'>>\" +\n            \"<'row'<'col-sm-12'tr>>\" +\n            \"<'row'<'col-sm-12 col-md-5'i><'col-sm-12 col-md-7'p>>\",\n            paging: false,\n            columnDefs: [{\n                \"targets\": [1,2],\n                \"searchable\": false\n            }],\n            searching: true,\n            destroy: true,\n            bLengthChange: false,\n            info: false,\n            scrollY: '550px',\n            scrollCollapse: true,\n            data: props.summary?.locations || [],\n            columns,\n        });\n\n        if (props?.selected) {\n            table.search(props.selected).draw();\n        } else {\n            table.search(\" \").draw();\n        }\n\n        setLocationCount(table.rows( {search:'applied'} ).count()/2)\n    });\n\n    return (\n\n        <div id=\"datatable-locations\">\n            <table className=\"display compact\" cellSpacing=\"0\" width=\"100%\"/>\n        </div>\n    );\n};\n","import React, { useEffect, useState } from \"react\";\nimport { isEmpty, max } from \"lodash\";\nimport { MapArea } from \"./../components/MapArea\";\nimport { LocationsTable } from \"./../components/LocationsTable\";\n\nconst TextBoxTotal = ({locationCount}) => (\n\n    <>\n\n        <div className=\"d-flex pl-5 pt-3\">\n            <h5>Totale punti somministrazione</h5>\n        </div>\n        <div className=\"d-flex pl-5\">\n            <p className=\"box-numbers\">{locationCount}</p>\n        </div>\n\n    </>\n)\n\nconst TextBoxMap = () => (\n    <div className=\"w-100 h-100 d-flex justify-content-start pr-5\">\n        <h5 className=\"pl-3 pl-sm-1\">Principali punti di<br /> somministrazione <br /> per regione</h5>\n    </div>\n)\n\nexport const Locations = ({ data }) => {\n    const [summary, setSummary] = useState({});\n    const [selectedLocation, setSelectedLocation] = useState(\"\");\n    const [locationCount, setLocationCount] = useState(0);\n\n    useEffect(() => {\n        if (!isEmpty(data)) {\n            setSummary(data);\n        }\n    }, [data]);\n\n    const resetFilter = () => {\n        setSelectedLocation(\"\");\n        setLocationCount(0);\n    };\n\n    const fillMapDeliveryArea = ({ region, maxValue, field }) => {\n        let scaleOp = 0;\n            if (region.area === selectedLocation) {\n                scaleOp = 1;\n            } else if (!selectedLocation) {\n                scaleOp = max([region[field] / maxValue, 0.1]);\n            } else {\n                const valueToFill = region[field] / (2 * maxValue);\n                scaleOp = max([valueToFill, 0.1]);\n            }\n        return `rgba(23,50,77,${scaleOp})`;\n    };\n\n    const handleClick = (region) => {\n        if (selectedLocation === region.area) {\n            setSelectedLocation(null);\n        } else {\n            setSelectedLocation(region.area);\n        }\n    };\n\n    return (\n        <div className=\"row\">\n            {/* Box Title */}\n            <div className=\"col-12 d-flex justify-content-center align-items-center section-title mx-2\">\n                <div className=\"text-center\">\n                    <h3>Principali punti di somministrazione</h3>\n                    <p>(Sono inclusi i punti di somministrazione ospedalieri e territoriali;<br />\n                        non sono inclusi i punti di somministrazione temporanei)</p>\n                </div>\n            </div>\n            {/* Box Title */}\n\n            <div className=\"col-12 col-md-12 m-3\">\n                {/* Total Box - Mobile View */}\n                <div className=\"d-lg-none bg-box box-mobile m-3\">\n                        <div className=\"text-white\">\n                            <TextBoxTotal locationCount={locationCount}/>\n                        </div>\n                    <div className=\"col-12 d-flex justify-content-end pb-2\">\n                        <img alt=\"reset-plot\" src=\"reset_white.png\" onClick={resetFilter} height=\"36\" />\n                    </div>\n                </div>\n                {/* // Total Box - Mobile View */}\n\n                {/* Total Box - Desktop View */}\n                <div className=\"col-4 col-md-4 d-none d-lg-block\">\n                <div className=\"bg-box box-card box-left\">\n                        <div className=\"text-white\">\n\n                        <TextBoxTotal locationCount={locationCount}/>\n\n                            <div className=\"col-12 d-flex justify-content-end pb-2\">\n                                <img alt=\"reset-white\" src=\"reset_white.png\" onClick={resetFilter} height=\"36px\" />\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                {/* // Total Box - Desktop View */}\n            </div>\n            <div className=\"col-12 col-md-6\">\n                {/* Map Legend - Mobile View */}\n                <div className=\"p-2 d-lg-none text-center\">Principali Punti di Somministrazione per Regione</div>\n\n                {/* Map Legend - Desktop View */}\n                <div className=\"d-none d-lg-block map-legend\" ><TextBoxMap/></div>\n\n                {/* Map Graph */}\n                <div className=\"mt-5\">\n                <MapArea\n                    fillMapDeliveryArea={fillMapDeliveryArea}\n                    summary={data.locationsByRegion}\n                    handleMapDeliveryClick={handleClick}\n                    tooltip={(r) => r.area + \": \" + (r.locations && r.locations.toLocaleString(\"it\")) }\n                    fillBy=\"locations\"\n                    className=\"ml-5 w-100 h-100\"\n                />\n                </div>\n                {/* // Map Graph */}\n            </div>\n            {/* Data Table */}\n            <div className=\"col-12 col-md-6 pl-3\">\n                <LocationsTable\n                    summary={{ ...summary }}\n                    selected={selectedLocation}\n                    className=\"mr-5 h-100\"\n                    setLocationCount={setLocationCount}\n                />\n            </div>\n            {/* // Data Table */}\n        </div>\n    );\n};\n","import { useState, useEffect } from 'react';\nimport { HeaderBar } from \"./components/HeaderBar\";\nimport { FooterBar } from \"./components/FooterBar\";\nimport { Total } from \"./components/Total\";\nimport { loadData } from \"./loadData\";\nimport { Deliveries } from \"./containers/deliveries\";\nimport { AgeDoses } from \"./containers/agedoses\";\nimport { Healed } from \"./containers/healed\";\nimport { Weeks } from \"./containers/weeks\";\nimport { Databox } from \"./containers/databox\";\nimport { Supplier } from './components/Supplier';\nimport { hideLoader } from \"./utils\";\nimport \"./App.css\";\nimport { Locations } from \"./containers/locations\";\n\n\nfunction App() {\n    const [summary, setSummary] = useState({});\n\n    useEffect(() => {\n        loadData().then((d) => {\n        hideLoader();\n        setSummary(d);\n        });\n    }, []);\n\n    return (\n        <div>\n            <HeaderBar />\n            <div className=\"container\">\n                <Total summary={{ ...summary }} />          {/* Totale Somministrazioni */}\n                <Databox data={summary} />                  {/* Box riepilogo dati */}\n                <Deliveries data={summary} />               {/* Tabella Distribuzione Dosi */}\n                <Healed data={summary} />                   {/* Grafico guariti */}\n                <Weeks data={summary} />                    {/* Grafico Andamento Settimanale delle Somministrazioni */}\n                <AgeDoses data={summary} />                 {/* Grafico Somministrazioni per fascia d'età */}\n                <Supplier data={summary} />                 {/* Grafico Distribuzione Vaccini per Fornitore */}\n                <Locations data={summary} />                {/* Tabella Principali Punti di Somministrazione */}\n            </div>\n            <FooterBar />\n        </div>\n    );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}