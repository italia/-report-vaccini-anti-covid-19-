{"version":3,"sources":["components/HeaderBar.jsx","components/FooterBar.jsx","components/Total.jsx","utils.js","loadData.js","naturalSortAlgorithm.js","components/Table.jsx","components/MapArea.jsx","containers/deliveries.jsx","components/AgeHStackedBarChart.jsx","containers/agedoses.jsx","components/BarChart.jsx","containers/healed.jsx","components/StackedBarChart.jsx","components/RangeWeek.jsx","containers/weeks.jsx","components/BarChartsSupplier.jsx","components/Supplier.jsx","components/LocationsTable.jsx","containers/locations.jsx","App.jsx","reportWebVitals.js","index.js"],"names":["HeaderBar","className","style","backgroundColor","href","target","rel","src","height","alt","FooterBar","Total","props","summary","timestamp","moment","format","tot","toLocaleString","sumDoseX","y","acc","x","filterBy","z","replaceArea","filterByArea","area","areaMapping","code","ABR","BAS","CAL","CAM","EMR","FVG","LAZ","LIG","LOM","MAR","MOL","PAB","PAT","PIE","PUG","SAR","SIC","TOS","UMB","VDA","VEN","baseURL","obj","retobj","key","inverse","sommVaxSummaryURL","sommVaxDetailURL","vaxSummaryURL","vaxLocationsURL","anagraficaSummaryURL","lastUpdateURL","supplierDoses","plateaURL","plateaDoseAggURL","plateaDoseBoosterURL","guaritiURL","elaborate","data","dataSommVaxSummary","filter","d","reduce","dataSupplier","dataSupplierDoses","dataSomeVaxDetail","dataSommVaxDetail","map","deliverySummary","dataVaxSummary","dataVaxSomLatest","totalDoses","prima_dose","_","sum","e","seconda_dose","pregressa_infezione","dose_aggiuntiva","dose_booster","prima_dose_janssen","fornitore","vax_somministrati","data_consegna","substr","_e","numero_dosi","groups","groupBy","allDosesSupplier","Object","keys","k","groupByKey","group","totale","allDoses","totalSuplier","allDosesMapByArea","doesesByArea","groupByArea","dose","totalDosesByArea","dosi_somministrate","deliveredByArea","locations","dataVaxLocations","maxNumberOfLocations","locationsByRegion","items","length","value","totalDeliverySummary","details","head","byAge","rows","age","sumBy","r","sesso_maschile","sesso_femminile","percentage","dosi_consegnate","fascia_anagrafica","percentuale_somministrazione","toFixed","totalDeliverySummaryByAge","i","toString","trim","rowsData","regionsDoses","dosesAgesData","dosesAgesRegionData","agesTmp","row","hasOwnProperty","ageDosesTotal","sort","reverse","entry","label","dataPlatea","platea","parseInt","totale_popolazione","push","totalGuariti","dataGuariti","totale_guariti","totalPlatea","secondDoses","secondDoseTmp","rowAge","keyAge","secondDosesData","region","plateaRegionAges","popolazione","secondDosesPlateaData","tmpElem","subItem","includes","arrayTmp","healed","healedPlateaData","healedData","haeledAgesTmp","haeledAgesData","regionHaeledAgesData","regionHaeledAgesDataTmp","entryHealedAges","entryRegionHealed","spectrum","suppliersColor","suppliers","weeksMappingOptimation","index","suppliersWeek","date","Date","Moment","from","labelfrom","to","getTime","labelto","total","week","data_somministrazione","totalPlateaDoseAgg","dataPlateaDoseAgg","totalPlateaDoseBooster","dataPlateaDoseBooster","dataLastUpdate","ultimo_aggiornamento","dosesAges","dosesAgesColor","loadData","a","Promise","all","fetch","resSommVaxSummary","resSommVaxDetail","resVaxSummary","resProfileSummaryURL","resVaxLocations","resLastUpdate","resSupplierDoses","resPlatea","resPlateaDoseAgg","resPlateaDoseBooster","resGuariti","json","dataProfileSummary","naturalSort","b","html","re","sre","dre","hre","ore","htmre","replace","xN","split","yN","xD","match","parse","yD","cLoc","numS","Math","max","oFxNcL","parseFloat","oFyNcL","isNaN","jQuery","dataTableExt","oSort","toLowerCase","$","DataTable","columns","title","Table","deliveryTableData","useEffect","find","append","dom","paging","searching","destroy","language","decimal","thousands","columnDefs","targets","width","type","render","Number","footerCallback","start","end","display","api","intVal","totalDelivery","column","search","totalVaccines","totalPercentage","footer","id","cellSpacing","paddingBottom","MapArea","handleMapDeliveryClick","fillMapDeliveryArea","fillBy","tooltip","useState","geographies","setGeographies","maxValue","setMaxValue","maxBy","projection","d3","center","rotate","parallels","scale","translate","res","topojson","objects","regions","features","fetchData","marginTop","reg_name","properties","fill","field","stroke","strokeWidth","onClick","Deliveries","deliveryMapData","setDeliveryMapData","setDeliveryTableData","deliverySelectedRegion","setDeliverySelectedRegion","setTotalDelivery","selectedAge","setSelectedAge","isEmpty","resetFilter","data-toggle","position","top","right","scaleOp","valueToFill","deliveryTableFilteredData","AgeHStackedBarChart","handleRectClick","colors","selectedCodeAge","regionSelected","myRef","useRef","divRef","current","selectAll","remove","draw","responsivefy","svg","container","node","parentNode","aspect","resize","targetWidth","attr","round","call","window","on","dataset","margin","xScale","domain","yScale","padding","range","chart","path","enter","ageCode","replaceAll","bandwidth","this","transition","event","regione","pageY","pageX","perc","exit","ref","AgeDoses","setdosesAgesColor","setdosesAges","setDosesAgesData","categoryMapData","setCategoryMapData","dosesMapData","setDosesMapData","categoryMapField","setCategoryMapField","categorySelectedRegion","setCategorySelectedRegion","categorySelectedRegionDescr","setCategorySelectedRegionDescr","setSelectedCodeAge","totalByCategory","setTotalByCategory","textAlign","background","left","zIndex","xtitle","property","xprop","yprop","cat","marginBottom","marginLeft","color","marginRight","overflow","BarChart","guariti","Healed","setTotalGuariti","healedMapData","setHealedMapData","setHaeledAgesData","selectedCodeRegion","setSelectedCodeRegion","ytitle","StackedBarChart","selectedFrom","selectedTo","slice","text","RangeWeek","min","changeFrom","changeTo","values","setValues","justifyContent","flexWrap","draggableTrack","step","rtl","onChange","renderTrack","children","onMouseDown","onTouchStart","borderRadius","getTrackBackground","alignSelf","renderThumb","isDragged","alignItems","boxShadow","Weeks","setSuppliersColor","setSuppliers","setSuppliersWeek","setFrom","setTo","supply","BarChartSupplier","maxScale","handleBarChartClick","selected","Supplier","selectedLocationCategoryMap","setSelectedLocationCategoryMap","selectedSupplier","setelectedSupplier","deliveryBarChartData","setdeliveryBarChartData","setTotalSuplier","currentRect","bar","document","getElementById","clickEvt","MouseEvent","dispatchEvent","simulateClick","LocationsTable","setLocationCount","table","bLengthChange","info","scrollY","scrollCollapse","count","TextBoxTotal","locationCount","TextBoxMap","Locations","setSummary","selectedLocation","setSelectedLocation","App","then","loading","hideLoader","totalePersoneVaccinate","totalePersoneVaccinatePopolazione","minimumFractionDigits","maximumFractionDigits","totaleDoseAggiuntivaBoosterVal","totaleDoseAggiuntivaBooster","percentualeDoseAggiuntivaBoosterPopolazione","prima","totalePrimaDose","percentualePrimaDosePopolazione","totalePersoneGuarite","totalePersoneGuaritePopolazione","totaleAlmenoUnaGuariti","percentualeAlmenoUnaGuariti","minHeight","fontWeight","fontSize","lineHeight","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.80e31aab.chunk.js","sourcesContent":["import React from \"react\";\nimport \"../App.css\";\nimport \"bootstrap-italia/dist/css/bootstrap-italia.min.css\";\nimport \"typeface-titillium-web\";\nimport \"typeface-roboto-mono\";\nimport \"typeface-lora\";\n\nexport const HeaderBar = () => {\n  return (\n    <>\n      {/* <Header small={false} theme=\"\" type=\"slim\">\n\n      </Header> */}\n      <div className=\"row m-0\" style={{ backgroundColor: '#0059b3' }}>\n        <div className=\"col-12 col-md-4 d-flex justify-content-md-center justify-content-sm-start logo-section pt-2 pb-2\">\n          <a href=\"http://www.governo.it\" className=\"text-decoration-none\" target=\"_blank\" rel=\"noreferrer\">\n            <img src=\"logo.svg\" height=\"4px\" alt=\"Logo\" className=\"logo pl-5 pr-2\" />\n          </a>\n          <p className=\"pt-sm-0\">\n            <a href=\"http://www.governo.it\" target=\"_blank\" className=\"text-decoration-none\" rel=\"noreferrer\">\n              Presidenza del Consiglio dei Ministri\n            </a>\n          </p>\n        </div>\n        <div className=\"col-12 col-md-4 d-flex justify-content-md-center justify-content-sm-start logo-section pr-sm-0 pt-2 pb-2\">\n          <a className=\"text-decoration-none\" href=\"http://www.governo.it/it/dipartimenti/commissario-straordinario-lemergenza-covid-19/15974\" target=\"_blank\" rel=\"noreferrer\">\n            <img src=\"logo.svg\" height=\"4px\" alt=\"Logo\" className=\"logo pl-5 pr-2\" />\n          </a>\n          <p className=\"pt-sm-0\">\n            <a className=\"text-decoration-none\" href=\"http://www.governo.it/it/dipartimenti/commissario-straordinario-lemergenza-covid-19/15974\" target=\"_blank\" rel=\"noreferrer\">\n              Commissario Straordinario Covid-19\n            </a>\n          </p>\n        </div>\n        <div className=\"col-12 col-md-4 d-flex justify-content-md-center justify-content-sm-start logo-section pt-2 pb-2 pr-sm-3\">\n          <a href=\" http://www.salute.gov.it/portale/home.html\" target=\"_blank\" rel=\"noreferrer\">\n            <img src=\"logo.svg\" height=\"4px\" alt=\"Logo\" className=\"logo pl-5 pr-2\" />\n          </a>\n          <p className=\"pt-sm-0\">\n            <a href=\"http://www.salute.gov.it/portale/home.html\" className=\"text-decoration-none\" target=\"_blank\" rel=\"noreferrer\">\n              Ministero della Salute\n              </a>\n          </p>\n\n        </div>\n        {/** TITLE + LOGO*/}\n        <div className=\"col-12 d-flex flex-column justify-content-center mainBanner\">\n          <div className=\"d-flex justify-content-center\">\n            <img src=\"Coccarda.svg\" alt=\"Logo\" height=\"150px\" className=\"main-logo\" />\n            <span className=\"pl-2 pt-5\">Report Vaccini Anti COVID-19</span>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n","import React from \"react\";\nimport \"../App.css\";\nimport \"bootstrap-italia/dist/css/bootstrap-italia.min.css\";\nimport \"typeface-titillium-web\";\nimport \"typeface-roboto-mono\";\nimport \"typeface-lora\";\n\nexport const FooterBar = () => {\n    return (\n        <>\n            {/* <Footer small={false} theme=\"\" type=\"slim\">\n\n            </Footer> */}\n            <div className=\"row m-0 p-2\" style={{ backgroundColor: '#17324d' }}>\n                <div className=\"col-12 col-md-4 d-flex justify-content-md-center justify-content-sm-start logo-section pt-2 pb-2\">\n                    <a href=\"http://www.governo.it\" className=\"text-decoration-none\" target=\"_blank\" rel=\"noreferrer\">\n                        <img src=\"logo.svg\" height=\"4px\" alt=\"Logo\" className=\"logo pl-5 pr-2\" />\n                    </a>\n                    <p className=\"pt-sm-0\">\n                        <a href=\"http://www.governo.it\" target=\"_blank\" className=\"text-decoration-none\" rel=\"noreferrer\">\n                            Presidenza del Consiglio dei Ministri\n                        </a>\n                    </p>\n                </div>\n                <div className=\"col-12 col-md-4 d-flex justify-content-md-center justify-content-sm-start logo-section pr-sm-0 pt-2 pb-2\">\n                    <a className=\"text-decoration-none\" href=\"http://www.governo.it/it/dipartimenti/commissario-straordinario-lemergenza-covid-19/15974\" target=\"_blank\" rel=\"noreferrer\">\n                        <img src=\"logo.svg\" height=\"4px\" alt=\"Logo\" className=\"logo pl-5 pr-2\" />\n                    </a>\n                    <p className=\"pt-sm-0\">\n                        <a className=\"text-decoration-none\" href=\"http://www.governo.it/it/dipartimenti/commissario-straordinario-lemergenza-covid-19/15974\" target=\"_blank\" rel=\"noreferrer\">\n                            Commissario Straordinario Covid-19\n                        </a>\n                    </p>\n                </div>\n                <div className=\"col-12 col-md-4 d-flex justify-content-md-center justify-content-sm-start logo-section pt-2 pb-2 pr-sm-3\">\n                    <a href=\" http://www.salute.gov.it/portale/home.html\" target=\"_blank\" rel=\"noreferrer\">\n                        <img src=\"logo.svg\" height=\"4px\" alt=\"Logo\" className=\"logo pl-5 pr-2\" />\n                    </a>\n                    <p className=\"pt-sm-0\">\n                        <a href=\"http://www.salute.gov.it/portale/home.html\" className=\"text-decoration-none\" target=\"_blank\" rel=\"noreferrer\">\n                            Ministero della Salute\n                        </a>\n                    </p>\n                </div>\n            </div>\n        </>\n    );\n};\n","import { React } from \"react\";\nimport moment from \"moment\";\n\nexport const Total = (props) => {\n    return (\n        <div className=\"h-100 w-100 mt-2 mb-3 max-width-total\">\n            <div className=\"timestamp mx-auto\">\n                <h6 className=\"text-center pb-4\">\n                    Report aggiornato al: {\" \"}\n                    {props.summary.timestamp && moment(props.summary.timestamp).format(\"DD-MM-YYYY HH:mm\")}\n                </h6>\n            </div>\n            <div className=\"d-flex flex-column justify-content-center\">\n                <div className=\"d-flex justify-content-center align-items-baseline\">\n                    <img src=\"meds.png\" alt=\"meds\" className=\"pl-2 pr-5\" />\n                    {\" \"}\n                    <h1 className=\"pl-2 mt-4 font-weight-light\">{props.summary.tot?.toLocaleString('it')}</h1>\n                </div>\n                <span className=\"border-top mb-2\"></span>\n                <div className=\"d-flex justify-content-center\">\n                    {\" \"}\n                    <h4 className=\"pl-2\">Totale somministrazioni</h4>\n                </div>\n            </div>\n        </div>\n    );\n};\n","import * as _ from 'lodash';\nexport const hideLoader = () => {\n  let loading = document.getElementById('loader-custom');\n  if (loading) loading.className = !loading.className.includes('d-none') ? loading.className + ' d-none' : loading.className;\n}\nexport const showLoader = () => {\n  let loading = document.getElementById('loader-custom');\n  if (loading) loading.className = loading.className.includes('d-none') ? loading.className.replace('d-none', '') : loading.className;\n}\nexport const sumDose = (acc, x) => acc + +x?.TML_DOSE_1 + +x?.TML_DOSE_2;\nexport const sumDoseXY = (y, z) => (acc, x) => acc + +x?.[y] + +x?.[z];\nexport const sumYear = (accumulator, currentValue) => accumulator + currentValue;\nexport const sumDoseX = (y) => (acc, x) => acc + +x?.[y];\nexport const maxX = (y) => (acc, x) => (x?.[y] > acc ? x?.[y] : acc);\nexport const age = [\"16-19\", \"20-29\", \"30-39\", \"40-49\", \"50-59\", \"60-69\", \"70-79\", \"80-89\", \"90+\"];\nexport const groupByAge = (array) => {\n  let _age;\n  if (Array.isArray(array) && array.length > 0) {\n    _age = age.map(el => {\n      let resMale = _.sum(array.filter(_el => _el.fascia_anagrafica.trim() === el).map(__el => __el.sesso_maschile));\n      let resFemale = _.sum(array.filter(_el => _el.fascia_anagrafica.trim() === el).map(__el => __el.sesso_femminile));\n      return { fascia_anagrafica: el, sesso_femminile: resFemale, sesso_maschile: resMale, totale: resMale + resFemale };\n    });\n  }\n  return _age;\n}\nexport const mapArrayByProp = (array, prop) => array.map((e) => e[prop]);\nexport const reduceSum = (array) => array.reduce(sumYear);\n\nexport const aggrBy = (p) => (acc, x) => {\n  let key = x[p];\n  if (!acc[key]) {\n    acc[key] = [];\n  }\n  acc[key].push(x);\n  return acc;\n};\nexport const filterBy = (y) => (z) => (x) => {\n  return x[y] === z;\n};\nexport const filterByArea = filterBy(\"area\");\nexport const filterByAreaITA = filterByArea(\"ITA\");\nexport const filterByAge = filterBy(\"TML_FASCIA_ETA\");\nexport const mapBy = (y) =>\n  Object.keys(y).map((x) => {\n    return { [x]: { sum: y[x].reduce(sumDose, 0) } };\n  });\nexport const mapByX = (y, z) =>\n  Object.keys(y).map((x) => {\n    return { [x]: y[x].reduce(sumDoseX(z), 0) };\n  });\nconst inverse = (obj) => {\n  let retobj = {};\n  for (const key in obj) {\n    retobj[obj[key]] = key;\n  }\n  return retobj;\n};\nexport const simulateClick = (id) => {\n  if (document.getElementById(id) && id) {\n    let clickEvt = new MouseEvent('click', {\n      'bubbles': true,\n      'cancelable': true\n    });\n    document.getElementById(id).dispatchEvent(clickEvt);\n  }\n}\nexport const replaceArea = (x) => ({ ...x, area: areaMapping[x.area], code: x.area });\nexport const areaMapping = {\n  ABR: \"Abruzzo\",\n  BAS: \"Basilicata\",\n  CAL: \"Calabria\",\n  CAM: \"Campania\",\n  EMR: \"Emilia-Romagna\",\n  FVG: \"Friuli-Venezia Giulia\",\n  LAZ: \"Lazio\",\n  LIG: \"Liguria\",\n  LOM: \"Lombardia\",\n  MAR: \"Marche\",\n  MOL: \"Molise\",\n  PAB: \"P.A. Bolzano\",\n  PAT: \"P.A. Trento\",\n  PIE: \"Piemonte\",\n  PUG: \"Puglia\",\n  SAR: \"Sardegna\",\n  SIC: \"Sicilia\",\n  TOS: \"Toscana\",\n  UMB: \"Umbria\",\n  VDA: \"Valle d'Aosta\",\n  VEN: \"Veneto\",\n};\nexport const areaMappingReverse = inverse(areaMapping);\n\n//\n//   const tot2 = data.reduce(sumDoseXY(\"TML_DOSE_1\", \"TML_DOSE_2\"), 0);\n//   const areasRAW = data.reduce(aggrBy(\"TML_AREA\"), {});\n//   const tot_m = data.reduce(sumDoseX(\"TML_SESSO_M\"), 0);\n//   const tot_f = data.reduce(sumDoseX(\"TML_SESSO_F\"), 0);\n//   const areas = mapBy(areasRAW);\n//   const fascia1619 = data.filter(filterByAge(\"16-19\"));\n//   const fascia2029 = data.filter(filterByAge(\"20-29\"));\n//   const totfascia1619 = fascia1619.reduce(sumDose, 0);\n//   const totfascia2029 = fascia2029.reduce(sumDose, 0);\n","import { sumDoseX, replaceArea, areaMapping } from \"./utils\";\nimport _ from \"lodash\";\nimport Moment from 'moment';\n\nconst baseURL = \"https://raw.githubusercontent.com/italia/covid19-opendata-vaccini/master/dati\";\n\nconst sommVaxSummaryURL     = `${baseURL}/somministrazioni-vaccini-summary-latest.json`;\nconst sommVaxDetailURL      = `${baseURL}/somministrazioni-vaccini-latest.json`;\nconst vaxSummaryURL         = `${baseURL}/vaccini-summary-latest.json`;\nconst vaxLocationsURL       = `${baseURL}/punti-somministrazione-tipologia.json`;\nconst anagraficaSummaryURL  = `${baseURL}/anagrafica-vaccini-summary-latest.json`;\nconst lastUpdateURL         = `${baseURL}/last-update-dataset.json`;\nconst supplierDoses         = `${baseURL}/consegne-vaccini-latest.json`;\nconst plateaURL             = `${baseURL}/platea.json`;\nconst plateaDoseAggURL      = `${baseURL}/platea-dose-aggiuntiva.json`;\nconst plateaDoseBoosterURL  = `${baseURL}/platea-dose-booster.json`;\nconst guaritiURL            = `${baseURL}/soggetti-guariti.json`;\n\nconst elaborate = (data) => {\n    const tot = data.dataSommVaxSummary.data\n        .filter((d) => d.area !== \"ITA\")\n        .reduce(sumDoseX(\"totale\"), 0);\n\n    // datatable and map\n    const dataSupplier      = data.dataSupplierDoses.data;\n    const dataSomeVaxDetail = data.dataSommVaxDetail.data.map(replaceArea);\n    const deliverySummary   = data.dataVaxSummary.data.map(replaceArea);\n\n    // categories and ages summary\n    const dataVaxSomLatest  = data?.dataSommVaxDetail?.data;\n\n    let totalDoses = {\n        prima_dose:           _.sum(dataVaxSomLatest?.map((e) => e?.prima_dose)),\n        seconda_dose:         _.sum(dataVaxSomLatest?.map((e) => e?.seconda_dose)),\n        pregressa_infezione:  _.sum(dataVaxSomLatest?.map((e) => e?.pregressa_infezione)),\n        dose_aggiuntiva:      _.sum(dataVaxSomLatest?.map((e) => e?.dose_aggiuntiva)),\n        dose_booster:         _.sum(dataVaxSomLatest?.map((e) => e?.dose_booster)),\n        prima_dose_janssen:   _.sum(\n                                dataVaxSomLatest\n                                ?.filter((e) => e.fornitore === \"Janssen\")\n                                .map((e) => e?.prima_dose)\n                              ),\n        vax_somministrati:    _.sum(\n                                dataSupplier\n                                ?.filter((e) => e?.data_consegna?.substr(0, 10) !== \"2020-12-27\")\n                                ?.map((_e) => _e?.numero_dosi)\n                                )?.toLocaleString(\"it\"),\n                              };\n\n    if (!totalDoses.pregressa_infezione) {\n        totalDoses.pregressa_infezione = 0;\n    }\n    if (!totalDoses.dose_aggiuntiva) {\n        totalDoses.dose_aggiuntiva = 0;\n    }\n    if (!totalDoses.dose_booster) {\n        totalDoses.dose_booster = 0;\n    }\n\n    const groups = _.groupBy(dataSupplier, \"fornitore\");\n    let allDosesSupplier = Object.keys(groups).map((k) => {\n        let groupByKey = groups[k].map((group) => group.numero_dosi);\n        let sumTotalDoses = _.sum(groupByKey);\n        return { totale: sumTotalDoses, fornitore: k, allDoses: groups[k] };\n    });\n\n    let totalSuplier = _.sum(allDosesSupplier.map((e) => e?.totale));\n\n    let allDosesMapByArea = _.groupBy(dataSupplier, \"area\");\n    let doesesByArea = Object.keys(allDosesMapByArea).map((area) => {\n        let groupByArea = allDosesMapByArea[area].map((dose) => dose.numero_dosi);\n        let totalDosesByArea = _.sum(groupByArea);\n        return { area: areaMapping[area], dosi_somministrate: totalDosesByArea };\n    });\n\n    const deliveredByArea = _.groupBy(deliverySummary, \"code\");\n\n    const locations = data.dataVaxLocations.data.map(replaceArea);\n\n    let maxNumberOfLocations = 0;\n\n    const locationsByRegion = _(data.dataVaxLocations.data.map(replaceArea))\n        .groupBy(\"area\")\n        .map((items, area) => {\n            maxNumberOfLocations =\n                maxNumberOfLocations > items.length\n                    ? maxNumberOfLocations\n                    : items.length;\n            return { area: area, locations: items.length };\n        })\n        .value();\n\n    const totalDeliverySummary = _(data.dataSommVaxDetail.data.map(replaceArea))\n        .groupBy(\"code\")\n        .map((items, code) => {\n            const details = _.head(deliveredByArea[code]);\n            return {\n                code: code,\n                area: _.head(items)?.area,\n                byAge: _(items)\n                    .groupBy(\"fascia_anagrafica\")\n                    .map((rows, age) => {\n                        const dosi_somministrate = _.sumBy(\n                            rows,\n                            (r) => r.sesso_maschile + r.sesso_femminile\n                        );\n                        const percentage = dosi_somministrate / (details.dosi_consegnate || 1);\n                        return {\n                            age: age,\n                            fascia_anagrafica: age,\n                            dosi_somministrate,\n                            dosi_consegnate: details.dosi_consegnate || 0,\n                            percentuale_somministrazione: +(percentage * 100).toFixed(1),\n                            area: _.head(items)?.area,\n                            totale: dosi_somministrate,\n                        };\n                    })\n                    .value(),\n                sesso_femminile: _.sumBy(items, \"sesso_femminile\"),\n                sesso_maschile: _.sumBy(items, \"sesso_maschile\"),\n                dosi_consegnate: details.dosi_consegnate || 0,\n                dosi_somministrate: details.dosi_somministrate || 0,\n                percentuale_somministrazione: details.percentuale_somministrazione || 0,\n            };\n        })\n        .value();\n\n    const totalDeliverySummaryByAge = _(data.dataSommVaxDetail.data.map(replaceArea))\n        .groupBy((i) => i[\"fascia_anagrafica\"].toString().trim())\n        .map((rows, age) => {\n            const details = _(rows)\n            .groupBy(\"code\")\n            .map((rowsData, code) => {\n                const dosi_somministrate = _.sumBy(\n                    rowsData,\n                    (r) => r.sesso_maschile + r.sesso_femminile\n                );\n                const percentage =\n                    dosi_somministrate /\n                    (_.head(deliveredByArea[code]).dosi_consegnate || 1);\n                return {\n                    age: age,\n                    dosi_somministrate,\n                    sesso_maschile: _.sumBy(rowsData, \"sesso_maschile\"),\n                    sesso_femminile: _.sumBy(rowsData, \"sesso_femminile\"),\n                    code: code,\n                    dosi_consegnate: _.head(deliveredByArea[code]).dosi_consegnate || 0,\n                    percentuale_somministrazione: +(percentage * 100).toFixed(1),\n                    area: _.head(rowsData).area,\n                    //details: rows\n                };\n            })\n            .value();\n\n            return {\n                age: age,\n                details: details,\n            };\n        })\n        .groupBy(\"age\")\n        .value();\n\n    /* ages stack bar chart */\n    let dosesAgesColor = {\n        \"Dose addizionale/booster\": \"#012675\",\n        \"2ª dose/unica dose\": \"#196ac6\",\n        \"1ª dose\": \"#519ae8\",\n        \"Totale fascia\": \"#b6d5f4\"\n    };\n\n    let regionsDoses = {};\n    let dosesAges = [\"Dose addizionale/booster\", \"2ª dose/unica dose\", \"1ª dose\", \"Totale fascia\"];\n    let dosesAgesData = [];\n    let dosesAgesRegionData = {};\n\n    let agesTmp = {};\n    for (let row of data.dataSommVaxDetail.data) {\n        var key = row.fascia_anagrafica;\n\n        if (key === '80-89' || key === '90+') {\n            key = 'over 80'\n        }\n\n        if (!agesTmp.hasOwnProperty(key)) {\n            agesTmp[key] = {\n                \"Totale fascia\": 0,\n                \"1ª dose\": 0,\n                \"2ª dose/unica dose\": 0,\n                \"Dose addizionale/booster\": 0\n            };\n        }\n\n        if (row.fornitore === 'Janssen') {\n            agesTmp[key][\"2ª dose/unica dose\"] += row.prima_dose;\n        }\n        else {\n            agesTmp[key][\"1ª dose\"] += row.prima_dose;\n            agesTmp[key][\"2ª dose/unica dose\"] += row.seconda_dose;\n        }\n        if (row.hasOwnProperty('pregressa_infezione')) {\n            agesTmp[key][\"2ª dose/unica dose\"] += row.pregressa_infezione;\n        }\n        if (row.hasOwnProperty('dose_aggiuntiva')) {\n            agesTmp[key][\"Dose addizionale/booster\"]+= row.dose_aggiuntiva;\n        }\n        if (row.hasOwnProperty('dose_booster')) {\n            agesTmp[key][\"Dose addizionale/booster\"]+= row.dose_booster;\n        }\n\n        /* regions data */\n        if (!regionsDoses.hasOwnProperty(row.area)) {\n            regionsDoses[row.area] = {};\n            regionsDoses[row.area][key] = {\n                \"Totale fascia\": 0,\n                \"1ª dose\": 0,\n                \"2ª dose/unica dose\": 0,\n                \"Dose addizionale/booster\": 0\n            };\n        }\n        else {\n            if (!regionsDoses[row.area].hasOwnProperty(key)) {\n                regionsDoses[row.area][key] = {\n                    \"Totale fascia\": 0,\n                    \"1ª dose\": 0,\n                    \"2ª dose/unica dose\": 0,\n                    \"Dose addizionale/booster\": 0\n                };\n            }\n        }\n        if (row.fornitore === 'Janssen') {\n            regionsDoses[row.area][key][\"2ª dose/unica dose\"] += row.prima_dose;\n        }\n        else {\n            regionsDoses[row.area][key][\"1ª dose\"] += row.prima_dose;\n            regionsDoses[row.area][key][\"2ª dose/unica dose\"] += row.seconda_dose;\n        }\n        if (row.hasOwnProperty('pregressa_infezione')) {\n            regionsDoses[row.area][key][\"2ª dose/unica dose\"] += row.pregressa_infezione;\n        }\n        if (row.hasOwnProperty('dose_aggiuntiva')) {\n            regionsDoses[row.area][key][\"Dose addizionale/booster\"] += row.dose_aggiuntiva;\n        }\n        if (row.hasOwnProperty('dose_booster')) {\n            regionsDoses[row.area][key][\"Dose addizionale/booster\"] += row.dose_booster;\n        }\n    }\n\n    let ageDosesTotal = {};\n\n    for (let row of Object.keys(agesTmp).sort().reverse()) {\n        var entry = {\n            label: \"Fascia \" + row\n        };\n        entry[\"Dose addizionale/booster\"] = agesTmp[row][\"Dose addizionale/booster\"];\n        entry[\"2ª dose/unica dose\"] = agesTmp[row][\"2ª dose/unica dose\"] - agesTmp[row][\"Dose addizionale/booster\"];\n        entry[\"1ª dose\"] = agesTmp[row][\"1ª dose\"] - agesTmp[row][\"2ª dose/unica dose\"];\n\n        entry[\"Totale platea\"] = 0;\n        for (let platea of data.dataPlatea.data) {\n            if (platea.fascia_anagrafica === row || (row === 'over 80' && platea.fascia_anagrafica === '80+')) {\n                entry[\"Totale platea\"] += parseInt(platea.totale_popolazione);\n            }\n        }\n\n        entry[\"Totale fascia\"] = entry[\"Totale platea\"] - entry[\"1ª dose\"] - entry[\"2ª dose/unica dose\"] - entry[\"Dose addizionale/booster\"];\n\n        ageDosesTotal[entry['label']] = entry[\"1ª dose\"] + entry[\"2ª dose/unica dose\"] + entry[\"Dose addizionale/booster\"];\n\n        dosesAgesData.push(entry);\n    }\n\n    let totalGuariti = 0;\n    for (let row of data.dataGuariti.data) {\n        totalGuariti += parseInt(row.totale_guariti);\n    }\n\n    let totalPlatea = 0;\n    for (let platea of data.dataPlatea.data) {\n        totalPlatea += parseInt(platea.totale_popolazione);\n    }\n\n    let secondDoses = {}\n    for (let row of data.dataSommVaxDetail.data) {\n        entry = {};\n        if (secondDoses.hasOwnProperty(row.area)) {\n            entry = secondDoses[row.area];\n        }\n\n        var secondDoseTmp = row.seconda_dose;\n        if (row.fornitore === 'Janssen') {\n            secondDoseTmp = row.prima_dose;\n        }\n        if (row.hasOwnProperty('pregressa_infezione')) {\n            secondDoseTmp += row.pregressa_infezione;\n        }\n\n        if (!secondDoses.hasOwnProperty(row.area)) {\n            entry = {\n                'code': row.area,\n                'area': areaMapping[row.area],\n                'somministrazioni': secondDoseTmp\n            };\n        }\n        else {\n            entry['somministrazioni'] += secondDoseTmp;\n        }\n\n        for (let rowAge of Object.keys(agesTmp)) {\n            let keyAge = rowAge === 'over 80' ? 'fascia_over_80' : ('fascia_' + rowAge);\n            if (entry.hasOwnProperty(keyAge)) {\n                entry[keyAge] += (rowAge === row.fascia_anagrafica || (rowAge === 'over 80' && (row.fascia_anagrafica === '90+' || row.fascia_anagrafica === '80-89'))) ? secondDoseTmp : 0;\n            }\n            else {\n                entry[keyAge] = (rowAge === row.fascia_anagrafica || (rowAge === 'over 80' && (row.fascia_anagrafica === '90+' || row.fascia_anagrafica === '80-89'))) ? secondDoseTmp : 0;\n            }\n        }\n        secondDoses[row.area] = entry;\n    }\n\n    let secondDosesData = []; /* Array delle regioni avente numero somministrazioni seconde dosi globale e per fasce d'età */\n    for (let region of Object.keys(secondDoses)) {\n        secondDosesData.push(secondDoses[region]);\n    }\n\n    let plateaRegionAges = {}; /* Oggetto che contiene i dati della Platea aggregati */\n    for (let platea of data.dataPlatea.data) {\n        if (!plateaRegionAges.hasOwnProperty(platea.area)) {\n            plateaRegionAges[platea.area] = {\n                'popolazione': 0\n            };\n        }\n\n        let keyAge = platea.fascia_anagrafica === '80+' ? 'fascia_over_80' : ('fascia_' + platea.fascia_anagrafica);\n        let popolazione = parseInt(platea.totale_popolazione);\n\n        plateaRegionAges[platea.area][keyAge] = {\n            'popolazione': 0\n        };\n\n        plateaRegionAges[platea.area][keyAge]['popolazione'] = popolazione; // per singola fascia\n        plateaRegionAges[platea.area]['popolazione'] += popolazione; // totale per regione\n    }\n\n    let secondDosesPlateaData = [];\n    for (let region of Object.keys(secondDoses)) {\n        let tmpElem = secondDoses[region];\n\n        let entry = {};\n        for (let subItem of Object.keys(tmpElem)) {\n            if (subItem.includes(\"fascia\")) {\n                entry[subItem] = tmpElem[subItem] / plateaRegionAges[region][subItem]['popolazione'] * 100;\n            }\n            else {\n                entry[subItem] = tmpElem[subItem];\n            }\n        }\n        entry['somministrazioni'] = entry['somministrazioni'] / plateaRegionAges[region]['popolazione'] * 100;\n\n        secondDosesPlateaData.push(entry);\n    }\n\n    for (let region of Object.keys(regionsDoses)) {\n        let arrayTmp = [];\n\n        for (let row of Object.keys(regionsDoses[region]).sort().reverse()) {\n            entry = {\n                label: \"Fascia \" + row\n            };\n            entry[\"Dose addizionale/booster\"] = regionsDoses[region][row][\"Dose addizionale/booster\"];\n            entry[\"2ª dose/unica dose\"] = regionsDoses[region][row][\"2ª dose/unica dose\"] - regionsDoses[region][row][\"Dose addizionale/booster\"];\n            entry[\"1ª dose\"] = regionsDoses[region][row][\"1ª dose\"] - regionsDoses[region][row][\"2ª dose/unica dose\"];\n\n            entry[\"Totale platea\"] = 0;\n            for (let platea of data.dataPlatea.data) {\n                if (platea.area === region && (platea.fascia_anagrafica === row || (row === 'over 80' && platea.fascia_anagrafica === '80+'))) {\n                    entry[\"Totale platea\"] += parseInt(platea.totale_popolazione);\n                }\n            }\n\n            entry[\"Totale fascia\"] = entry[\"Totale platea\"] - entry[\"1ª dose\"] - entry[\"2ª dose/unica dose\"] - entry[\"Dose addizionale/booster\"];\n\n            arrayTmp.push(entry);\n        }\n\n        dosesAgesRegionData[region] = arrayTmp;\n    }\n\n    // guariti\n    let healed = {}\n    for (let row of data.dataGuariti.data) {\n        entry = {};\n        if (healed.hasOwnProperty(row.area)) {\n            entry = healed[row.area];\n        }\n\n        if (!healed.hasOwnProperty(row.area)) {\n            entry = {\n                'code': row.area,\n                'area': areaMapping[row.area],\n                'guariti': row.totale_guariti\n            };\n        }\n        else {\n            entry['guariti'] += row.totale_guariti;\n        }\n\n        for (let rowAge of Object.keys(agesTmp)) {\n            let keyAge = rowAge === 'over 80' ? 'fascia_over_80' : ('fascia_' + rowAge);\n            if (entry.hasOwnProperty(keyAge)) {\n                entry[keyAge] += (rowAge === row.fascia_anagrafica || (rowAge === 'over 80' && (row.fascia_anagrafica === '80+' || row.fascia_anagrafica === '90+' || row.fascia_anagrafica === '80-89'))) ? row.totale_guariti : 0;\n            }\n            else {\n                entry[keyAge] = (rowAge === row.fascia_anagrafica || (rowAge === 'over 80' && (row.fascia_anagrafica === '80+' || row.fascia_anagrafica === '90+' || row.fascia_anagrafica === '80-89'))) ? row.totale_guariti : 0;\n            }\n        }\n        healed[row.area] = entry;\n    }\n\n    let healedPlateaData = [];\n    for (let region of Object.keys(healed)) {\n        let tmpElem = healed[region];\n\n        let entry = {};\n        for (let subItem of Object.keys(tmpElem)) {\n            entry[subItem] = tmpElem[subItem];\n        }\n\n        healedPlateaData.push(entry);\n    }\n\n    let healedData = [];\n    for (let region of Object.keys(healed)) {\n        healedData.push(healed[region]);\n    }\n\n    let haeledAgesTmp = {};\n    let haeledAgesData = [];\n    let regionHaeledAgesData = [];\n    let regionHaeledAgesDataTmp = {};\n\n    for (let row of data.dataGuariti.data) {\n        var keyAge = row.fascia_anagrafica;\n\n        if (keyAge === '80+' || keyAge === '80-89' || keyAge === '90+') {\n            keyAge = 'over 80'\n        }\n\n        if (!haeledAgesTmp.hasOwnProperty(keyAge)) {\n            haeledAgesTmp[keyAge] = row.totale_guariti;\n        }\n        else {\n            haeledAgesTmp[keyAge] += row.totale_guariti;\n        }\n\n        /* regions data */\n        if (!regionHaeledAgesDataTmp.hasOwnProperty(row.area)) {\n            regionHaeledAgesDataTmp[row.area] = {};\n            regionHaeledAgesDataTmp[row.area][keyAge] = row.totale_guariti;;\n        }\n        else {\n            if (!regionHaeledAgesDataTmp[row.area].hasOwnProperty(keyAge)) {\n                regionHaeledAgesDataTmp[row.area][keyAge] = row.totale_guariti;\n            }\n            else {\n                regionHaeledAgesDataTmp[row.area][keyAge] += row.totale_guariti;\n            }\n        }\n    }\n\n    for (let row of Object.keys(haeledAgesTmp).sort().reverse()) {\n        var entryHealedAges = {\n            label: \"Fascia \" + row\n        };\n        entryHealedAges[\"guariti\"] = haeledAgesTmp[row];\n\n        haeledAgesData.push(entryHealedAges);\n    }\n\n    for (let region of Object.keys(regionHaeledAgesDataTmp).sort().reverse()) {\n        for (let row of Object.keys(regionHaeledAgesDataTmp[region]).sort().reverse()) {\n            var entryRegionHealed = {\n                label: \"Fascia \" + row\n            };\n            entryRegionHealed[\"guariti\"] = regionHaeledAgesDataTmp[region][row];\n\n            if (!regionHaeledAgesData.hasOwnProperty(region)) {\n                regionHaeledAgesData[region] = [entryRegionHealed];\n            }\n            else {\n                regionHaeledAgesData[region].push(entryRegionHealed);\n            }\n        }\n    }\n\n    // suppliers\n    let spectrum = [\"#0f69c9\", \"#4d99eb\", \"#77b2f2\", \"#b5d4f5\", \"#d1e0f0\", \"#edf2f7\", \"#ffffff\"];\n    let suppliersColor = {};\n    let suppliers = [];\n\n    for (let row of data.dataSommVaxDetail.data) {\n        if (!suppliers.includes(row.fornitore)) {\n            suppliers.push(row.fornitore);\n            if ((suppliers.length - 1) < spectrum.length) {\n                suppliersColor[row.fornitore] = spectrum[suppliers.length-1];\n            }\n            else {\n                suppliersColor[row.fornitore] = \"#ffffff\";\n            }\n        }\n    }\n\n    // // availability -> supplied - used\n    // let dataAvailabilityTmp = {}; // global\n    // let dataAvailabilityRegionTmp = {}; // region\n\n    // for (let sup of suppliers) {\n    //     dataAvailabilityTmp[sup] = 0; // populate with suppliers\n    // }\n\n    // /* before calculate supplied */\n    // for (let row of data.dataSupplierDoses.data) {\n    //     let descrArea = areaMapping[row.area];\n\n    //     if (!dataAvailabilityRegionTmp.hasOwnProperty(descrArea)) { // region\n    //         dataAvailabilityRegionTmp[descrArea] = {};\n\n    //         for (let sup of suppliers) {\n    //             dataAvailabilityRegionTmp[descrArea][sup] = 0;\n    //         }\n    //     }\n\n    //     dataAvailabilityRegionTmp[descrArea][row.fornitore] += row.numero_dosi; // region\n    //     dataAvailabilityTmp[row.fornitore] += row.numero_dosi; // global\n    // }\n    // /* remove used */\n    // for (let row of data.dataSommVaxDetail.data) {\n    //     let descrArea = areaMapping[row.area];\n\n    //     dataAvailabilityRegionTmp[descrArea][row.fornitore] -= row.prima_dose; // region\n    //     dataAvailabilityRegionTmp[descrArea][row.fornitore] -= row.seconda_dose; // region\n\n    //     dataAvailabilityTmp[row.fornitore] -= row.prima_dose; // global\n    //     dataAvailabilityTmp[row.fornitore] -= row.seconda_dose; // global\n\n    //     if (row.hasOwnProperty('pregressa_infezione')) {\n    //         dataAvailabilityRegionTmp[descrArea][row.fornitore] -= row.pregressa_infezione; // region\n    //         dataAvailabilityTmp[row.fornitore] -= row.pregressa_infezione; // global\n    //     }\n    // }\n\n    // let dataAvailability = []; // chart without filter\n    // for (let sup of Object.keys(dataAvailabilityTmp)) {\n    //     let item = {\n    //         'totale'    : dataAvailabilityTmp[sup],\n    //         'fornitore' : sup\n    //     };\n\n    //     dataAvailability.push(item);\n    // }\n\n    // let totalAvailability = _.sum(dataAvailability.map((e) => e?.totale));\n    // // end\n\n    // all weeks\n    let weeksMappingOptimation = {};\n    var index = 0;\n\n    let suppliersWeek = [];\n    var date = new Date('2020-12-21'); // start date\n    while(true) {\n        let entry = {\n            label: Moment(date).format('DD/MM'),\n            from: Moment(date).format('YYYY-MM-DD'),\n            labelfrom: Moment(date).format('DD/MM'),\n            to: Moment(new Date(date.getTime() + 6 * 86400000)).format('YYYY-MM-DD'),\n            labelto: Moment(new Date(date.getTime() + 6 * 86400000)).format('DD/MM'),\n            total: 0\n        };\n\n        for (let supplier of suppliers) {\n            entry[supplier] = 0;\n        }\n\n        weeksMappingOptimation[Moment(date).format('YYYY-MM-DD')] = index;\n        weeksMappingOptimation[Moment(new Date(date.getTime() + 1 * 86400000)).format('YYYY-MM-DD')] = index;\n        weeksMappingOptimation[Moment(new Date(date.getTime() + 2 * 86400000)).format('YYYY-MM-DD')] = index;\n        weeksMappingOptimation[Moment(new Date(date.getTime() + 3 * 86400000)).format('YYYY-MM-DD')] = index;\n        weeksMappingOptimation[Moment(new Date(date.getTime() + 4 * 86400000)).format('YYYY-MM-DD')] = index;\n        weeksMappingOptimation[Moment(new Date(date.getTime() + 5 * 86400000)).format('YYYY-MM-DD')] = index;\n        weeksMappingOptimation[Moment(new Date(date.getTime() + 6 * 86400000)).format('YYYY-MM-DD')] = index;\n        index++;\n\n        suppliersWeek.push(entry);\n\n        date = new Date(date.getTime() + 7 * 86400000);\n\n        if (date > new Date()) {\n            break;\n        }\n    }\n\n    // weeks data\n    for (let row of data.dataSommVaxDetail.data) {\n        let index = weeksMappingOptimation[Moment(new Date(row.data_somministrazione)).format('YYYY-MM-DD')];\n        let week = suppliersWeek[index];\n\n        // Totale Somministrazioni Settimanale\n        week.total += (\n            row.prima_dose +\n            row.seconda_dose +\n            row.pregressa_infezione +\n            row.dose_aggiuntiva +\n            row.dose_booster\n        );\n\n        // Totale Somministrazioni Settimanale per fornitore\n        week[row.fornitore] += (\n            row.prima_dose +\n            row.seconda_dose +\n            row.pregressa_infezione +\n            row.dose_aggiuntiva +\n            row.dose_booster\n        );\n    }\n\n    let totalPlateaDoseAgg = 0;\n    for (let platea of data.dataPlateaDoseAgg.data) {\n        totalPlateaDoseAgg += parseInt(platea.totale_popolazione);\n    }\n\n    let totalPlateaDoseBooster = 0;\n    for (let platea of data.dataPlateaDoseBooster.data) {\n        totalPlateaDoseBooster += parseInt(platea.totale_popolazione);\n    }\n\n    const timestamp = data.dataLastUpdate.ultimo_aggiornamento;\n    const aggr = {\n        timestamp,\n        tot,\n        deliverySummary,\n        locations,\n        dataSomeVaxDetail,\n        locationsByRegion,\n        maxNumberOfLocations,\n        allDosesSupplier,\n        doesesByArea,\n        totalSuplier,\n        totalDoses,\n        totalDeliverySummaryByAge,\n        totalDeliverySummary,\n        suppliersColor,\n        suppliers,\n        suppliersWeek,\n        dosesAges,\n        dosesAgesColor,\n        dosesAgesData,\n        dosesAgesRegionData,\n        ageDosesTotal,\n        secondDosesData,\n        secondDosesPlateaData,\n        totalPlatea,\n        totalPlateaDoseAgg,\n        totalPlateaDoseBooster,\n        totalGuariti,\n        healedData,\n        healedPlateaData,\n        haeledAgesData,\n        regionHaeledAgesData\n        // dataAvailability,\n        // totalAvailability\n    };\n    return aggr;\n  };\n\n  export const loadData = async () => {\n    const [\n        resSommVaxSummary,\n        resSommVaxDetail,\n        resVaxSummary,\n        resProfileSummaryURL,\n        resVaxLocations,\n        resLastUpdate,\n        resSupplierDoses,\n        resPlatea,\n        resPlateaDoseAgg,\n        resPlateaDoseBooster,\n        resGuariti\n    ] = await Promise.all([\n        fetch(sommVaxSummaryURL),\n        fetch(sommVaxDetailURL),\n        fetch(vaxSummaryURL),\n        fetch(anagraficaSummaryURL),\n        fetch(vaxLocationsURL),\n        fetch(lastUpdateURL),\n        fetch(supplierDoses),\n        fetch(plateaURL),\n        fetch(plateaDoseAggURL),\n        fetch(plateaDoseBoosterURL),\n        fetch(guaritiURL)\n    ]);\n\n    const [\n        dataSommVaxSummary,\n        dataSommVaxDetail,\n        dataVaxSummary,\n        dataProfileSummary,\n        dataVaxLocations,\n        dataLastUpdate,\n        dataSupplierDoses,\n        dataPlatea,\n        dataPlateaDoseAgg,\n        dataPlateaDoseBooster,\n        dataGuariti\n    ] = await Promise.all([\n        resSommVaxSummary.json(),\n        resSommVaxDetail.json(),\n        resVaxSummary.json(),\n        resProfileSummaryURL.json(),\n        resVaxLocations.json(),\n        resLastUpdate.json(),\n        resSupplierDoses.json(),\n        resPlatea.json(),\n        resPlateaDoseAgg.json(),\n        resPlateaDoseBooster.json(),\n        resGuariti.json()\n    ]);\n\n    return {\n        ...elaborate({\n            dataSommVaxSummary,\n            dataSommVaxDetail,\n            dataVaxSummary,\n            dataProfileSummary,\n            dataLastUpdate,\n            dataVaxLocations,\n            dataSupplierDoses,\n            dataPlatea,\n            dataPlateaDoseAgg,\n            dataPlateaDoseBooster,\n            dataGuariti\n        })\n    };\n};\n","/* eslint-disable */\nimport * as jQuery from \"jquery\";\n\n(function() {\n \n    /*\n     * Natural Sort algorithm for Javascript - Version 0.7 - Released under MIT license\n     * Author: Jim Palmer (based on chunking idea from Dave Koelle)\n     * Contributors: Mike Grier (mgrier.com), Clint Priest, Kyle Adams, guillermo\n     * See: http://js-naturalsort.googlecode.com/svn/trunk/naturalSort.js\n     */\n    function naturalSort (a, b, html) {\n        var re = /(^-?[0-9]+(\\.?[0-9]*)[df]?e?[0-9]?%?$|^0x[0-9a-f]+$|[0-9]+)/gi,\n            sre = /(^[ ]*|[ ]*$)/g,\n            dre = /(^([\\w ]+,?[\\w ]+)?[\\w ]+,?[\\w ]+\\d+:\\d+(:\\d+)?[\\w ]?|^\\d{1,4}[\\/\\-]\\d{1,4}[\\/\\-]\\d{1,4}|^\\w+, \\w+ \\d+, \\d{4})/,\n            hre = /^0x[0-9a-f]+$/i,\n            ore = /^0/,\n            htmre = /(<([^>]+)>)/ig,\n            // convert all to strings and trim()\n            x = a.toString().replace(sre, '') || '',\n            y = b.toString().replace(sre, '') || '';\n            // remove html from strings if desired\n            if (!html) {\n                x = x.replace(htmre, '');\n                y = y.replace(htmre, '');\n            }\n            // chunk/tokenize\n        var xN = x.replace(re, '\\0$1\\0').replace(/\\0$/,'').replace(/^\\0/,'').split('\\0'),\n            yN = y.replace(re, '\\0$1\\0').replace(/\\0$/,'').replace(/^\\0/,'').split('\\0'),\n            // numeric, hex or date detection\n            xD = parseInt(x.match(hre), 10) || (xN.length !== 1 && x.match(dre) && Date.parse(x)),\n            yD = parseInt(y.match(hre), 10) || xD && y.match(dre) && Date.parse(y) || null;\n     \n        // first try and sort Hex codes or Dates\n        if (yD) {\n            if ( xD < yD ) {\n                return -1;\n            }\n            else if ( xD > yD ) {\n                return 1;\n            }\n        }\n     \n        // natural sorting through split numeric strings and default strings\n        for(var cLoc=0, numS=Math.max(xN.length, yN.length); cLoc < numS; cLoc++) {\n            // find floats not starting with '0', string or 0 if not defined (Clint Priest)\n            var oFxNcL = !(xN[cLoc] || '').match(ore) && parseFloat(xN[cLoc], 10) || xN[cLoc] || 0;\n            var oFyNcL = !(yN[cLoc] || '').match(ore) && parseFloat(yN[cLoc], 10) || yN[cLoc] || 0;\n            // handle numeric vs string comparison - number < string - (Kyle Adams)\n            if (isNaN(oFxNcL) !== isNaN(oFyNcL)) {\n                return (isNaN(oFxNcL)) ? 1 : -1;\n            }\n            // rely on string comparison if different types - i.e. '02' < 2 != '02' < '2'\n            else if (typeof oFxNcL !== typeof oFyNcL) {\n                oFxNcL += '';\n                oFyNcL += '';\n            }\n            if (oFxNcL < oFyNcL) {\n                return -1;\n            }\n            if (oFxNcL > oFyNcL) {\n                return 1;\n            }\n        }\n        return 0;\n    }\n     \n    jQuery.extend( jQuery.fn.dataTableExt.oSort, {\n        \"natural-asc\": function ( a, b ) {\n            return naturalSort(a,b,true);\n        },\n     \n        \"natural-desc\": function ( a, b ) {\n            return naturalSort(a,b,true) * -1;\n        },\n     \n        \"natural-nohtml-asc\": function( a, b ) {\n            return naturalSort(a,b,false);\n        },\n     \n        \"natural-nohtml-desc\": function( a, b ) {\n            return naturalSort(a,b,false) * -1;\n        },\n     \n        \"natural-ci-asc\": function( a, b ) {\n            a = a.toString().toLowerCase();\n            b = b.toString().toLowerCase();\n     \n            return naturalSort(a,b,true);\n        },\n     \n        \"natural-ci-desc\": function( a, b ) {\n            a = a.toString().toLowerCase();\n            b = b.toString().toLowerCase();\n     \n            return naturalSort(a,b,true) * -1;\n        }\n    } );\n     \n    }());","import { React, useEffect } from \"react\";\nimport * as $ from \"jquery\";\nimport DataTable from \"datatables.net\";\nimport \"./Table.css\";\nimport \"../naturalSortAlgorithm\";\n\n\n$.DataTable = DataTable;\nconst columns = [\n  { title: \"Regioni\", data: \"area\" },\n  { title: \"Dosi somministrate\", data: \"dosi_somministrate\" },\n  { title: \"Dosi consegnate\", data: \"dosi_consegnate\" },\n  { title: \"%\", data: \"percentuale_somministrazione\" },\n];\n\nexport const Table = ({ deliveryTableData }) => {\n\n  // Add footer elements\n  useEffect(() => {\n    $(\"#datatable\").find(\"tfoot\")\n    $(\"#datatable\")\n      .find(\"table\")\n      .append('<tfoot><th></th><th></th><th></th><th></th></tfoot>')\n  }, [])\n\n  useEffect(() => {\n\n    $(\"#datatable\")\n      .find(\"table\")\n      .DataTable({\n        dom:\n          \"<'row'<'col-12'l>>\" +\n          \"<'row'<'col-12'tr>>\",\n        paging: false,\n        searching: true,\n        destroy: true,\n        data: deliveryTableData,\n        columns,\n        language: {\n          decimal: \",\",\n          thousands: \".\"\n        },\n        columnDefs: [\n          {\n            targets: 0,\n            width: '160px'\n          },\n          { type: 'natural', targets: 3 },\n          {\n            \"targets\": [1, 2, 3],\n            render: (data, type, row) => {\n              return Number(data).toLocaleString('it')\n            }\n          }\n        ],\n        footerCallback: (row, data, start, end, display) => {\n          var api = $(\"#datatable\")\n            .find(\"table\")\n            .DataTable();\n\n          // Remove the formatting to get integer data for summation\n          var intVal = function (i) {\n            return typeof i === 'string' ?\n              i.replace(/[$,]/g, '') * 1 :\n              typeof i === 'number' ?\n                i : 0;\n          };\n\n          let totalDelivery = api\n            .column(2, { search: 'applied' })\n            .data()\n            .reduce(function (a, b) {\n              return intVal(a) + intVal(b);\n            }, 0);\n\n          let totalVaccines = api\n            .column(1, { search: 'applied' })\n            .data()\n            .reduce(function (a, b) {\n              return intVal(a) + intVal(b);\n            }, 0);\n\n          // Total over all pages\n          var totalPercentage = totalDelivery ? (totalVaccines/totalDelivery)*100 : 0\n\n          // Update footer\n          $(api.column(3).footer()).html(\n            (totalPercentage).toFixed(1)\n          );\n\n          $(api.column(2).footer()).html(\n            totalDelivery.toLocaleString('it')\n          );\n\n          $(api.column(1).footer()).html(\n            totalVaccines.toLocaleString('it')\n          );\n\n          $(api.column(0).footer()).html(\n            'Totale'\n          );\n        }\n      });\n\n  },[deliveryTableData]);\n\n  return (\n    <div id=\"datatable\">\n      <table\n        className=\"table h-100 table-borderless compact table-hover deliveries-table\"\n        cellSpacing=\"0\"\n        width=\"100%\"\n        style={{ paddingBottom: 6 }}\n      />\n    </div>\n  );\n};\n","import { React, useEffect, useState } from \"react\";\nimport * as d3 from \"d3\";\nimport * as topojson from \"topojson-client\";\nimport _ from \"lodash\";\nimport \"./MapArea.css\";\n\nexport const MapArea = ({\n    handleMapDeliveryClick,\n    fillMapDeliveryArea,\n    fillBy,\n    summary,\n    tooltip,\n    percentage,\n}) => {\n        const [geographies, setGeographies] = useState([]);\n        const [maxValue, setMaxValue] = useState(0);\n\n        useEffect(() => {\n            if (percentage) {\n                setMaxValue(100);\n            } else {\n                const maxValue = _.maxBy(summary || {}, fillBy);\n                setMaxValue(maxValue ? maxValue[fillBy] : 0);\n            }\n        }, [summary, fillBy, percentage]);\n\n    const width = 498,\n          height = 478;\n\n    const projection = d3\n        .geoAlbers()\n        .center([0, 41])\n        .rotate([347, 0])\n        .parallels([35, 45])\n        .scale(2200)\n        .translate([width / 2, height / 2]);\n        useEffect(() => {\n            const fetchData = async () => {\n                const res = await fetch(\"data/geo/it.json\");\n                const data = await res.json();\n                setGeographies(topojson.feature(data, data.objects.regions).features);\n            };\n        fetchData();\n        }, []);\n\n    return (\n        <div className=\"map-area mt-sx-3\" style={{ marginTop: \"80px\" }}>\n            <svg className=\"h-100 w-100\" height={height}>\n                <g className=\"countries\">\n                    {geographies.map((d, i) => {\n                        let reg_name = d.properties.reg_name;\n                        let regions = _.filter(summary, (i) => i.area === reg_name);\n                        let region = {};\n                        if (regions && regions.length > 0) {\n                            region = regions[0];\n                        }\n\n                        return (\n                            <path\n                                key={`path-${i}`}\n                                d={d3.geoPath().projection(projection)(d)}\n                                className=\"country\"\n                                id={`${region?.area?.trim()}`}\n                                fill={fillMapDeliveryArea({ region, maxValue, field: fillBy })}\n                                stroke=\"#FFFFFF\"\n                                strokeWidth={0.7}\n                                onClick={() => handleMapDeliveryClick(region)}\n                            >\n                                <title>\n                                    <span className=\"bg-info\">{tooltip(region)}</span>\n                                </title>\n                            </path>\n                        );\n                    })});\n                </g>\n            </svg>\n        </div>\n    );\n};\n","import React, { useEffect, useState } from \"react\";\nimport { find, max, isEmpty } from \"lodash\";\nimport { Table } from \"./../components/Table\";\n\nimport { MapArea } from \"./../components/MapArea\";\n\nexport const Deliveries = ({ data }) => {\n    const [deliveryMapData, setDeliveryMapData] = useState([]);\n    const [deliveryTableData, setDeliveryTableData] = useState([]);\n    const [deliverySelectedRegion, setDeliverySelectedRegion] = useState(null);\n    const [totalDelivery, setTotalDelivery] = useState(0);\n\n\n    const [selectedAge, setSelectedAge] = useState(null);\n\n    useEffect(() => {\n        if (!isEmpty(data)) {\n            setDeliveryMapData(data.totalDeliverySummary);\n\n\n            setDeliveryTableData(data.totalDeliverySummary);\n            setTotalDelivery(data.tot);\n        }\n    }, [data]);\n\n    const resetFilter = () => {\n        setDeliverySelectedRegion(null);\n        setDeliveryTableData(data.totalDeliverySummary);\n        setTotalDelivery(data.tot);\n\n\n        setSelectedAge(null);\n        setDeliveryMapData(data.totalDeliverySummary);\n    };\n\n    const fillMapDeliveryArea = ({ region, maxValue, field }) => {\n        let scaleOp = 0;\n        if (region.code === deliverySelectedRegion) {\n            scaleOp = 1;\n        } else if (!deliverySelectedRegion) {\n            scaleOp = max([region[field] / maxValue, 0.1]);\n        } else {\n            const valueToFill = region[field] / (2 * maxValue);\n            scaleOp = max([valueToFill, 0.1]);\n        }\n        return `rgba(0,102,204,${scaleOp}) `;\n    };\n\n    const handleMapDeliveryClick = (region) => {\n        if (selectedAge) {\n            resetFilter();\n        }\n\n        if (deliverySelectedRegion === region.code) {\n            resetFilter();\n        } else {\n            const deliveryTableFilteredData = find(\n            data.totalDeliverySummary,\n            (d) => d.code === region.code\n        );\n\n        setDeliveryTableData([deliveryTableFilteredData]);\n\n        setDeliverySelectedRegion(region.code);\n        setTotalDelivery(deliveryTableFilteredData.dosi_somministrate);\n\n    }\n};\n\n\nreturn (\n    <div>\n        <div className=\"row\">\n            <div className=\"col-12 d-flex justify-content-end\"></div>\n        </div>\n        <div className=\"row p-2 pb-5\" style={{ backgroundColor: \"#F8FBFE\" }}>\n            <div className=\"col-12 col-lg-6 h-100 order-md-2 order-lg-1 \">\n                <div className=\"container-info d-none d-sm-none d-md-flex d-lg-flex\">\n                    <span data-toggle=\"tooltip\" title=\"% somministrazioni su dosi consegnate\" className=\"circle-info\">i</span>\n                </div>\n                <Table deliveryTableData={deliveryTableData} className=\"mr-5 h-100\" />\n            </div>\n            <div className=\"col-12 col-lg-6 order-md-1 order-lg-2 text-center\">\n                <div className=\"p-4 position-relative d-lg-none\">\n                    <div className=\"w-100 h-100 d-flex justify-content-start pr-5\">\n                        <h5 className=\"pl-3 pl-sm-1 justify-content-center\">Distribuzione somministrazioni rispetto alle consegne</h5>\n                    </div>\n                </div>\n                <div className=\"p-5 d-none d-lg-block\">\n                    <div className=\"d-flex justify-content-end\" style={{position: \"absolute \", top: 150, right: 50,}}>\n                        <h5 className=\"pl-1 pl-sm-1 text-left\">\n                            <span\n                                data-toggle=\"tooltip\"\n                                title=\"Nel grafico è rappresentato il tasso di somministrazione,ovvero il rapporto tra le somministrazioni e le dosi consegnate (%)\"\n                                className=\"circle-info\"\n                                style={{\n                                    position: \"relative\",\n                                    right: 23,\n                                    top: 25,\n                                }}\n                            >i</span>Distribuzione<br />somministrazioni <br />rispetto alle consegne\n                        </h5>\n                    </div>\n                </div>\n                <div className=\"justify-content-center\">\n                <MapArea\n                    fillMapDeliveryArea={fillMapDeliveryArea}\n                    summary={deliveryMapData}\n                    handleMapDeliveryClick={handleMapDeliveryClick}\n                    tooltip={(r) => r.area + \" \" + (r.percentuale_somministrazione && r.percentuale_somministrazione.toLocaleString(\"it\")) + \"%\"}\n                    fillBy=\"percentuale_somministrazione\"\n                    className=\"w-100 h-100 ml-5\"\n                />\n                </div>\n                <div className=\"p-4 position-relative\">\n                    <div className=\"text-black w-100\">\n                        <div className=\"w-100 h-100 d-flex justify-content-center \">\n                            <span className=\"font-50 pl-3\">{totalDelivery?.toLocaleString(\"it\")}</span>\n                        </div>\n                        <div className=\"w-100  h-100 d-flex justify-content-center\">\n                            <h5>Totale somministrazioni</h5>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    );\n};\n","import { React, useEffect, useRef } from \"react\";\nimport * as d3 from \"d3\";\nimport \"../App.css\";\n// import { maxX } from \"../utils\";\n\nexport const AgeHStackedBarChart = ({\n  handleRectClick,\n  height,\n  width,\n  data,\n  keys,\n  colors,\n  selectedCodeAge,\n  regionSelected\n  }) => {\n\n  const myRef = useRef();\n  const divRef = useRef();\n\n  useEffect(() => {\n      doExit();\n      draw();\n      // eslint-disable-next-line\n  }, [data, keys, selectedCodeAge]);\n\n\n  const responsivefy = (svg) => {\n    // Container is the DOM element, svg is appended.\n    // Then we measure the container and find its\n    // aspect ratio.\n    const container = d3.select(svg.node().parentNode),\n      width = parseInt(svg.style(\"width\"), 10),\n      height = parseInt(svg.style(\"height\"), 10),\n      aspect = width / height;\n\n    // Add viewBox attribute to set the value to initial size\n    // add preserveAspectRatio attribute to specify how to scale\n    // and call resize so that svg resizes on page load\n    svg\n      .attr(\"viewBox\", `0 0 ${width} ${height}`)\n      .attr(\"preserveAspectRatio\", \"xMinYMid\")\n      .call(resize);\n\n    d3.select(window).on(\"resize.\" + container.attr(\"id\"), resize);\n\n    function resize() {\n      const targetWidth = parseInt(container.style(\"width\"));\n      svg.attr(\"width\", targetWidth);\n      svg.attr(\"height\", Math.round(targetWidth / aspect));\n    }\n  };\n\n  function doExit() {\n    d3.select(divRef.current).selectAll(\"svg\").remove();\n  }\n\n  const draw = () => {\n\n    const dataset = d3.stack().keys(keys)(data);\n\n    // append element\n    const svg = d3\n      .select(divRef.current)\n      .append(\"svg\")\n      .style('margin-bottom', 10)\n      .attr(\"width\", width)\n      .attr(\"height\", height);\n    const margin = { y: 30, x: 60 };\n\n    // axis\n    const xScale = d3.scaleLinear().domain([0, d3.max(data, function(d) { return d['Totale platea']; })]);\n    const yScale = d3.scaleBand().padding(0.2);\n    xScale.range([0, width]);\n    yScale.range([0, height]).domain(data.map((d) => d.label));\n\n    svg\n      .attr(\"width\", width + 2 * margin.x)\n      .attr(\"height\", height + 2 * margin.y)\n      .call(responsivefy) // Call responsivefy to make the chart responsive\n      .attr(\"id\", \"svg-stack-bar\");\n\n    const chart = svg\n      .append(\"g\")\n      .attr(\"transform\", `translate(${margin.x},${margin.y})`);\n\n    chart\n      .append(\"g\")\n      .attr(\"class\", \"axis\")\n      .attr(\"transform\", `translate(0, 0)`)\n      .style(\"font-size\", \"12px\")\n      .call(d3.axisLeft(yScale))\n      .attr('stroke-width', 0)\n        .selectAll(\"text\")\n            .attr(\"y\", 0)\n            .attr(\"x\", -30)\n            .style(\"text-anchor\", \"start\")\n            .style(\"fill\", \"#19191a\");\n\n\n    const tooltip = d3\n      .select('body')\n      .append('div')\n      .attr('class', 'd3-tooltip')\n      .style('position', 'absolute')\n      .style('z-index', '10')\n      .style('display', 'none')\n      .style('padding', '10px')\n      .style('background', 'rgba(0,0,0,0.8)')\n      .style('border-radius', '4px')\n      .style('color', '#fff');\n\n    const path = chart.selectAll().data(dataset);\n\n    path\n      .enter()\n      .append(\"g\")\n      .attr(\"fill\", function(d) {\n        return colors[d.key];\n      })\n      .attr(\"dose\", function(d) {\n        return d.key;\n      })\n      .selectAll(\"rect\")\n      .data(function(d) {\n        return d;\n      })\n      .enter().append(\"rect\")\n      .on(\"click\", (e, d) => {\n        handleRectClick(d);\n        tooltip.html(``).style('display', 'none');\n      })\n      .attr(\"opacity\", (d) => {\n        const ageCode = d.data.label.toLowerCase().replaceAll(' ', '_');\n\n        let opac = selectedCodeAge === ageCode ? 1 : !selectedCodeAge ? 1 : 0.3;\n        return opac;\n      })\n      .attr(\"x\", function(d) {\n        return xScale(d[0]) + 60;\n      })\n      .attr(\"y\", function(d) {\n        return yScale(d.data.label);\n      })\n      .attr(\"width\", function(d) {\n        return xScale(d[1]) - xScale(d[0]);\n      })\n      .attr(\"height\", yScale.bandwidth())\n      .on('mouseover', function (d, i) {\n        d3.select(this).transition().attr('fill', '#e31f82');\n      })\n      .on('mousemove', function (event, d) {\n        let regione = regionSelected ? \" \" + regionSelected : \"\";\n\n        if (d3.select(this.parentNode).attr(\"dose\") === 'Totale fascia') {\n          tooltip\n            .style('top', event.pageY - 10 + 'px')\n            .style('left', event.pageX + 10 + 'px');\n          tooltip\n            .html(\n                `<div style=\"text-align: center; line-height: 1.15rem;\">\n                <div style=\"font-size: 12px;\">${regione}</div>\n                <div><b>${d.data.label}</b></div>\n                <div style=\"font-size: 14px;\">Platea</div>\n                <div>${d.data[\"Totale platea\"].toLocaleString('it')}</div>\n                </div>`\n                )\n            .style('display', null);\n        }\n        else {\n          var perc = 0;\n          if (d3.select(this.parentNode).attr(\"dose\") === '1ª dose') {\n            let sum = d.data[\"1ª dose\"] + d.data[\"2ª dose/unica dose\"] + d.data[\"Dose addizionale/booster\"];\n            perc = (sum / d.data[\"Totale platea\"]) * 100;\n          }\n          else {\n            if (d3.select(this.parentNode).attr(\"dose\") === '2ª dose/unica dose') {\n              let sum = d.data[\"2ª dose/unica dose\"] + d.data[\"Dose addizionale/booster\"];\n              perc = (sum / d.data[\"Totale platea\"]) * 100;\n            }\n            else {\n              perc = (d.data[\"Dose addizionale/booster\"] / d.data[\"Totale platea\"]) * 100;\n            }\n          }\n\n          tooltip\n            .style('top', event.pageY - 10 + 'px')\n            .style('left', event.pageX + 10 + 'px');\n          tooltip\n            .html(\n                `<div style=\"text-align: center; line-height: 1.15rem;\">\n                <div style=\"font-size: 12px;\">${regione} ${d.data.label}</div>\n                <div style=\"text-align: center\"><b>${d3.select(this.parentNode).attr(\"dose\")} </b></div>\n                <div style=\"font-size: 14px;\"><b>(${perc.toFixed(2).toLocaleString(\"it\")} %)</b></div>\n                <div style=\"font-size: 14px;\">Somministrate ${(d[1]).toLocaleString('it')} su ${d.data[\"Totale platea\"].toLocaleString('it')}</div>`\n            )\n            .style('display', null);\n        }\n      })\n      .on('mouseout', function (d) {\n          tooltip.html(``).style('display', 'none');\n          d3.select(this).transition().attr('fill', colors[d.key]);\n      });\n\n    path.exit().remove();\n  };\n\n  return (\n    <div ref={divRef} className=\"chart svg-container\">\n      <svg ref={myRef} className=\"svg-content-responsive\"></svg>\n    </div>\n  );\n};\n","import React, { useEffect, useState } from \"react\";\nimport { isEmpty, max } from \"lodash\";\nimport { AgeHStackedBarChart } from \"./../components/AgeHStackedBarChart\";\nimport { MapArea } from \"./../components/MapArea\";\n\nexport const AgeDoses = ({ data }) => {\n    const [dosesAgesColor, setdosesAgesColor] = useState([]);\n    const [dosesAges, setdosesAges] = useState([]);\n    const [dosesAgesData, setDosesAgesData] = useState([]);\n\n    const [categoryMapData, setCategoryMapData] = useState([]);\n    const [dosesMapData, setDosesMapData] = useState([]);\n    const [categoryMapField, setCategoryMapField] = useState(\"somministrazioni\");\n\n    const [categorySelectedRegion, setCategorySelectedRegion] = useState(null);\n    const [categorySelectedRegionDescr, setCategorySelectedRegionDescr] = useState(null);\n    const [selectedCodeAge, setSelectedCodeAge] = useState(null);\n\n    const [totalByCategory, setTotalByCategory] = useState(0);\n\n    useEffect(() => {\n        if (!isEmpty(data)) {\n            setdosesAgesColor(data.dosesAgesColor);\n            setdosesAges(data.dosesAges);\n            setDosesAgesData(data.dosesAgesData);\n\n            setTotalByCategory(data.tot);\n            setCategoryMapData(data.secondDosesPlateaData);\n            setDosesMapData(data.secondDosesData);\n        }\n    }, [data]);\n\n    const resetFilter = () => {\n        setSelectedCodeAge(null);\n        setCategorySelectedRegion(null);\n        setCategorySelectedRegionDescr(null);\n        setTotalByCategory(data.tot);\n        setDosesAgesData(data.dosesAgesData);\n        setCategoryMapField(\"somministrazioni\");\n        setCategoryMapData(data.secondDosesPlateaData);\n    };\n\n    const fillMapCategoryArea = ({ region, maxValue, field }) => {\n        let scaleOp = 0;\n        if (region.code === categorySelectedRegion) {\n          scaleOp = 1;\n        } else if (!categorySelectedRegion) {\n          scaleOp = max([region[field] / maxValue, 0.1]);\n        } else {\n          const valueToFill = region[field] / (2 * maxValue);\n          scaleOp = max([valueToFill, 0.1]);\n        }\n        return `rgba(0,102,204,${scaleOp}) `;\n    };\n\n    const handleMapCategoryClick = (region) => {\n        if (selectedCodeAge) {\n          resetFilter();\n        }\n\n        if (categorySelectedRegion === region.code) {\n          resetFilter();\n        } else {\n          setCategorySelectedRegion(region.code);\n          setCategorySelectedRegionDescr(region.area);\n          setDosesAgesData(data.dosesAgesRegionData[region.code])\n\n          for(let row of data?.totalDeliverySummary) {\n            if (row.code === region.code) {\n                setTotalByCategory(row.dosi_somministrate);\n            }\n          }\n        }\n    };\n\n    const handleCategoryBarChartClick = (cat) => {\n        if (categorySelectedRegion) {\n          resetFilter();\n        }\n\n        const ageCode = cat.data.label.toLowerCase().replaceAll(' ', '_');\n\n        if (selectedCodeAge === ageCode) {\n          resetFilter();\n        } else {\n          setSelectedCodeAge(ageCode);\n          setCategoryMapField(ageCode);\n          setTotalByCategory(data.ageDosesTotal[cat.data.label]);\n        }\n    };\n\n    return (\n        <div className=\"row \">\n            {/* Box Title */}\n            <div style={{ marginTop: 40 }} className=\"col-12 d-flex justify-content-center align-items-center p-5 bg-title-plot\">\n                <div style={{textAlign: 'center'}}>\n                    <h3 className=\"text-center\">Somministrazioni per fascia d'età - dose</h3>\n                </div>\n            </div>\n            {/* // Box Title */}\n\n            <div className=\"col-12 col-md-12 h-100 m-3 \">\n                {/* Total Box - Mobile View */}\n                <div className=\"m-3  d-lg-none\" style={{ position: \"relative\", background: \"#013366\" }}>\n                    <img src=\"Coccarda.svg\" width=\"100\" height=\"100\" alt=\"Logo\" className=\"d-flex text-center\" style={{ position: \"absolute\", left:-40, top:-25}}/>\n                    <div className=\"text-white w-100 \">\n                        <div className=\"w-100  h-100 d-flex justify-content-center pt-5\">\n                            <h5>Totale somministrazioni</h5>\n                        </div>\n                        <div className=\"w-100  h-100 d-flex justify-content-center\">\n                            <p className=\"numeri_box\">\n                                {totalByCategory && totalByCategory.toLocaleString(\"it\")}\n                            </p>\n                        </div>\n                        <div className=\"col-12 d-flex justify-content-end  pb-2\">\n                            <img alt=\"reset-plot2\" src=\"reset_white.png\" onClick={resetFilter} height={35}/>\n                        </div>\n                    </div>\n                </div>\n                {/* // Total Box - Mobile View */}\n\n                {/* Total Box - Desktop View */}\n                <div className=\"col-3 col-md-3  d-none d-lg-block\" style={{ height: 100 }} >\n                    <div style={{ position: \"relative\", background: \"#17324D\", top: -55, left: 40 }} >\n                        <img src=\"Coccarda.svg\" width=\"100\" height=\"100\" alt=\"Logo\" className=\"d-none d-md-block d-lg-block\" style={{ zIndex: 10, position: 'absolute', right: -50, top: -25 }} />\n                        <div className=\"text-white w-100\">\n                            <div className=\"w-100  h-100 d-flex justify-content-start pt-3 pl-4\">\n                                <h5>Totale<br></br>somministrazioni</h5>\n                            </div>\n                            <div className=\"w-100  h-100 d-flex justify-content-start pl-4\">\n                                <p className=\"numeri_box\">\n                                    {totalByCategory && totalByCategory.toLocaleString(\"it\")}\n                                </p>\n                            </div>\n                            <div className=\"col-12 d-flex justify-content-end  pb-2\">\n                                <img alt=\"Reset\" src=\"reset_white.png\" onClick={resetFilter} height={35} />\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                {/* // Total Box - Desktop View */}\n            </div>\n            <div className=\"col-12 col-md-6 h-100\" style={{marginTop: 50}}>\n\n                {/* Graph */}\n                <AgeHStackedBarChart\n                    xtitle=\"Somministrazione settimanale\"\n                    width={+350}\n                    height={+300}\n                    property={{ xprop: \"label\", yprop: \"total\" }}\n                    handleRectClick={handleCategoryBarChartClick}\n                    regionSelected={categorySelectedRegionDescr}\n                    selectedCodeAge={selectedCodeAge}\n                    colors={dosesAgesColor}\n                    keys={dosesAges}\n                    data={dosesAgesData}\n                />\n                {/* // Graph */}\n\n                {/* Legend */}\n                <div className=\"row\" style={{marginBottom: 40, marginLeft: 10}}>\n                    {dosesAges.map((dose) => {\n                        return (\n                            <div className=\"row\" key={dose}>\n                                <div className=\"circle\" style={{ backgroundColor: dosesAgesColor[dose] }}></div>\n                                <span className=\"legend\" style={{color: '#19191a', marginRight: 25}}>{dose}</span>\n                            </div>\n                        )\n                    })}\n                </div>\n                {/* // Legend */}\n\n                <p className=\"d-block d-sm-none text-center\">*Tieni premuto sulle barre del grafico per visualizzare i dati sulle dosi somministrate</p>\n                <p className=\"d-none d-sm-block text-center\">*Passa con il mouse sulle barre del grafico per visualizzare i dati sulle dosi somministrate</p>\n            </div>\n            <div className=\"col-12 col-md-6 h-100\" style={{ overflow: \"hidden\" }}>\n\n                {/* Map Title - Mobile View*/}\n                <div className=\"p-4 d-lg-none\">\n                    <div className=\"w-100 h-100 text-center\">\n                        <h5>Percentuale vaccinati per regione</h5>\n                    </div>\n                </div>\n                {/* // Map Title - Mobile View*/}\n\n                {/* Map Graph */}\n                <MapArea\n                    fillMapDeliveryArea={fillMapCategoryArea}\n                    summary={categoryMapData}\n                    handleMapDeliveryClick={handleMapCategoryClick}\n                    fillBy={categoryMapField}\n                    percentage={true}\n                    tooltip={(r) => {\n                            var region = null;\n                            for(let row of dosesMapData) {\n                                if (row.code === r.code) {\n                                    region = row;\n                                }\n                            }\n\n                            return (\n                                r.area +\n                                \" \" +\n                                (r[categoryMapField] && r[categoryMapField].toFixed(2).toLocaleString(\"it\") + \"%\") +\n                                \" \" +\n                                (region && region[categoryMapField] && \"(\" + region[categoryMapField].toLocaleString(\"it\") + \")\")\n                            )\n                        }\n                    }\n                    className=\"ml-5 w-100 h-100\"\n                />\n                {/* // Map Graph */}\n\n                {/* Map Title - Desktop View*/}\n                <div className=\"p-4 position-relative d-none d-lg-block\" style={{ left: \"300px\", top: \"-390px\" }}>\n                    <div className=\"w-100 h-100 d-flex justify-content-start pr-5\">\n                        <h5 className=\"pl-3 pl-sm-1\">\n                            Percentuale vaccinati\n                            <br /> per regione\n                        </h5>\n                    </div>\n                </div>\n                {/* // Map Title - Desktop View*/}\n            </div>\n        </div>\n    )\n};","import { React, useEffect, useRef } from \"react\";\nimport * as d3 from \"d3\";\nimport \"../App.css\";\n\nexport const BarChart = ({\n  handleRectClick,\n  height,\n  width,\n  data,\n  selectedCodeAge,\n  regionSelected\n  }) => {\n\n  const myRef = useRef();\n  const divRef = useRef();\n\n  useEffect(() => {\n      doExit();\n      draw();\n  // eslint-disable-next-line\n  },[data, selectedCodeAge]);\n\n\n  const responsivefy = (svg) => {\n    // Container is the DOM element, svg is appended.\n    // Then we measure the container and find its\n    // aspect ratio.\n    const container = d3.select(svg.node().parentNode),\n      width = parseInt(svg.style(\"width\"), 10),\n      height = parseInt(svg.style(\"height\"), 10),\n      aspect = width / height;\n\n    // Add viewBox attribute to set the value to initial size\n    // add preserveAspectRatio attribute to specify how to scale\n    // and call resize so that svg resizes on page load\n    svg\n      .attr(\"viewBox\", `0 0 ${width} ${height}`)\n      .attr(\"preserveAspectRatio\", \"xMinYMid\")\n      .call(resize);\n\n    d3.select(window).on(\"resize.\" + container.attr(\"id\"), resize);\n\n    function resize() {\n      const targetWidth = parseInt(container.style(\"width\"));\n      svg.attr(\"width\", targetWidth);\n      svg.attr(\"height\", Math.round(targetWidth / aspect));\n    }\n  };\n\n  function doExit() {\n    d3.select(divRef.current).selectAll(\"svg\").remove();\n  }\n\n  const draw = () => {\n\n    // append element\n    const svg = d3\n      .select(divRef.current)\n      .append(\"svg\")\n      .style('margin-bottom', 10)\n      .attr(\"width\", width)\n      .attr(\"height\", height);\n    const margin = { y: 30, x: 60 };\n\n\n    const xScale = d3.scaleLinear().domain([0, d3.max(data, function(d) { return d.guariti; })]);\n    const yScale = d3.scaleBand().padding(0.2);\n    xScale.range([0, width]);\n    yScale.range([0, height]).domain(data.map((d) => d.label));\n\n    svg\n      .attr(\"width\", width + 2 * margin.x)\n      .attr(\"height\", height + 2 * margin.y)\n      .call(responsivefy) // Call responsivefy to make the chart responsive\n      .attr(\"id\", \"svg-stack-bar\");\n\n\n    const chart = svg\n      .append(\"g\")\n      .attr(\"transform\", `translate(${margin.x},${margin.y})`);\n\n    chart\n      .append(\"g\")\n      .attr(\"class\", \"axis\")\n      .attr(\"transform\", `translate(0, 0)`)\n      .style(\"font-size\", \"12px\")\n      .call(d3.axisLeft(yScale))\n      .attr('stroke-width', 0)\n        .selectAll(\"text\")\n            .attr(\"y\", 0)\n            .attr(\"x\", -30)\n            .style(\"text-anchor\", \"start\")\n            .style(\"fill\", \"#19191a\");\n\n    const tooltip = d3\n      .select('body')\n      .append('div')\n      .attr('class', 'd3-tooltip')\n      .style('position', 'absolute')\n      .style('z-index', '10')\n      .style('display', 'none')\n      .style('padding', '10px')\n      .style('background', 'rgba(0,0,0,0.8)')\n      .style('border-radius', '4px')\n      .style('color', '#fff');\n\n    const path = chart.selectAll().data(data);\n\n    path\n      .enter()\n      .append(\"g\")\n      .attr(\"fill\", \"#77b2f2\")\n      .selectAll(\"rect\")\n      .data(data)\n      .enter().append(\"rect\")\n      .on(\"click\", (e, d) => {\n        handleRectClick(d);\n        tooltip.html(``).style('display', 'none');\n      })\n      .attr(\"opacity\", (d) => {\n        const ageCode = d.label.toLowerCase().replaceAll(' ', '_');\n\n        let opac = selectedCodeAge === ageCode ? 1 : !selectedCodeAge ? 1 : 0.1;\n        return opac;\n      })\n      .attr(\"x\", function(d) {\n        return 60;\n      })\n      .attr(\"y\", function(d) {\n        return yScale(d.label);\n      })\n      .attr(\"width\", function(d) {\n        return xScale(d.guariti);\n      })\n      .attr(\"height\", yScale.bandwidth())\n      .on('mousemove', function (event, d) {\n        let regione = regionSelected ? \" \" + regionSelected : \"\";\n\n        tooltip\n          .style('top', event.pageY - 10 + 'px')\n          .style('left', event.pageX + 10 + 'px');\n        tooltip\n          .html(\n              `<div style=\"text-align: center; line-height: 1.15rem;\">\n              <div style=\"font-size: 12px;\">${regione} ${d.label}</div>\n              <div style=\"font-size: 14px;\"><b>${d.guariti.toLocaleString('it')}</b></div>`\n          )\n          .style('display', null);\n      })\n      .on('mouseout', function (d) {\n        tooltip.html(``).style('display', 'none');\n    });\n\n    path.exit().remove();\n  };\n\n  return (\n    <div ref={divRef} className=\"chart svg-container\">\n      <svg ref={myRef} className=\"svg-content-responsive\"></svg>\n    </div>\n  );\n};\n","import React, { useEffect, useState } from \"react\";\nimport { isEmpty, max } from \"lodash\";\nimport { BarChart } from \"../components/BarChart\";\nimport { MapArea } from \"../components/MapArea\";\n\nexport const Healed = ({ data }) => {\n\n    const [categoryMapData, setCategoryMapData] = useState([]);\n    const [categoryMapField, setCategoryMapField] = useState(\"guariti\");\n    const [totalGuariti, setTotalGuariti] = useState(0);\n    const [healedMapData, setHealedMapData] = useState([]);\n\n\n    const [haeledAgesData, setHaeledAgesData] = useState([]);\n\n    const [selectedCodeAge, setSelectedCodeAge] = useState(null);\n    const [selectedCodeRegion, setSelectedCodeRegion] = useState(null);\n\n    useEffect(() => {\n        if (!isEmpty(data)) {\n            setHaeledAgesData(data.haeledAgesData);\n            setHealedMapData(data.healedData);\n            setTotalGuariti(data.totalGuariti);\n            setCategoryMapData(data.healedPlateaData);\n        }\n    }, [data]);\n\n    const resetFilter = () => {\n        setSelectedCodeAge(null);\n        setSelectedCodeRegion(null);\n\n        setHaeledAgesData(data.haeledAgesData);\n\n        setCategoryMapField(\"guariti\");\n        setTotalGuariti(data.totalGuariti);\n        setCategoryMapData(data.healedPlateaData);\n    };\n\n    const fillMapCategoryArea = ({ region, maxValue, field }) => {\n        let scaleOp = 0;\n        if (region.code === selectedCodeRegion) {\n            scaleOp = 1;\n        } else if (!selectedCodeRegion) {\n            scaleOp = max([region[field] / maxValue, 0.1]);\n        } else {\n            const valueToFill = region[field] / (2 * maxValue);\n            scaleOp = max([valueToFill, 0.1]);\n        }\n        return `rgba(0,102,204,${scaleOp}) `;\n    };\n\n    const handleMapClick = (region) => {\n        if (selectedCodeAge) {\n            resetFilter();\n        }\n\n        if (selectedCodeRegion === region.code) {\n            resetFilter();\n        } else {\n            setSelectedCodeRegion(region.code);\n            setHaeledAgesData(data.regionHaeledAgesData[region.code]);\n\n            for(let row of data?.healedData) {\n                if (row.code === region.code) {\n                    setTotalGuariti(row.guariti);\n                }\n            }\n        }\n    };\n\n    const handleAgeBarChartClick = (cat) => {\n        if (selectedCodeRegion) {\n            resetFilter();\n        }\n\n        const ageCode = cat.label.toLowerCase().replaceAll(' ', '_');\n\n        if (selectedCodeAge === ageCode) {\n            resetFilter();\n        } else {\n            setSelectedCodeAge(ageCode);\n            setCategoryMapField(ageCode);\n\n            for(let row of data?.haeledAgesData) {\n                const tmp = row.label.toLowerCase().replaceAll(' ', '_');\n                if (tmp === ageCode) {\n                    setTotalGuariti(row.guariti);\n                }\n            }\n        }\n    };\n\n    return (\n        <div className=\"row \">\n            {/* Box Title */}\n            <div style={{ marginTop: 40 }} className=\"col-12 d-flex justify-content-center align-items-center p-5 bg-title-plot\">\n                <div style={{textAlign: 'center'}}>\n                    <h3 className=\"text-center\">Platea guariti da al massimo sei mesi</h3>\n                </div>\n            </div>\n            {/* // Box Title */}\n\n            <div className=\"col-12 col-md-12 h-100 m-3 \">\n                {/* Total Box - Mobile View */}\n                <div className=\"m-3  d-lg-none\" style={{ position: \"relative\", background: \"#013366\" }}>\n                    <img src=\"Coccarda.svg\" width=\"100\" height=\"100\" alt=\"Logo\" className=\"d-flex text-center\" style={{ position: \"absolute\", left:-40, top:-25}}/>\n                    <div className=\"text-white w-100 \">\n                        <div className=\"w-100  h-100 d-flex justify-content-center pt-5\">\n                            <h5>Totale guariti</h5>\n                        </div>\n                        <div className=\"w-100  h-100 d-flex justify-content-center\">\n                            <p className=\"numeri_box\">\n                                {totalGuariti && totalGuariti.toLocaleString(\"it\")}\n                            </p>\n                        </div>\n                        <div className=\"col-12 d-flex justify-content-end  pb-2\">\n                            <img alt=\"reset-plot2\" src=\"reset_white.png\" onClick={resetFilter} height={35}/>\n                        </div>\n                    </div>\n                </div>\n                {/* // Total Box - Mobile View */}\n\n                {/* Total Box - Desktop View */}\n                <div className=\"col-3 col-md-3  d-none d-lg-block\" style={{ height: 100 }} >\n                    <div style={{ position: \"relative\", background: \"#17324D\", top: -55, left: 40 }} >\n                        <img src=\"Coccarda.svg\" width=\"100\" height=\"100\" alt=\"Logo\" className=\"d-none d-md-block d-lg-block\" style={{ zIndex: 10, position: 'absolute', right: -50, top: -25 }} />\n                        <div className=\"text-white w-100\">\n                            <div className=\"w-100  h-100 d-flex justify-content-start pt-3 pl-4\">\n                                <h5>Totale<br></br>guariti</h5>\n                            </div>\n                            <div className=\"w-100  h-100 d-flex justify-content-start pl-4\">\n                                <p className=\"numeri_box\">\n                                    {totalGuariti && totalGuariti.toLocaleString(\"it\")}\n                                </p>\n                            </div>\n                            <div className=\"col-12 d-flex justify-content-end  pb-2\">\n                                <img alt=\"Reset\" src=\"reset_white.png\" onClick={resetFilter} height={35} />\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                {/* // Total Box - Desktop View */}\n            </div>\n            <div className=\"col-12 col-md-6 h-100\" style={{marginTop: 50}}>\n\n                {/* Graph */}\n                <BarChart\n                    title=\"\"\n                    xtitle=\"Fascia d'età\"\n                    ytitle=\"\"\n                    handleRectClick={handleAgeBarChartClick}\n                    width={+350}\n                    height={+300}\n                    selectedCodeAge={selectedCodeAge}\n                    data={haeledAgesData}\n                />\n                {/* // Graph */}\n            </div>\n            <div className=\"col-12 col-md-6 h-100\" style={{ overflow: \"hidden\" }}>\n                {/* Map Graph */}\n                <MapArea\n                    fillMapDeliveryArea={fillMapCategoryArea}\n                    summary={categoryMapData}\n                    handleMapDeliveryClick={handleMapClick}\n                    fillBy={categoryMapField}\n                    percentage={false}\n                    tooltip={(r) => {\n                            var region = null;\n                            for(let row of healedMapData) {\n                                if (row.code === r.code) {\n                                    region = row;\n                                }\n                            }\n\n                            return (\n                                r.area +\n                                \" \" +\n                                (region && region[categoryMapField] && \"(\" + region[categoryMapField].toLocaleString(\"it\") + \")\")\n                            )\n                        }\n                    }\n                    className=\"ml-5 w-100 h-100\"\n                />\n                {/* // Map Graph */}\n\n                <p className=\"d-none d-sm-block text-center\">*Seleziona la Regione/Provincia Autonoma per visualizzare il dettaglio.</p>\n            </div>\n        </div>\n    )\n};","import { React, useEffect, useRef } from \"react\";\nimport * as d3 from \"d3\";\nimport \"../App.css\";\n// import { maxX } from \"../utils\";\n\nexport const StackedBarChart = ({\n  height,\n  width,\n  data,\n  keys,\n  colors,\n  selectedFrom,\n  selectedTo,\n  property,\n  title,\n  ytitle\n  }) => {\n\n  const myRef = useRef();\n  const divRef = useRef();\n\n  useEffect(() => {\n      doExit();\n      draw();\n      // eslint-disable-next-line\n  }, [data, keys, selectedFrom, selectedTo]);\n\n\n  const responsivefy = (svg) => {\n    // Container is the DOM element, svg is appended.\n    // Then we measure the container and find its\n    // aspect ratio.\n    const container = d3.select(svg.node().parentNode),\n      width = parseInt(svg.style(\"width\"), 10),\n      height = parseInt(svg.style(\"height\"), 10),\n      aspect = width / height;\n\n    // Add viewBox attribute to set the value to initial size\n    // add preserveAspectRatio attribute to specify how to scale\n    // and call resize so that svg resizes on page load\n    svg\n      .attr(\"viewBox\", `0 0 ${width} ${height+10}`)\n      .attr(\"preserveAspectRatio\", \"xMinYMid\")\n      .call(resize);\n\n    d3.select(window).on(\"resize.\" + container.attr(\"id\"), resize);\n\n    function resize() {\n      const targetWidth = parseInt(container.style(\"width\"));\n      svg.attr(\"width\", targetWidth);\n      svg.attr(\"height\", Math.round(targetWidth / aspect));\n    }\n  };\n\n  function doExit() {\n    d3.select(divRef.current).selectAll(\"svg\").remove();\n  }\n\n  const draw = () => {\n\n    const dataset = d3.stack().keys(keys)(data.slice(selectedFrom, selectedTo));\n\n    // append element\n    const svg = d3\n      .select(divRef.current)\n      .append(\"svg\")\n      .style('margin-bottom', 15)\n      .attr(\"width\", width)\n      .attr(\"height\", height);\n    const margin = { y: 50, x: 50 };\n\n    // axis\n    const xScale = d3.scaleBand().padding(0.2);\n    const yScale = d3.scaleLinear().domain([0, d3.max(data.slice(selectedFrom, selectedTo), function(d) { return d.total; })]);\n    yScale.range([height, 0]);\n    xScale.range([0, width]).domain(data.slice(selectedFrom, selectedTo).map((d) => d.label));\n\n    svg\n      .attr(\"width\", width + 2 * margin.x)\n      .attr(\"height\", height + 2 * margin.y)\n      .call(responsivefy) // Call responsivefy to make the chart responsive\n      .attr(\"id\", \"svg-stack-bar\");\n\n    svg\n      .append(\"text\")\n      .attr(\"x\", width / 2 + margin.x)\n      .attr(\"y\", margin.y / 2)\n      .attr(\"class\", \"title\")\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"transform\", \"rotate(90)\")\n      .attr(title);\n\n    svg\n      .append(\"text\")\n      .attr(\"x\", -(height / 2) - margin.y)\n      .attr(\"y\", margin.x / 2.4)\n      .attr(\"transform\", \"rotate(-90)\")\n      .attr(\"class\", \"title\")\n      .text(ytitle);\n\n\n    const chart = svg\n      .append(\"g\")\n      .attr(\"transform\", `translate(${margin.x},${margin.y})`);\n\n    chart\n      .append(\"g\")\n      .attr(\"class\", \"axis\")\n      .attr(\"transform\", `translate(0,${height})`)\n      .style('font-size', 16)\n      .call(d3.axisBottom(xScale))\n        .selectAll(\"text\") // x axis label rotation\n            .attr(\"y\", -5)\n            .attr(\"x\", 11)\n            .attr(\"transform\", \"rotate(90)\")\n            .style(\"text-anchor\", \"start\");\n\n\n    const tooltip = d3\n      .select('body')\n      .append('div')\n      .attr('class', 'd3-tooltip')\n      .style('position', 'absolute')\n      .style('z-index', '10')\n      .style('display', 'none')\n      .style('padding', '10px')\n      .style('background', 'rgba(0,0,0,0.8)')\n      .style('border-radius', '4px')\n      .style('color', '#fff');\n\n    const path = chart.selectAll().data(dataset);\n\n    path\n      .enter()\n      .append(\"g\")\n      .attr(\"fill\", function(d) {\n        return colors[d.key];\n      })\n      .attr(\"supply\", function(d) {\n        return d.key;\n      })\n      .selectAll(\"rect\")\n      .data(function(d) {\n        return d;\n      })\n      .enter().append(\"rect\")\n      .attr(\"x\", function(d) {\n        return xScale(d.data.label);\n      })\n      .attr(\"y\", function(d) {\n        return yScale(d[1]);\n      })\n      .attr(\"height\", function(d) {\n        return yScale(d[0]) - yScale(d[1]);\n      })\n      .attr(\"width\", xScale.bandwidth())\n      .on('mouseover', function (d, i) {\n        d3.select(this).transition().attr('fill', '#e31f82');\n      })\n      .on('mousemove', function (event, d) {\n        tooltip\n            .style('top', event.pageY - 10 + 'px')\n            .style('left', event.pageX + 10 + 'px');\n        tooltip\n          .html(\n            `<div style=\"text-align: center\"><b>${d3.select(this.parentNode).attr(\"supply\")}</b></div>\n            <div>${(d[1] - d[0]).toLocaleString('it')} su ${d.data.total.toLocaleString(\"it\")}</div>\n            <div style=\"text-align: center; font-size: 12px\">dal ${(d.data.labelfrom)} al ${d.data.labelto}</div>`\n          )\n          .style('display', null);\n      })\n      .on('mouseout', function (d) {\n          tooltip.html(``).style('display', 'none');\n          d3.select(this).transition().attr('fill', colors[d.key]);\n      });\n    path.exit().remove();\n  };\n\n  return (\n    <div ref={divRef} className=\"chart svg-container\">\n      <svg ref={myRef} className=\"svg-content-responsive\"></svg>\n    </div>\n  );\n};\n","import React, { useEffect, useState } from \"react\";\nimport \"../App.css\";\nimport { Range, getTrackBackground } from \"react-range\";\n\nexport const RangeWeek = ({\n    from,\n    to,\n    min,\n    max,\n    changeFrom,\n    changeTo\n  }) => {\n\n  const [values, setValues] = useState([0, 1]);\n\n  const STEP = 1;\n\n  useEffect(() => {\n    setValues([from, to])\n  },[from, to, min, max]);\n\n\n  return (\n    <div className=\"col-12\"\n      style={{\n        display: 'flex',\n        justifyContent: 'center',\n        flexWrap: 'wrap',\n        backgroundColor: 'rgb(15, 53, 89)'\n      }}\n    >\n      <Range\n        draggableTrack\n        values={values}\n        step={STEP}\n        min={min}\n        max={max}\n        rtl={false}\n        onChange={(values) => {\n          if (values[0] !== values[1]) {\n            setValues(values);\n            changeFrom(values[0]);\n            changeTo(values[1]);\n          }\n\n        }}\n        renderTrack={({ props, children }) => (\n          <div\n            onMouseDown={props.onMouseDown}\n            onTouchStart={props.onTouchStart}\n            style={{\n              ...props.style,\n              height: '36px',\n              display: 'flex',\n              width: '100%',\n              marginRight: 10,\n              marginLeft: 10\n            }}\n          >\n            <div\n              ref={props.ref}\n              style={{\n                height: '5px',\n                width: '100%',\n                borderRadius: '4px',\n                background: getTrackBackground({\n                  values,\n                  colors: ['#ccc', 'black', '#ccc'],\n                  min: min,\n                  max: max,\n                  rtl: false\n                }),\n                alignSelf: 'center'\n              }}\n            >\n              {children}\n            </div>\n          </div>\n        )}\n        renderThumb={({ props, isDragged }) => (\n          <div\n            {...props}\n            style={{\n              ...props.style,\n              height: '20px',\n              width: '20px',\n              borderRadius: '50%',\n              backgroundColor: '#ccc',\n              display: 'flex',\n              justifyContent: 'center',\n              alignItems: 'center',\n              boxShadow: '0px 2px 6px #AAA'\n            }}\n          >\n          </div>\n        )}\n      />\n    </div>\n  );\n};\n","import React, { useEffect, useState } from \"react\";\nimport { isEmpty } from \"lodash\";\nimport { StackedBarChart } from \"./../components/StackedBarChart\";\nimport { RangeWeek } from \"./../components/RangeWeek\";\n\nexport const Weeks = ({ data }) => {\n    const [suppliersColor, setSuppliersColor] = useState([]);\n    const [suppliers, setSuppliers] = useState([]);\n    const [suppliersWeek, setSuppliersWeek] = useState([]);\n    const [from, setFrom] = useState(0);\n    const [to, setTo] = useState(0);\n\n    useEffect(() => {\n        if (!isEmpty(data)) {\n            setSuppliersColor(data.suppliersColor);\n            setSuppliers(data.suppliers);\n            setSuppliersWeek(data.suppliersWeek);\n\n            setTo(data.suppliersWeek.length);\n            if (data.suppliersWeek.length >= 9) {\n                setFrom(data.suppliersWeek.length - 9);\n            }\n        }\n      }, [data]);\n\n    return (\n        <div>\n            <div className=\"row justify-content-center p-5 bg-title-plot mt-5\">\n                <img src=\"Coccarda.svg\" width=\"100\" height=\"100\" alt=\"Logo\" className=\"img-fluid d-none d-lg-block\" style={{ zIndex: 10, position: 'relative', top: -25 }} />\n                <h3 className=\"text-center mt-2\">Andamento settimanale delle somministrazioni</h3>\n            </div>\n            <div className=\"row position-powerbi m-2 p-2\" style={{ backgroundColor: \"#F8FBFE\", marginTop: 20 }}>\n                <div className=\"col-12 col-md-6 align-items-end testo-info-campania d-none d-sm-none d-md-flex d-lg-flex\"></div>\n                <div className=\"col-12 col-md-6  position-relative\">\n                    <img src=\"Coccarda.svg\" width=\"100\" height=\"100\" alt=\"Logo\" className=\"d-lg-none sd-sm-block\" style={{ zIndex: 20, position: \"absolute\", right:-40, top:-25}}/>\n                    <div className=\"bg-gradient-bar\"></div>\n                </div>\n                <div className=\"col-12 col-md-4\" style={{ backgroundColor: \"#17324D\" }}>\n                    <div className=\"p-2 position-relative\">\n                        <div className=\"p-4\">\n                            <img src=\"group_person.svg\" alt=\"Logo\" className=\"img-fluid\" />\n                        </div>\n                        <div style={{marginTop: 40, marginLeft: 40}}>\n                            {suppliers.map((supply, index) => {\n                                return (\n                                    <div className=\"row\" key={supply}>\n                                        <div className=\"circle\" style={{ backgroundColor: suppliersColor[supply] }}></div>\n                                        <span className=\"legend\">{supply}</span>\n                                    </div>\n                                )\n                            })}\n                        </div>\n                    </div>\n                </div>\n                <div className=\"col-12 col-md-8\" style={{ backgroundColor: \"#17324D\" }}>\n                <div style={{color:\"#ffffff\", textAlign:\"center\", marginTop: 20}}>*Passa con il mouse sulle barre del grafico per visualizzare i dati della settimana</div>\n                    <StackedBarChart\n                        title=\"\"\n                        xtitle=\"Somministrazione settimanale\"\n                        ytitle=\"\"\n                        width={780}\n                        height={350}\n                        marginBottom={10}\n                        property={{ xprop: \"label\", yprop: \"total\" }}\n\n                        colors={suppliersColor}\n                        keys={suppliers}\n                        data={suppliersWeek}\n                        selectedFrom={from}\n                        selectedTo={to}\n                    />\n                </div>\n                {suppliersWeek.length > 0 && (\n                    <RangeWeek min={0} max={suppliersWeek.length} from={from} to={to} changeFrom={(value) => setFrom(value)} changeTo={(value) => setTo(value)}  />\n                )}\n            </div>\n                <div style={{color:\"#17324D\", textAlign:\"center\"}}>*Fai scorrere i selettori per aumentare o diminuire le settimane da visualizzare</div>\n        </div>\n    )\n};","import { React, useEffect, useRef } from \"react\";\nimport * as d3 from \"d3\";\nimport \"../App.css\";\nimport { maxX } from \"../utils\";\n\nexport const BarChartSupplier = (props) => {\n\n  const width = +props.width, //hack to get int\n    height = +props.height;\n  const myRef = useRef();\n  const divRef = useRef();\n\n  useEffect(() => {\n    doExit();\n    draw();\n    // eslint-disable-next-line\n  }, [props]);\n\n\n  const responsivefy = (svg) => {\n    // Container is the DOM element, svg is appended.\n    // Then we measure the container and find its\n    // aspect ratio.\n    const container = d3.select(svg.node().parentNode),\n      width = parseInt(svg.style(\"width\"), 10),\n      height = parseInt(svg.style(\"height\"), 10),\n      aspect = width / height;\n\n    // Add viewBox attribute to set the value to initial size\n    // add preserveAspectRatio attribute to specify how to scale\n    // and call resize so that svg resizes on page load\n    svg\n      .attr(\"viewBox\", `0 0 ${width} ${height}`)\n      .attr(\"preserveAspectRatio\", \"xMinYMid\")\n      .call(resize);\n\n    d3.select(window).on(\"resize.\" + container.attr(\"id\"), resize);\n\n    function resize() {\n      const targetWidth = parseInt(container.style(\"width\"));\n      svg.attr(\"width\", targetWidth);\n      svg.attr(\"height\", Math.round(targetWidth / aspect));\n    }\n  };\n\n  function doExit() {\n    d3.select(divRef.current).selectAll(\"svg\").remove();\n  }\n\n  const draw = () => {\n    const data = props?.data || [];\n    const maxScale = data?.reduce(maxX(props.property.yprop), 0) || 0;\n    // append element\n    const svg = d3\n      .select(divRef.current)\n      .append(\"svg\")\n      .attr(\"width\", width)\n      .attr(\"height\", height);\n    const margin = { y: 50, x: 20 };\n\n    // axis\n    const xScale = d3.scaleBand().padding(0.5);\n    const yScale = d3.scaleLinear().domain([0, maxScale]); //max scale should be dynamic\n    yScale.range([height, 0]);\n    xScale.range([0, width]).domain(data.map((d) => d[props.property.xprop]));\n\n    svg\n      .attr(\"width\", width + 2 * margin.x)\n      .attr(\"height\", height + 2 * margin.y)\n      .call(responsivefy) // Call responsivefy to make the chart responsive\n      .attr(\"id\", \"svg-bar\");\n\n    svg\n      .append(\"text\")\n      .attr(\"x\", width / 8 + margin.x)\n      .attr(\"y\", margin.y / 6)\n      .attr(\"class\", \"title-bar-dark\")\n      .attr(\"text-anchor\", \"middle\")\n      .attr(props.title);\n\n    // svg\n    //   .append(\"text\")\n    //   .attr(\"x\", width / 2 + margin.x)\n    //   .attr(\"y\", margin.y * 2)\n    //   .attr(\"transform\", `translate(0,${height - margin.y / 4})`)\n    //   .attr(\"class\", \"title-bar\")\n    //   .text(props.xtitle);\n\n    svg\n      .append(\"text\")\n      .attr(\"x\", -(height / 2) - margin.y)\n      .attr(\"y\", margin.x / 2.4)\n      .attr(\"transform\", \"rotate(-90)\")\n      .attr(\"class\", \"title-bar-dark\")\n      .text(props.ytitle);\n\n    const chart = svg\n      .append(\"g\")\n      .attr(\"transform\", `translate(${margin.x},${margin.y})`);\n\n    // chart.append(\"g\").attr(\"class\", \"axis\").call(d3.axisLeft(yScale));\n    chart\n      .append(\"g\")\n      .attr(\"class\", \"axis-dark\")\n      .attr(\"transform\", `translate(0,${height})`)\n      .style('font-size', 20)\n      .call(d3.axisBottom(xScale));\n\n    // chart\n    //   .append(\"g\")\n    //   .attr(\"class\", \"grid-hline\")\n    //   .call(d3.axisLeft().scale(yScale).tickSize(-width, 0, 0).tickFormat(\"\"));\n\n    const path = chart.selectAll().data(data);\n\n    path\n      .enter()\n      .append(\"rect\").on('click', (e, d) => {\n        props.handleBarChartClick(d);\n      })\n      .attr('id', (d) => d?.fornitore)\n      .attr('opacity', (d) => {\n        let opac = props.selected?.fornitore === d?.fornitore ? 1 : !props.selected ? 1 : 0.3;\n        return opac;\n      })\n      .attr(\"class\", \"bg-bar\")\n      .attr(\"x\", (d) => +xScale(d[props.property.xprop]))\n      .attr(\"y\", (d) => yScale(d[props.property.yprop]))\n      .attr(\"height\", (d) => height - yScale(d[props.property.yprop]))\n      .attr(\"width\", xScale.bandwidth())\n      .append(\"title\")\n      .attr(\"x\", (d) => xScale(d[props.property.xprop]))\n      .attr(\"y\", (d) => yScale(d[props.property.yprop]))\n      .text((d) => `Fornitore ${d[props.property.xprop]} totale: ${d[props.property.yprop]}`)\n\n    path\n      .enter()\n      .append(\"text\")\n      .attr(\"class\", \"bartext-dark\")\n      .attr(\"text-anchor\", \"center\")\n\n      .attr(\"fill\", \"black\")\n      .attr(\"x\", (d) => xScale(d[props.property.xprop]) -25 )\n      .attr(\"y\", (d) =>\n        height - yScale(d[props.property.yprop]) >= 0\n          ? yScale(d[props.property.yprop]) - 10\n          : yScale(d[props.property.yprop])\n      )\n      .text((d) => d[props.property.yprop]?.toLocaleString('it'));\n\n    path.exit().remove();\n  };\n\n  return (\n    <div ref={divRef}>\n      {/* <div className=\"w-100 h-100 d-flex justify-content-start pr-5\">\n        <img src=\"logo.png\" width=\"35\" height=\"35\" alt=\"Logo\" />\n        <h5 className=\"pl-3 pl-sm-1\">Distribuzione vaccini per fornitore</h5>\n      </div> */}\n      <svg ref={myRef}></svg>\n    </div>\n  );\n};\n","import { React, useEffect, useState } from \"react\";\nimport \"../App.css\";\nimport { isEmpty } from \"lodash\";\nimport { simulateClick } from './../utils';\nimport { BarChartSupplier } from \"./BarChartsSupplier\";\n\nexport const Supplier = (data) => {\n    const [selectedLocationCategoryMap, setSelectedLocationCategoryMap] = useState(null);\n    const [selectedSupplier, setelectedSupplier] = useState(null);\n    const [deliveryBarChartData, setdeliveryBarChartData] = useState([]);\n    const [totalSuplier, setTotalSuplier] = useState(0);\n\n    const resetFilter = () => {\n        setdeliveryBarChartData(data?.data?.allDosesSupplier);\n        setTotalSuplier(data?.data?.totalSuplier);\n        setelectedSupplier(null);\n        setSelectedLocationCategoryMap(null);\n        setTotalSuplier(data?.data?.totalSuplier);\n    }\n\n    useEffect(() => {\n        if (!isEmpty(data)) {\n            setdeliveryBarChartData(data?.data?.allDosesSupplier);\n            setTotalSuplier(data?.data?.totalSuplier);\n        }\n    }, [data]);\n\n    const handleDeliveryBarChartClick = (bar) => {\n        if (selectedSupplier === bar) {\n            resetFilter();\n        } else if (selectedLocationCategoryMap) {\n            resetFilter();\n            simulateClick(bar.fornitore);\n        } else {\n            handleRectClick(bar);\n            setelectedSupplier(bar);\n            setTotalSuplier(bar?.totale);\n        }\n    }\n\n    const handleRectClick = (currentRect) => {\n        setelectedSupplier(currentRect)\n    }\n\n    return (\n        <div className=\"row\">\n            <div className=\"col-12 col-md-12 h-100\" style={{marginTop: 40}}>\n                <div className=\"col-12 d-flex justify-content-center align-items-center p-5 bg-title-plot\">\n                    <h3 className=\"text-center\">Distribuzione vaccini per fornitore</h3>\n                </div>\n                <div className=\"col-12 col-md-12 h-100 p-0\">\n\n                    {/* Total Box - Mobile Layout */}\n                    <div className=\"m-3 d-lg-none\" style={{ position: 'relative', background: '#013366' }}>\n                    <img src=\"Coccarda.svg\" width=\"100\" height=\"100\" alt=\"Logo\" className=\"d-flex text-center\" style={{ position: \"absolute\", right:-40, top:-25}}/>\n                        <div className=\"text-white w-100\">\n                            <div className=\"w-100  h-100 d-flex justify-content-center pt-3\">\n                                <h5>Totale vaccini distribuiti</h5>\n                            </div>\n                            <div className=\"w-100  h-100 d-flex justify-content-center\">\n                                <p className=\"numeri_box\">{totalSuplier?.toLocaleString('it')}</p>\n                            </div>\n                            <div className=\"col-12 d-flex justify-content-end  pb-2\">\n                                <img alt=\"reset-plot2\" src=\"reset_white.png\" onClick={resetFilter} height={35} />\n                            </div>\n                        </div>\n                    </div>\n                    {/* // Total Box - Mobile Layout */}\n\n                    {/* Total Box - Mobile Desktop */}\n                    <div className=\"offset-md-9 col-md-3  d-none d-lg-block\" style={{ height: 100 }}>\n                        <div style={{ position: 'relative', background: '#17324D', top: -70, left: -50, }}>\n                            <img src=\"Coccarda.svg\" width=\"100\" height=\"100\" alt=\"Logo\" className=\"d-none d-lg-block\" style={{ position: \"absolute\", right: -45, top: -25, zIndex: 10 }} />\n                            <div className=\"text-white w-100\">\n                                <div className=\"w-100 h-100 d-flex justify-content-start pt-3 pl-4\">\n                                    <h5>Totale<br></br>vaccini distribuiti</h5>\n                                </div>\n                                <div className=\"w-100  h-100 d-flex justify-content-start pl-4\">\n                                    <p className=\"numeri_box\" >{totalSuplier?.toLocaleString('it')}</p>\n                                </div>\n                                <div className=\"col-12 d-flex justify-content-end  pb-2\">\n                                    <img alt=\"Reset\" src=\"reset_white.png\" onClick={resetFilter} height={35} />\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    {/* // Total Box - Mobile Desktop */}\n                </div>\n            </div>\n\n            {/* Supplier BarChart */}\n            <div className=\"col-12 col-md-6 h-100 pb-5\">\n                <BarChartSupplier\n                    title=\"\"\n                    xtitle=\"\"\n                    ytitle=\"\"\n                    width=\"900\"\n                    handleBarChartClick={handleDeliveryBarChartClick}\n                    height=\"350\"\n                    selected={selectedSupplier}\n                    property={{ xprop: \"fornitore\", yprop: \"totale\" }}\n                    data={deliveryBarChartData}\n                />\n            </div>\n            {/* Supplier BarChart */}\n            <div className=\" d-none d-sm-none d-md-block d-lg-none  col-md-6\"></div>\n        </div>\n    );\n};","import { React, useEffect } from \"react\";\nimport $ from \"jquery\";\nimport DataTable from \"datatables.net\";\nimport \"datatables.net-bs4/css/dataTables.bootstrap4.min.css\";\n\n$.DataTable = DataTable;\nconst columns = [\n  { title: \"Regione\", data: \"area\" },\n  { title: \"Punto di somministrazione\", data: \"denominazione_struttura\" },\n  { title: \"Tipologia\", data: \"tipologia\" }\n];\n\nexport const LocationsTable = (props) => {\n\n  useEffect(() => {\n    const {setLocationCount} = props;\n\n    const table = $(\"#datatable-locations\")\n      .find(\"table\")\n      .DataTable({\n        dom:\n          \"<'row'<'col-sm-12 col-md-6'l><'col-sm-12 col-md-6'>>\" +\n          \"<'row'<'col-sm-12'tr>>\" +\n          \"<'row'<'col-sm-12 col-md-5'i><'col-sm-12 col-md-7'p>>\",       \n        paging: false,\n        columnDefs: [{\n          \"targets\": [1,2], \"searchable\": false\n        }],\n        searching: true,\n        destroy: true,\n        bLengthChange: false,\n        info: false,\n        scrollY: '550px',\n        scrollCollapse: true,\n        data: props.summary?.locations || [],\n        columns,\n      });\n    if (props?.selected) {\n      table.search(props.selected).draw();\n    } else {\n      table.search(\" \").draw();\n    }\n\n    setLocationCount(table.rows( {search:'applied'} ).count()/2)\n  });\n  return (\n    <div id=\"datatable-locations\">\n      <table\n        className=\"display compact\"\n        cellSpacing=\"0\"\n        width=\"100%\"\n      />\n    </div>\n  );\n};\n","import React, { useEffect, useState } from \"react\";\nimport { isEmpty, max } from \"lodash\";\nimport { MapArea } from \"./../components/MapArea\";\nimport { LocationsTable } from \"./../components/LocationsTable\";\n\nconst TextBoxTotal = ({locationCount}) => (\n    <div className=\"text-white w-100\">\n        <div className=\"w-100  h-100 d-flex justify-content-start pt-5 pl-4\">\n            <h3>Totale: {locationCount}</h3>\n        </div>\n    </div>\n)\n\nconst TextBoxMap = () => (\n    <div className=\"w-100 h-100 d-flex justify-content-start pr-5\">\n        <h5 className=\"pl-3 pl-sm-1\">Principali punti di<br /> somministrazione <br /> per regione</h5>\n    </div>\n)\n\nexport const Locations = ({ data }) => {\n    const [summary, setSummary] = useState({});\n    const [selectedLocation, setSelectedLocation] = useState(\"\");\n    const [locationCount, setLocationCount] = useState(0);\n\n    useEffect(() => {\n        if (!isEmpty(data)) {\n            setSummary(data);\n        }\n    }, [data]);\n\n    const resetFilter = () => {\n        setSelectedLocation(\"\");\n        setLocationCount(0);\n    };\n\n    const fillMapDeliveryArea = ({ region, maxValue, field }) => {\n        let scaleOp = 0;\n            if (region.area === selectedLocation) {\n                scaleOp = 1;\n            } else if (!selectedLocation) {\n                scaleOp = max([region[field] / maxValue, 0.1]);\n            } else {\n                const valueToFill = region[field] / (2 * maxValue);\n                scaleOp = max([valueToFill, 0.1]);\n            }\n        return `rgba(23,50,77,${scaleOp})`;\n    };\n\n    const handleClick = (region) => {\n        if (selectedLocation === region.area) {\n            setSelectedLocation(null);\n        } else {\n            setSelectedLocation(region.area);\n        }\n    };\n\n    return (\n        <div className=\"row\">\n            <div className=\"col-12  d-flex justify-content-center align-items-center p-5 bg-title-plot\" style={{ marginTop: 40 }}>\n                <div style={{textAlign: 'center'}}>\n                    <h3 className=\"text-center\">Principali Punti di Somministrazione</h3>\n                    <p>(Sono inclusi i punti di somministrazione ospedalieri e territoriali;<br />\n                        non sono inclusi i punti di somministrazione temporanei)</p>\n                </div>\n            </div>\n            <div className=\"col-12 col-md-12 h-100 p-3 mb-3\" style={{marginTop: -10}}>\n                {/* Total Box - Mobile View */}\n                <div className=\"d-lg-none m-3 pl-5\" style={{background: \"#013366\",}}>\n                    <img src=\"Coccarda.svg\" width=\"100\" height=\"100\" alt=\"Logo\" className=\"\" style={{ position: \"absolute\", left:-10, top:0}}/>\n\n                    <TextBoxTotal locationCount={locationCount}/>\n\n                    <div className=\"col-12 d-flex justify-content-end  pb-2\">\n                        <img alt=\"reset-plot\" src=\"reset_white.png\" onClick={resetFilter} height={35} />\n                    </div>\n\n                </div>\n                {/* // Total Box - Mobile View */}\n\n                {/* Total Box - Desktop View */}\n                <div className=\"col-3 col-md-3 h-100 d-none d-lg-block\">\n                    <div style={{ position: \"relative\", background: \"#17324D\", top: -50, left: 25, }} >\n                    <img src=\"Coccarda.svg\" width=\"100\" height=\"100\" alt=\"Logo\" className=\"d-none d-md-block d-lg-block\" style={{ zIndex: 10, position: 'absolute', right: -50, top: -25 }} />\n                        <div className=\"text-white w-100\">\n\n                        <TextBoxTotal locationCount={locationCount}/>\n\n                            <div className=\"col-12 d-flex justify-content-end  pb-2\">\n                                <img alt=\"reset-white\" src=\"reset_white.png\" onClick={resetFilter} height={35} />\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                {/* // Total Box - Desktop View */}\n            </div>\n            <div className=\"col-12 col-md-6 pt-5\">\n                {/* Map Legend - Mobile View */}\n                <div className=\"p-2 position-relative d-lg-none\" style={{top:-100}}>Principali Punti di Somministrazione per Regione</div>\n\n                {/* Map Legend - Desktop View */}\n                <div className=\"p-4 mb-2 position-relative d-none d-lg-block\" style={{ left: \"300px\", top: \"-60px\" }} ><TextBoxMap/></div>\n\n                {/* Map Graph */}\n                <div style={{marginTop: -150}}>\n                <MapArea\n                    fillMapDeliveryArea={fillMapDeliveryArea}\n                    summary={data.locationsByRegion}\n                    handleMapDeliveryClick={handleClick}\n                    tooltip={(r) => r.area + \": \" + (r.locations && r.locations.toLocaleString(\"it\")) }\n                    fillBy=\"locations\"\n                    className=\"ml-5 w-100 h-100\"\n                />\n                </div>\n                {/* // Map Graph */}\n            </div>\n            {/* Data Table */}\n            <div className=\"col-12 col-md-6 pt-3 pl-3\" style={{marginTop: -20}}>\n                <LocationsTable\n                    summary={{ ...summary }}\n                    selected={selectedLocation}\n                    className=\"mr-5 h-100\"\n                    setLocationCount={setLocationCount}\n                />\n            </div>\n            {/* // Data Table */}\n        </div>\n    );\n};\n","import { useState, useEffect } from 'react';\nimport { HeaderBar } from \"./components/HeaderBar\";\nimport { FooterBar } from \"./components/FooterBar\";\nimport { Total } from \"./components/Total\";\nimport { loadData } from \"./loadData\";\nimport { Deliveries } from \"./containers/deliveries\";\nimport { AgeDoses } from \"./containers/agedoses\";\nimport { Healed } from \"./containers/healed\";\nimport { Weeks } from \"./containers/weeks\";\nimport { Supplier } from './components/Supplier';\nimport { hideLoader } from \"./utils\";\nimport \"./App.css\";\nimport { Locations } from \"./containers/locations\";\n\n\nfunction App() {\n    const [summary, setSummary] = useState({});\n\n    useEffect(() => {\n        loadData().then((d) => {\n        hideLoader();\n        setSummary(d);\n        });\n    }, []);\n\n    const tot = (summary?.totalDoses?.seconda_dose + summary?.totalDoses?.prima_dose_janssen + summary?.totalDoses?.pregressa_infezione)\n    const totalePersoneVaccinate = isNaN(tot) ? '' : tot?.toLocaleString('it')\n    const totalePersoneVaccinatePopolazione = isNaN(tot) ? '' : (tot / summary?.totalPlatea * 100).toLocaleString('it', {minimumFractionDigits: 2, maximumFractionDigits: 2})\n\n    const totaleDoseAggiuntivaBoosterVal = (isNaN(summary?.totalDoses?.dose_aggiuntiva) || isNaN(summary?.totalDoses?.dose_booster)) ? 0 : (summary?.totalDoses?.dose_aggiuntiva + summary?.totalDoses?.dose_booster)\n    const totaleDoseAggiuntivaBooster = totaleDoseAggiuntivaBoosterVal ? totaleDoseAggiuntivaBoosterVal.toLocaleString('it') : '';\n    const percentualeDoseAggiuntivaBoosterPopolazione = totaleDoseAggiuntivaBoosterVal ? (totaleDoseAggiuntivaBoosterVal / (summary?.totalPlateaDoseAgg + summary?.totalPlateaDoseBooster) * 100).toLocaleString('it', {minimumFractionDigits: 2, maximumFractionDigits: 2}) : '';\n\n    const prima = (summary?.totalDoses?.prima_dose + summary?.totalDoses?.pregressa_infezione)\n\n    const totalePrimaDose = isNaN(prima) ? '' : prima?.toLocaleString('it')\n    const percentualePrimaDosePopolazione = isNaN(prima) ? '' : (prima / summary?.totalPlatea * 100).toLocaleString('it', {minimumFractionDigits: 2, maximumFractionDigits: 2})\n\n    const totalePersoneGuarite = summary?.totalGuariti?.toLocaleString('it')\n    const totalePersoneGuaritePopolazione = isNaN(summary?.totalGuariti) ? '' : (summary?.totalGuariti / summary?.totalPlatea * 100).toLocaleString('it', {minimumFractionDigits: 2, maximumFractionDigits: 2})\n\n    const totaleAlmenoUnaGuariti = isNaN(prima) ? '' : (prima + summary?.totalGuariti).toLocaleString('it');\n    const percentualeAlmenoUnaGuariti = isNaN(prima) ? '' : ((prima + summary?.totalGuariti) / summary?.totalPlatea * 100).toLocaleString('it', {minimumFractionDigits: 2, maximumFractionDigits: 2});\n\n    return (\n        <div>\n            <HeaderBar />\n            <div className=\"container\">\n                <div className=\"row\">\n                    <div className=\"col-12 d-flex justify-content-center\">\n\n                        <Total className=\"mb-3\" summary={{ ...summary }} /> {/* Totale Somministrazioni */}\n\n                    </div>\n                </div>\n                <div style={{ padding: 20 }}></div>\n                <div className=\"row position-powerbi\" style={{ backgroundColor: '#17324D', marginBottom:20 }} >\n                    <div className=\"col-md-4 col-sm-12 mb-4\">\n                        <div className=\"p-2 pt-4 position-relative d-flex justify-content-center  h-100\" style={{ backgroundColor: '#17324D', minHeight: 240 }}>\n                            <div className=\"position-absolute center-logo\">\n                                <img src=\"Coccarda.svg\" width=\"150\" height=\"130\" alt=\"Logo\" />\n                            </div>\n                            <div className=\"text-white w-100\" style={{ padding: 10, marginTop: 15 }}>\n                                <div className=\"w-100  h-100 align-items-center justify-content-center text-center\">\n                                    <h5 style={{ marginRight: 0, marginTop: 25, fontWeight: 600 }}>Totale con almeno una dose</h5>\n                                    <div style={{fontSize: 36, fontWeight: 500, lineHeight: 1, marginBottom:5}}>{totalePrimaDose}</div>\n                                    <div style={{fontSize: 16}}>{percentualePrimaDosePopolazione} % della popolazione over 12</div>\n                                    <div style={{fontSize: 13, top: -10 }}>(persone con almeno una somministrazione)</div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"col-md-4 col-sm-12\">\n                        <div className=\"p-2 pt-4 position-relative d-flex justify-content-center  h-100\" style={{ backgroundColor: '#17324D', minHeight: 240 }}>\n                            <div className=\"position-absolute center-logo\">\n                                <img src=\"Coccarda.svg\" width=\"150\" height=\"130\" alt=\"Logo\" />\n                            </div>\n                            <div className=\"text-white w-100\" style={{ padding: 10, marginTop: 15 }}>\n                                <div className=\"w-100  h-100 align-items-center justify-content-center text-center\">\n                                    <h5 style={{ marginRight: 0, marginTop: 25, fontWeight: 600 }}>Totale ciclo vaccinale</h5>\n                                    <div style={{fontSize: 36, fontWeight: 500, lineHeight: 1, marginBottom:5}}>{totalePersoneVaccinate}</div>\n                                    <div style={{fontSize: 16}}>{totalePersoneVaccinatePopolazione} % della popolazione over 12</div>\n                                    <div style={{fontSize: 13, top: -10 }}>(persone che hanno completato il ciclo vaccinale)</div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"col-md-4 col-sm-12\">\n                        <div className=\"p-2 pt-4 position-relative d-flex justify-content-center  h-100\" style={{ backgroundColor: '#17324D', minHeight: 240 }}>\n                            <div className=\"position-absolute center-logo\">\n                                <img src=\"Coccarda.svg\" width=\"150\" height=\"130\" alt=\"Logo\" />\n                            </div>\n                            <div className=\"text-white w-100\" style={{ padding: 10, marginTop: 15 }}>\n                                <div className=\"w-100  h-100 align-items-center justify-content-center text-center\">\n                                    <h5 style={{ marginRight: 0, marginTop: 25, fontWeight: 600 }}>Totale guariti</h5>\n                                    <div style={{fontSize: 36, fontWeight: 500, lineHeight: 1, marginBottom:5}}>{totalePersoneGuarite}</div>\n                                    <div style={{fontSize: 16}}>{totalePersoneGuaritePopolazione} % della popolazione over 12</div>\n                                    <div style={{fontSize: 13, top: -10 }}>guarita da al massimo 6 mesi</div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"row position-powerbi mt-4 mb-5\" style={{ backgroundColor: '#17324D' }} >\n                    <div className=\"col-md-12 col-sm-12 mb-5\">\n                        <div className=\"p-2 position-relative d-flex justify-content-center  h-100\" style={{ backgroundColor: '#17324D', minHeight: 140 }}>\n                            <div className=\"text-white w-100\" style={{ padding: 10 }}>\n                                <div className=\"w-100  h-100 align-items-center justify-content-center text-center\">\n                                    <h5 style={{ marginRight: 0, marginTop: 25, fontWeight: 600 }}>Totale con almeno una dose + guariti da al massimo 6 mesi</h5>\n                                    <div style={{fontSize: 36, fontWeight: 500, lineHeight: 1, marginBottom:5}}>{totaleAlmenoUnaGuariti}</div>\n                                    <div style={{fontSize: 16}}>{percentualeAlmenoUnaGuariti} % della popolazione over 12</div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"row position-powerbi mt-4 mb-5\" style={{ backgroundColor: '#17324D', top: 30 }} >\n                    <div className=\"col-md-12 col-sm-12 mb-5\">\n                        <div className=\"p-2 pt-4 position-relative d-flex justify-content-center  h-100\" style={{ backgroundColor: '#17324D', minHeight: 240 }}>\n                            <div className=\"position-absolute center-logo\">\n                                <img src=\"Coccarda.svg\" width=\"150\" height=\"130\" alt=\"Logo\" />\n                            </div>\n                            <div className=\"text-white w-100\" style={{ padding: 10, marginTop: 15 }}>\n                                <div className=\"w-100  h-100 align-items-center justify-content-center text-center\">\n                                    <h5 style={{ marginRight: 0, marginTop: 25, fontWeight: 600 }}>Totale dose addizionale/richiamo (booster)</h5>\n                                    <div style={{fontSize: 36, fontWeight: 500, lineHeight: 1, marginBottom:5}}>{totaleDoseAggiuntivaBooster}</div>\n                                    <div style={{fontSize: 16}}>{percentualeDoseAggiuntivaBoosterPopolazione} % della popolazione potenzialmente oggetto di<br />dose addizionale o booster che hanno ultimato il ciclo vaccinale da<br />almeno cinque mesi</div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <Deliveries data={summary} /> {/* Tabella Distribuzione Dosi */}\n                <Healed data={summary} /> {/* Grafico guariti */}\n                <Weeks data={summary} /> {/* Grafico Andamento Settimanale delle Somministrazioni */}\n                <AgeDoses data={summary} /> {/* Grafico Somministrazioni per fascia d'età */}\n                <Supplier data={summary} /> {/* Grafico Distribuzione Vaccini per Fornitore */}\n                <Locations data={summary} /> {/* Tabella Principali Punti di Somministrazione */}\n\n                <div className=\"row\">\n                    <div className=\"col-12 text-center pt-5 pb-3\">I dati visualizzati sono disponibili all'indirizzo{\" \"}\n                        <a href=\"https://github.com/italia/covid19-opendata-vaccini\">https://github.com/italia/covid19-opendata-vaccini</a>\n                    </div>\n                </div>\n            </div>\n\n            <FooterBar />\n\n        </div>\n    );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}